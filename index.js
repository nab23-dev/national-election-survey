(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function qT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hg={exports:{}},Wc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function kj(){if(c_)return Wc;c_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:t,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Wc.Fragment=e,Wc.jsx=n,Wc.jsxs=n,Wc}var u_;function Oj(){return u_||(u_=1,hg.exports=kj()),hg.exports}var d=Oj(),fg={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function Pj(){if(d_)return ze;d_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),w=Symbol.iterator;function E(L){return L===null||typeof L!="object"?null:(L=w&&L[w]||L["@@iterator"],typeof L=="function"?L:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,V={};function q(L,re,ye){this.props=L,this.context=re,this.refs=V,this.updater=ye||j}q.prototype.isReactComponent={},q.prototype.setState=function(L,re){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,re,"setState")},q.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function B(){}B.prototype=q.prototype;function K(L,re,ye){this.props=L,this.context=re,this.refs=V,this.updater=ye||j}var oe=K.prototype=new B;oe.constructor=K,M(oe,q.prototype),oe.isPureReactComponent=!0;var H=Array.isArray;function Z(){}var R={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function N(L,re,ye){var _e=ye.ref;return{$$typeof:t,type:L,key:re,ref:_e!==void 0?_e:null,props:ye}}function k(L,re){return N(L.type,re,L.props)}function D(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function O(L){var re={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ye){return re[ye]})}var I=/\/+/g;function te(L,re){return typeof L=="object"&&L!==null&&L.key!=null?O(""+L.key):re.toString(36)}function Re(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(Z,Z):(L.status="pending",L.then(function(re){L.status==="pending"&&(L.status="fulfilled",L.value=re)},function(re){L.status==="pending"&&(L.status="rejected",L.reason=re)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function ee(L,re,ye,_e,De){var ke=typeof L;(ke==="undefined"||ke==="boolean")&&(L=null);var qe=!1;if(L===null)qe=!0;else switch(ke){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(L.$$typeof){case t:case e:qe=!0;break;case v:return qe=L._init,ee(qe(L._payload),re,ye,_e,De)}}if(qe)return De=De(L),qe=_e===""?"."+te(L,0):_e,H(De)?(ye="",qe!=null&&(ye=qe.replace(I,"$&/")+"/"),ee(De,re,ye,"",function(Is){return Is})):De!=null&&(D(De)&&(De=k(De,ye+(De.key==null||L&&L.key===De.key?"":(""+De.key).replace(I,"$&/")+"/")+qe)),re.push(De)),1;qe=0;var lt=_e===""?".":_e+":";if(H(L))for(var nt=0;nt<L.length;nt++)_e=L[nt],ke=lt+te(_e,nt),qe+=ee(_e,re,ye,ke,De);else if(nt=E(L),typeof nt=="function")for(L=nt.call(L),nt=0;!(_e=L.next()).done;)_e=_e.value,ke=lt+te(_e,nt++),qe+=ee(_e,re,ye,ke,De);else if(ke==="object"){if(typeof L.then=="function")return ee(Re(L),re,ye,_e,De);throw re=String(L),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return qe}function X(L,re,ye){if(L==null)return L;var _e=[],De=0;return ee(L,_e,"","",function(ke){return re.call(ye,ke,De++)}),_e}function ue(L){if(L._status===-1){var re=L._result;re=re(),re.then(function(ye){(L._status===0||L._status===-1)&&(L._status=1,L._result=ye)},function(ye){(L._status===0||L._status===-1)&&(L._status=2,L._result=ye)}),L._status===-1&&(L._status=0,L._result=re)}if(L._status===1)return L._result.default;throw L._result}var be=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},we={map:X,forEach:function(L,re,ye){X(L,function(){re.apply(this,arguments)},ye)},count:function(L){var re=0;return X(L,function(){re++}),re},toArray:function(L){return X(L,function(re){return re})||[]},only:function(L){if(!D(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return ze.Activity=x,ze.Children=we,ze.Component=q,ze.Fragment=n,ze.Profiler=a,ze.PureComponent=K,ze.StrictMode=i,ze.Suspense=p,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ze.__COMPILER_RUNTIME={__proto__:null,c:function(L){return R.H.useMemoCache(L)}},ze.cache=function(L){return function(){return L.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(L,re,ye){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var _e=M({},L.props),De=L.key;if(re!=null)for(ke in re.key!==void 0&&(De=""+re.key),re)!S.call(re,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&re.ref===void 0||(_e[ke]=re[ke]);var ke=arguments.length-2;if(ke===1)_e.children=ye;else if(1<ke){for(var qe=Array(ke),lt=0;lt<ke;lt++)qe[lt]=arguments[lt+2];_e.children=qe}return N(L.type,De,_e)},ze.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},ze.createElement=function(L,re,ye){var _e,De={},ke=null;if(re!=null)for(_e in re.key!==void 0&&(ke=""+re.key),re)S.call(re,_e)&&_e!=="key"&&_e!=="__self"&&_e!=="__source"&&(De[_e]=re[_e]);var qe=arguments.length-2;if(qe===1)De.children=ye;else if(1<qe){for(var lt=Array(qe),nt=0;nt<qe;nt++)lt[nt]=arguments[nt+2];De.children=lt}if(L&&L.defaultProps)for(_e in qe=L.defaultProps,qe)De[_e]===void 0&&(De[_e]=qe[_e]);return N(L,ke,De)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(L){return{$$typeof:h,render:L}},ze.isValidElement=D,ze.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:ue}},ze.memo=function(L,re){return{$$typeof:g,type:L,compare:re===void 0?null:re}},ze.startTransition=function(L){var re=R.T,ye={};R.T=ye;try{var _e=L(),De=R.S;De!==null&&De(ye,_e),typeof _e=="object"&&_e!==null&&typeof _e.then=="function"&&_e.then(Z,be)}catch(ke){be(ke)}finally{re!==null&&ye.types!==null&&(re.types=ye.types),R.T=re}},ze.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ze.use=function(L){return R.H.use(L)},ze.useActionState=function(L,re,ye){return R.H.useActionState(L,re,ye)},ze.useCallback=function(L,re){return R.H.useCallback(L,re)},ze.useContext=function(L){return R.H.useContext(L)},ze.useDebugValue=function(){},ze.useDeferredValue=function(L,re){return R.H.useDeferredValue(L,re)},ze.useEffect=function(L,re){return R.H.useEffect(L,re)},ze.useEffectEvent=function(L){return R.H.useEffectEvent(L)},ze.useId=function(){return R.H.useId()},ze.useImperativeHandle=function(L,re,ye){return R.H.useImperativeHandle(L,re,ye)},ze.useInsertionEffect=function(L,re){return R.H.useInsertionEffect(L,re)},ze.useLayoutEffect=function(L,re){return R.H.useLayoutEffect(L,re)},ze.useMemo=function(L,re){return R.H.useMemo(L,re)},ze.useOptimistic=function(L,re){return R.H.useOptimistic(L,re)},ze.useReducer=function(L,re,ye){return R.H.useReducer(L,re,ye)},ze.useRef=function(L){return R.H.useRef(L)},ze.useState=function(L){return R.H.useState(L)},ze.useSyncExternalStore=function(L,re,ye){return R.H.useSyncExternalStore(L,re,ye)},ze.useTransition=function(){return R.H.useTransition()},ze.version="19.2.3",ze}var h_;function X0(){return h_||(h_=1,fg.exports=Pj()),fg.exports}var z=X0();const bn=qT(z);var mg={exports:{}},Xc={},pg={exports:{}},gg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function Lj(){return f_||(f_=1,(function(t){function e(ee,X){var ue=ee.length;ee.push(X);e:for(;0<ue;){var be=ue-1>>>1,we=ee[be];if(0<a(we,X))ee[be]=X,ee[ue]=we,ue=be;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var X=ee[0],ue=ee.pop();if(ue!==X){ee[0]=ue;e:for(var be=0,we=ee.length,L=we>>>1;be<L;){var re=2*(be+1)-1,ye=ee[re],_e=re+1,De=ee[_e];if(0>a(ye,ue))_e<we&&0>a(De,ye)?(ee[be]=De,ee[_e]=ue,be=_e):(ee[be]=ye,ee[re]=ue,be=re);else if(_e<we&&0>a(De,ue))ee[be]=De,ee[_e]=ue,be=_e;else break e}}return X}function a(ee,X){var ue=ee.sortIndex-X.sortIndex;return ue!==0?ue:ee.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var p=[],g=[],v=1,x=null,w=3,E=!1,j=!1,M=!1,V=!1,q=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function oe(ee){for(var X=n(g);X!==null;){if(X.callback===null)i(g);else if(X.startTime<=ee)i(g),X.sortIndex=X.expirationTime,e(p,X);else break;X=n(g)}}function H(ee){if(M=!1,oe(ee),!j)if(n(p)!==null)j=!0,Z||(Z=!0,O());else{var X=n(g);X!==null&&Re(H,X.startTime-ee)}}var Z=!1,R=-1,S=5,N=-1;function k(){return V?!0:!(t.unstable_now()-N<S)}function D(){if(V=!1,Z){var ee=t.unstable_now();N=ee;var X=!0;try{e:{j=!1,M&&(M=!1,B(R),R=-1),E=!0;var ue=w;try{t:{for(oe(ee),x=n(p);x!==null&&!(x.expirationTime>ee&&k());){var be=x.callback;if(typeof be=="function"){x.callback=null,w=x.priorityLevel;var we=be(x.expirationTime<=ee);if(ee=t.unstable_now(),typeof we=="function"){x.callback=we,oe(ee),X=!0;break t}x===n(p)&&i(p),oe(ee)}else i(p);x=n(p)}if(x!==null)X=!0;else{var L=n(g);L!==null&&Re(H,L.startTime-ee),X=!1}}break e}finally{x=null,w=ue,E=!1}X=void 0}}finally{X?O():Z=!1}}}var O;if(typeof K=="function")O=function(){K(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,te=I.port2;I.port1.onmessage=D,O=function(){te.postMessage(null)}}else O=function(){q(D,0)};function Re(ee,X){R=q(function(){ee(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(ee){switch(w){case 1:case 2:case 3:var X=3;break;default:X=w}var ue=w;w=X;try{return ee()}finally{w=ue}},t.unstable_requestPaint=function(){V=!0},t.unstable_runWithPriority=function(ee,X){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ue=w;w=ee;try{return X()}finally{w=ue}},t.unstable_scheduleCallback=function(ee,X,ue){var be=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?be+ue:be):ue=be,ee){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=ue+we,ee={id:v++,callback:X,priorityLevel:ee,startTime:ue,expirationTime:we,sortIndex:-1},ue>be?(ee.sortIndex=ue,e(g,ee),n(p)===null&&ee===n(g)&&(M?(B(R),R=-1):M=!0,Re(H,ue-be))):(ee.sortIndex=we,e(p,ee),j||E||(j=!0,Z||(Z=!0,O()))),ee},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(ee){var X=w;return function(){var ue=w;w=X;try{return ee.apply(this,arguments)}finally{w=ue}}}})(gg)),gg}var m_;function Uj(){return m_||(m_=1,pg.exports=Lj()),pg.exports}var yg={exports:{}},Nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function zj(){if(p_)return Nn;p_=1;var t=X0();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:p,containerInfo:g,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Nn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},Nn.flushSync=function(p){var g=c.T,v=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=v,i.d.f()}},Nn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},Nn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Nn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,x=h(v,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,E=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:w,fetchPriority:E}):v==="script"&&i.d.X(p,{crossOrigin:x,integrity:w,fetchPriority:E,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Nn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=h(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},Nn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,x=h(v,g.crossOrigin);i.d.L(p,v,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Nn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=h(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},Nn.requestFormReset=function(p){i.d.r(p)},Nn.unstable_batchedUpdates=function(p,g){return p(g)},Nn.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},Nn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Nn.version="19.2.3",Nn}var g_;function Bj(){if(g_)return yg.exports;g_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yg.exports=zj(),yg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function Fj(){if(y_)return Xc;y_=1;var t=Uj(),e=X0(),n=Bj();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var r=s,o=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(o=r.return),s=r.return;while(s)}return r.tag===3?o:null}function c(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function h(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function p(s){if(l(s)!==s)throw Error(i(188))}function g(s){var r=s.alternate;if(!r){if(r=l(s),r===null)throw Error(i(188));return r!==s?null:s}for(var o=s,u=r;;){var m=o.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===o)return p(m),s;if(y===u)return p(m),r;y=y.sibling}throw Error(i(188))}if(o.return!==u.return)o=m,u=y;else{for(var _=!1,A=m.child;A;){if(A===o){_=!0,o=m,u=y;break}if(A===u){_=!0,u=m,o=y;break}A=A.sibling}if(!_){for(A=y.child;A;){if(A===o){_=!0,o=y,u=m;break}if(A===u){_=!0,u=y,o=m;break}A=A.sibling}if(!_)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var x=Object.assign,w=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),K=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function O(s){return s===null||typeof s!="object"?null:(s=D&&s[D]||s["@@iterator"],typeof s=="function"?s:null)}var I=Symbol.for("react.client.reference");function te(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===I?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case M:return"Fragment";case q:return"Profiler";case V:return"StrictMode";case H:return"Suspense";case Z:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case j:return"Portal";case K:return s.displayName||"Context";case B:return(s._context.displayName||"Context")+".Consumer";case oe:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return r=s.displayName||null,r!==null?r:te(s.type)||"Memo";case S:r=s._payload,s=s._init;try{return te(s(r))}catch{}}return null}var Re=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},be=[],we=-1;function L(s){return{current:s}}function re(s){0>we||(s.current=be[we],be[we]=null,we--)}function ye(s,r){we++,be[we]=s.current,s.current=r}var _e=L(null),De=L(null),ke=L(null),qe=L(null);function lt(s,r){switch(ye(ke,r),ye(De,s),ye(_e,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?D1(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=D1(r),s=V1(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}re(_e),ye(_e,s)}function nt(){re(_e),re(De),re(ke)}function Is(s){s.memoizedState!==null&&ye(qe,s);var r=_e.current,o=V1(r,s.type);r!==o&&(ye(De,s),ye(_e,o))}function ei(s){De.current===s&&(re(_e),re(De)),qe.current===s&&(re(qe),Kc._currentValue=ue)}var hr,Mi;function ds(s){if(hr===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);hr=r&&r[1]||"",Mi=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hr+s+Mi}var fr=!1;function ti(s,r){if(!s||fr)return"";fr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(se){var J=se}Reflect.construct(s,[],de)}else{try{de.call()}catch(se){J=se}s.call(de.prototype)}}else{try{throw Error()}catch(se){J=se}(de=s())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(se){if(se&&J&&typeof se.stack=="string")return[se.stack,J.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),_=y[0],A=y[1];if(_&&A){var P=_.split(`
`),W=A.split(`
`);for(m=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;m<W.length&&!W[m].includes("DetermineComponentFrameRoot");)m++;if(u===P.length||m===W.length)for(u=P.length-1,m=W.length-1;1<=u&&0<=m&&P[u]!==W[m];)m--;for(;1<=u&&0<=m;u--,m--)if(P[u]!==W[m]){if(u!==1||m!==1)do if(u--,m--,0>m||P[u]!==W[m]){var ae=`
`+P[u].replace(" at new "," at ");return s.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",s.displayName)),ae}while(1<=u&&0<=m);break}}}finally{fr=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?ds(o):""}function _a(s,r){switch(s.tag){case 26:case 27:case 5:return ds(s.type);case 16:return ds("Lazy");case 13:return s.child!==r&&r!==null?ds("Suspense Fallback"):ds("Suspense");case 19:return ds("SuspenseList");case 0:case 15:return ti(s.type,!1);case 11:return ti(s.type.render,!1);case 1:return ti(s.type,!0);case 31:return ds("Activity");default:return""}}function wa(s){try{var r="",o=null;do r+=_a(s,o),o=s,s=s.return;while(s);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ot=Object.prototype.hasOwnProperty,It=t.unstable_scheduleCallback,U=t.unstable_cancelCallback,Q=t.unstable_shouldYield,ie=t.unstable_requestPaint,ge=t.unstable_now,pe=t.unstable_getCurrentPriorityLevel,fe=t.unstable_ImmediatePriority,Ce=t.unstable_UserBlockingPriority,Ge=t.unstable_NormalPriority,st=t.unstable_LowPriority,qt=t.unstable_IdlePriority,hs=t.log,Yn=t.unstable_setDisableYieldValue,Qn=null,Pt=null;function An(s){if(typeof hs=="function"&&Yn(s),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(Qn,s)}catch{}}var Ct=Math.clz32?Math.clz32:Ea,Ta=Math.log,mr=Math.LN2;function Ea(s){return s>>>=0,s===0?32:31-(Ta(s)/mr|0)|0}var ni=256,Sa=262144,Ht=4194304;function si(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ii(s,r,o){var u=s.pendingLanes;if(u===0)return 0;var m=0,y=s.suspendedLanes,_=s.pingedLanes;s=s.warmLanes;var A=u&134217727;return A!==0?(u=A&~y,u!==0?m=si(u):(_&=A,_!==0?m=si(_):o||(o=A&~s,o!==0&&(m=si(o))))):(A=u&~y,A!==0?m=si(A):_!==0?m=si(_):o||(o=u&~s,o!==0&&(m=si(o)))),m===0?0:r!==0&&r!==m&&(r&y)===0&&(y=m&-m,o=r&-r,y>=o||y===32&&(o&4194048)!==0)?r:m}function Ds(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function gm(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ud(){var s=Ht;return Ht<<=1,(Ht&62914560)===0&&(Ht=4194304),s}function ri(s){for(var r=[],o=0;31>o;o++)r.push(s);return r}function Aa(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ym(s,r,o,u,m,y){var _=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var A=s.entanglements,P=s.expirationTimes,W=s.hiddenUpdates;for(o=_&~o;0<o;){var ae=31-Ct(o),de=1<<ae;A[ae]=0,P[ae]=-1;var J=W[ae];if(J!==null)for(W[ae]=null,ae=0;ae<J.length;ae++){var se=J[ae];se!==null&&(se.lane&=-536870913)}o&=~de}u!==0&&Na(s,u,0),y!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=y&~(_&~r))}function Na(s,r,o){s.pendingLanes|=r,s.suspendedLanes&=~r;var u=31-Ct(r);s.entangledLanes|=r,s.entanglements[u]=s.entanglements[u]|1073741824|o&261930}function Xl(s,r){var o=s.entangledLanes|=r;for(s=s.entanglements;o;){var u=31-Ct(o),m=1<<u;m&r|s[u]&r&&(s[u]|=r),o&=~m}}function Jl(s,r){var o=r&-r;return o=(o&42)!==0?1:Ca(o),(o&(s.suspendedLanes|r))!==0?0:o}function Ca(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ki(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function dd(){var s=X.p;return s!==0?s:(s=window.event,s===void 0?32:n_(s.type))}function Vs(s,r){var o=X.p;try{return X.p=s,r()}finally{X.p=o}}var Ms=Math.random().toString(36).slice(2),Gt="__reactFiber$"+Ms,cn="__reactProps$"+Ms,ai="__reactContainer$"+Ms,Eo="__reactEvents$"+Ms,vm="__reactListeners$"+Ms,hd="__reactHandles$"+Ms,fd="__reactResources$"+Ms,oi="__reactMarker$"+Ms;function So(s){delete s[Gt],delete s[cn],delete s[Eo],delete s[vm],delete s[hd]}function li(s){var r=s[Gt];if(r)return r;for(var o=s.parentNode;o;){if(r=o[ai]||o[Gt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(s=z1(s);s!==null;){if(o=s[Gt])return o;s=z1(s)}return r}s=o,o=s.parentNode}return null}function fs(s){if(s=s[Gt]||s[ai]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function Wn(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function ci(s){var r=s[fd];return r||(r=s[fd]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Kt(s){s[oi]=!0}var Zl=new Set,ec={};function ui(s,r){di(s,r),di(s+"Capture",r)}function di(s,r){for(ec[s]=r,s=0;s<r.length;s++)Zl.add(r[s])}var tc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nc={},sc={};function md(s){return Ot.call(sc,s)?!0:Ot.call(nc,s)?!1:tc.test(s)?sc[s]=!0:(nc[s]=!0,!1)}function Ao(s,r,o){if(md(r))if(o===null)s.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+o)}}function Xn(s,r,o){if(o===null)s.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+o)}}function $t(s,r,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(r,o,""+u)}}function un(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function pr(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ic(s,r,o){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return m.call(this)},set:function(_){o=""+_,y.call(this,_)}}),Object.defineProperty(s,r,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function ct(s){if(!s._valueTracker){var r=pr(s)?"checked":"value";s._valueTracker=ic(s,r,""+s[r])}}function Ra(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return s&&(u=pr(s)?s.checked?"true":"false":s.value),s=u,s!==o?(r.setValue(s),!0):!1}function hi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ja=/[\n"\\]/g;function Un(s){return s.replace(ja,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function No(s,r,o,u,m,y,_,A){s.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?s.type=_:s.removeAttribute("type"),r!=null?_==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+un(r)):s.value!==""+un(r)&&(s.value=""+un(r)):_!=="submit"&&_!=="reset"||s.removeAttribute("value"),r!=null?rc(s,_,un(r)):o!=null?rc(s,_,un(o)):u!=null&&s.removeAttribute("value"),m==null&&y!=null&&(s.defaultChecked=!!y),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.name=""+un(A):s.removeAttribute("name")}function pd(s,r,o,u,m,y,_,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),r!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||r!=null)){ct(s);return}o=o!=null?""+un(o):"",r=r!=null?""+un(r):o,A||r===s.value||(s.value=r),s.defaultValue=r}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=A?s.checked:!!u,s.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.name=_),ct(s)}function rc(s,r,o){r==="number"&&hi(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function gr(s,r,o,u){if(s=s.options,r){r={};for(var m=0;m<o.length;m++)r["$"+o[m]]=!0;for(o=0;o<s.length;o++)m=r.hasOwnProperty("$"+s[o].value),s[o].selected!==m&&(s[o].selected=m),m&&u&&(s[o].defaultSelected=!0)}else{for(o=""+un(o),r=null,m=0;m<s.length;m++){if(s[m].value===o){s[m].selected=!0,u&&(s[m].defaultSelected=!0);return}r!==null||s[m].disabled||(r=s[m])}r!==null&&(r.selected=!0)}}function gd(s,r,o){if(r!=null&&(r=""+un(r),r!==s.value&&(s.value=r),o==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=o!=null?""+un(o):""}function yr(s,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(i(92));if(Re(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=un(r),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u),ct(s)}function zn(s,r){if(r){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=r;return}}s.textContent=r}var yd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ac(s,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":u?s.setProperty(r,o):typeof o!="number"||o===0||yd.has(r)?r==="float"?s.cssFloat=o:s[r]=(""+o).trim():s[r]=o+"px"}function oc(s,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var m in r)u=r[m],r.hasOwnProperty(m)&&o[m]!==u&&ac(s,m,u)}else for(var y in r)r.hasOwnProperty(y)&&ac(s,y,r[y])}function Co(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ro(s){return vr.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ks(){}var lc=null;function ms(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var xr=null,fi=null;function Ia(s){var r=fs(s);if(r&&(s=r.stateNode)){var o=s[cn]||null;e:switch(s=r.stateNode,r.type){case"input":if(No(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Un(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==s&&u.form===s.form){var m=u[cn]||null;if(!m)throw Error(i(90));No(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===s.form&&Ra(u)}break e;case"textarea":gd(s,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&gr(s,!!o.multiple,r,!1)}}}var jo=!1;function br(s,r,o){if(jo)return s(r,o);jo=!0;try{var u=s(r);return u}finally{if(jo=!1,(xr!==null||fi!==null)&&(dh(),xr&&(r=xr,s=fi,fi=xr=null,Ia(r),s)))for(r=0;r<s.length;r++)Ia(s[r])}}function Os(s,r){var o=s.stateNode;if(o===null)return null;var u=o[cn]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Da=!1;if(ps)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){Da=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{Da=!1}var mi=null,cc=null,Va=null;function uc(){if(Va)return Va;var s,r=cc,o=r.length,u,m="value"in mi?mi.value:mi.textContent,y=m.length;for(s=0;s<o&&r[s]===m[s];s++);var _=o-s;for(u=1;u<=_&&r[o-u]===m[y-u];u++);return Va=m.slice(s,1<u?1-u:void 0)}function Ma(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Oi(){return!0}function Ps(){return!1}function pn(s){function r(o,u,m,y,_){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(o=s[A],this[A]=o?o(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Oi:Ps,this.isPropagationStopped=Ps,this}return x(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),r}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=pn(Pi),_r=x({},Pi,{view:0,detail:0}),dc=pn(_r),wr,Io,gi,Do=x({},_r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==gi&&(gi&&s.type==="mousemove"?(wr=s.screenX-gi.screenX,Io=s.screenY-gi.screenY):Io=wr=0,gi=s),wr)},movementY:function(s){return"movementY"in s?s.movementY:Io}}),hc=pn(Do),ka=x({},Do,{dataTransfer:0}),xd=pn(ka),bd=x({},_r,{relatedTarget:0}),Oa=pn(bd),fc=x({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),_d=pn(fc),Vo=x({},Pi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),wd=pn(Vo),Td=x({},Pi,{data:0}),yi=pn(Td),Ed={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ad={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nd(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=Ad[s])?!!r[s]:!1}function Tr(){return Nd}var Dn=x({},_r,{key:function(s){if(s.key){var r=Ed[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Ma(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Sd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tr,charCode:function(s){return s.type==="keypress"?Ma(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ma(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Cd=pn(Dn),Rd=x({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Li=pn(Rd),f=x({},_r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tr}),b=pn(f),T=x({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=pn(T),$=x({},Do,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=pn($),ve=x({},Pi,{newState:0,oldState:0}),Be=pn(ve),Lt=[9,13,27,32],at=ps&&"CompositionEvent"in window,Et=null;ps&&"documentMode"in document&&(Et=document.documentMode);var gs=ps&&"TextEvent"in window&&!Et,vi=ps&&(!at||Et&&8<Et&&11>=Et),Ls=" ",Us=!1;function Pa(s,r){switch(s){case"keyup":return Lt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ko=!1;function rR(s,r){switch(s){case"compositionend":return Mo(r);case"keypress":return r.which!==32?null:(Us=!0,Ls);case"textInput":return s=r.data,s===Ls&&Us?null:s;default:return null}}function aR(s,r){if(ko)return s==="compositionend"||!at&&Pa(s,r)?(s=uc(),Va=cc=mi=null,ko=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return vi&&r.locale!=="ko"?null:r.data;default:return null}}var oR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qv(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!oR[s.type]:r==="textarea"}function Hv(s,r,o,u){xr?fi?fi.push(u):fi=[u]:xr=u,r=vh(r,"onChange"),0<r.length&&(o=new pi("onChange","change",null,o,u),s.push({event:o,listeners:r}))}var mc=null,pc=null;function lR(s){A1(s,0)}function jd(s){var r=Wn(s);if(Ra(r))return s}function Gv(s,r){if(s==="change")return r}var Kv=!1;if(ps){var xm;if(ps){var bm="oninput"in document;if(!bm){var $v=document.createElement("div");$v.setAttribute("oninput","return;"),bm=typeof $v.oninput=="function"}xm=bm}else xm=!1;Kv=xm&&(!document.documentMode||9<document.documentMode)}function Yv(){mc&&(mc.detachEvent("onpropertychange",Qv),pc=mc=null)}function Qv(s){if(s.propertyName==="value"&&jd(pc)){var r=[];Hv(r,pc,s,ms(s)),br(lR,r)}}function cR(s,r,o){s==="focusin"?(Yv(),mc=r,pc=o,mc.attachEvent("onpropertychange",Qv)):s==="focusout"&&Yv()}function uR(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return jd(pc)}function dR(s,r){if(s==="click")return jd(r)}function hR(s,r){if(s==="input"||s==="change")return jd(r)}function fR(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Jn=typeof Object.is=="function"?Object.is:fR;function gc(s,r){if(Jn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var o=Object.keys(s),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!Ot.call(r,m)||!Jn(s[m],r[m]))return!1}return!0}function Wv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Xv(s,r){var o=Wv(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=r&&u>=r)return{node:o,offset:r-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Wv(o)}}function Jv(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Jv(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Zv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=hi(s.document);r instanceof s.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)s=r.contentWindow;else break;r=hi(s.document)}return r}function _m(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var mR=ps&&"documentMode"in document&&11>=document.documentMode,Oo=null,wm=null,yc=null,Tm=!1;function ex(s,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Tm||Oo==null||Oo!==hi(u)||(u=Oo,"selectionStart"in u&&_m(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),yc&&gc(yc,u)||(yc=u,u=vh(wm,"onSelect"),0<u.length&&(r=new pi("onSelect","select",null,r,o),s.push({event:r,listeners:u}),r.target=Oo)))}function La(s,r){var o={};return o[s.toLowerCase()]=r.toLowerCase(),o["Webkit"+s]="webkit"+r,o["Moz"+s]="moz"+r,o}var Po={animationend:La("Animation","AnimationEnd"),animationiteration:La("Animation","AnimationIteration"),animationstart:La("Animation","AnimationStart"),transitionrun:La("Transition","TransitionRun"),transitionstart:La("Transition","TransitionStart"),transitioncancel:La("Transition","TransitionCancel"),transitionend:La("Transition","TransitionEnd")},Em={},tx={};ps&&(tx=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function Ua(s){if(Em[s])return Em[s];if(!Po[s])return s;var r=Po[s],o;for(o in r)if(r.hasOwnProperty(o)&&o in tx)return Em[s]=r[o];return s}var nx=Ua("animationend"),sx=Ua("animationiteration"),ix=Ua("animationstart"),pR=Ua("transitionrun"),gR=Ua("transitionstart"),yR=Ua("transitioncancel"),rx=Ua("transitionend"),ax=new Map,Sm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sm.push("scrollEnd");function zs(s,r){ax.set(s,r),ui(r,[s])}var Id=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ys=[],Lo=0,Am=0;function Dd(){for(var s=Lo,r=Am=Lo=0;r<s;){var o=ys[r];ys[r++]=null;var u=ys[r];ys[r++]=null;var m=ys[r];ys[r++]=null;var y=ys[r];if(ys[r++]=null,u!==null&&m!==null){var _=u.pending;_===null?m.next=m:(m.next=_.next,_.next=m),u.pending=m}y!==0&&ox(o,m,y)}}function Vd(s,r,o,u){ys[Lo++]=s,ys[Lo++]=r,ys[Lo++]=o,ys[Lo++]=u,Am|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Nm(s,r,o,u){return Vd(s,r,o,u),Md(s)}function za(s,r){return Vd(s,null,null,r),Md(s)}function ox(s,r,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var m=!1,y=s.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(m=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,m&&r!==null&&(m=31-Ct(o),s=y.hiddenUpdates,u=s[m],u===null?s[m]=[r]:u.push(r),r.lane=o|536870912),y):null}function Md(s){if(50<Uc)throw Uc=0,Op=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Uo={};function vR(s,r,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(s,r,o,u){return new vR(s,r,o,u)}function Cm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ui(s,r){var o=s.alternate;return o===null?(o=Zn(s.tag,r,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=r,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,r=s.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function lx(s,r){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,r=o.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function kd(s,r,o,u,m,y){var _=0;if(u=s,typeof s=="function")Cm(s)&&(_=1);else if(typeof s=="string")_=Tj(s,o,_e.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=Zn(31,o,r,m),s.elementType=N,s.lanes=y,s;case M:return Ba(o.children,m,y,r);case V:_=8,m|=24;break;case q:return s=Zn(12,o,r,m|2),s.elementType=q,s.lanes=y,s;case H:return s=Zn(13,o,r,m),s.elementType=H,s.lanes=y,s;case Z:return s=Zn(19,o,r,m),s.elementType=Z,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case K:_=10;break e;case B:_=9;break e;case oe:_=11;break e;case R:_=14;break e;case S:_=16,u=null;break e}_=29,o=Error(i(130,s===null?"null":typeof s,"")),u=null}return r=Zn(_,o,r,m),r.elementType=s,r.type=u,r.lanes=y,r}function Ba(s,r,o,u){return s=Zn(7,s,u,r),s.lanes=o,s}function Rm(s,r,o){return s=Zn(6,s,null,r),s.lanes=o,s}function cx(s){var r=Zn(18,null,null,0);return r.stateNode=s,r}function jm(s,r,o){return r=Zn(4,s.children!==null?s.children:[],s.key,r),r.lanes=o,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var ux=new WeakMap;function vs(s,r){if(typeof s=="object"&&s!==null){var o=ux.get(s);return o!==void 0?o:(r={value:s,source:r,stack:wa(r)},ux.set(s,r),r)}return{value:s,source:r,stack:wa(r)}}var zo=[],Bo=0,Od=null,vc=0,xs=[],bs=0,Er=null,xi=1,bi="";function zi(s,r){zo[Bo++]=vc,zo[Bo++]=Od,Od=s,vc=r}function dx(s,r,o){xs[bs++]=xi,xs[bs++]=bi,xs[bs++]=Er,Er=s;var u=xi;s=bi;var m=32-Ct(u)-1;u&=~(1<<m),o+=1;var y=32-Ct(r)+m;if(30<y){var _=m-m%5;y=(u&(1<<_)-1).toString(32),u>>=_,m-=_,xi=1<<32-Ct(r)+m|o<<m|u,bi=y+s}else xi=1<<y|o<<m|u,bi=s}function Im(s){s.return!==null&&(zi(s,1),dx(s,1,0))}function Dm(s){for(;s===Od;)Od=zo[--Bo],zo[Bo]=null,vc=zo[--Bo],zo[Bo]=null;for(;s===Er;)Er=xs[--bs],xs[bs]=null,bi=xs[--bs],xs[bs]=null,xi=xs[--bs],xs[bs]=null}function hx(s,r){xs[bs++]=xi,xs[bs++]=bi,xs[bs++]=Er,xi=r.id,bi=r.overflow,Er=s}var gn=null,xt=null,Ze=!1,Sr=null,_s=!1,Vm=Error(i(519));function Ar(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xc(vs(r,s)),Vm}function fx(s){var r=s.stateNode,o=s.type,u=s.memoizedProps;switch(r[Gt]=s,r[cn]=u,o){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(o=0;o<Bc.length;o++)$e(Bc[o],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":$e("invalid",r),pd(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":$e("invalid",r);break;case"textarea":$e("invalid",r),yr(r,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||j1(r.textContent,o)?(u.popover!=null&&($e("beforetoggle",r),$e("toggle",r)),u.onScroll!=null&&$e("scroll",r),u.onScrollEnd!=null&&$e("scrollend",r),u.onClick!=null&&(r.onclick=ks),r=!0):r=!1,r||Ar(s,!0)}function mx(s){for(gn=s.return;gn;)switch(gn.tag){case 5:case 31:case 13:_s=!1;return;case 27:case 3:_s=!0;return;default:gn=gn.return}}function Fo(s){if(s!==gn)return!1;if(!Ze)return mx(s),Ze=!0,!1;var r=s.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||Xp(s.type,s.memoizedProps)),o=!o),o&&xt&&Ar(s),mx(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));xt=U1(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));xt=U1(s)}else r===27?(r=xt,zr(s.type)?(s=ng,ng=null,xt=s):xt=r):xt=gn?Ts(s.stateNode.nextSibling):null;return!0}function Fa(){xt=gn=null,Ze=!1}function Mm(){var s=Sr;return s!==null&&(Hn===null?Hn=s:Hn.push.apply(Hn,s),Sr=null),s}function xc(s){Sr===null?Sr=[s]:Sr.push(s)}var km=L(null),qa=null,Bi=null;function Nr(s,r,o){ye(km,r._currentValue),r._currentValue=o}function Fi(s){s._currentValue=km.current,re(km)}function Om(s,r,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),s===o)break;s=s.return}}function Pm(s,r,o,u){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var y=m.dependencies;if(y!==null){var _=m.child;y=y.firstContext;e:for(;y!==null;){var A=y;y=m;for(var P=0;P<r.length;P++)if(A.context===r[P]){y.lanes|=o,A=y.alternate,A!==null&&(A.lanes|=o),Om(y.return,o,s),u||(_=null);break e}y=A.next}}else if(m.tag===18){if(_=m.return,_===null)throw Error(i(341));_.lanes|=o,y=_.alternate,y!==null&&(y.lanes|=o),Om(_,o,s),_=null}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===s){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}}function qo(s,r,o,u){s=null;for(var m=r,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var _=m.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var A=m.type;Jn(m.pendingProps.value,_.value)||(s!==null?s.push(A):s=[A])}}else if(m===qe.current){if(_=m.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(Kc):s=[Kc])}m=m.return}s!==null&&Pm(r,s,o,u),r.flags|=262144}function Pd(s){for(s=s.firstContext;s!==null;){if(!Jn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ha(s){qa=s,Bi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function yn(s){return px(qa,s)}function Ld(s,r){return qa===null&&Ha(s),px(s,r)}function px(s,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Bi===null){if(s===null)throw Error(i(308));Bi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Bi=Bi.next=r;return o}var xR=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){r.aborted=!0,s.forEach(function(o){return o()})}},bR=t.unstable_scheduleCallback,_R=t.unstable_NormalPriority,Yt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lm(){return{controller:new xR,data:new Map,refCount:0}}function bc(s){s.refCount--,s.refCount===0&&bR(_R,function(){s.controller.abort()})}var _c=null,Um=0,Ho=0,Go=null;function wR(s,r){if(_c===null){var o=_c=[];Um=0,Ho=Fp(),Go={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Um++,r.then(gx,gx),r}function gx(){if(--Um===0&&_c!==null){Go!==null&&(Go.status="fulfilled");var s=_c;_c=null,Ho=0,Go=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function TR(s,r){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return s.then(function(){u.status="fulfilled",u.value=r;for(var m=0;m<o.length;m++)(0,o[m])(r)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var yx=ee.S;ee.S=function(s,r){e1=ge(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&wR(s,r),yx!==null&&yx(s,r)};var Ga=L(null);function zm(){var s=Ga.current;return s!==null?s:yt.pooledCache}function Ud(s,r){r===null?ye(Ga,Ga.current):ye(Ga,r.pool)}function vx(){var s=zm();return s===null?null:{parent:Yt._currentValue,pool:s}}var Ko=Error(i(460)),Bm=Error(i(474)),zd=Error(i(542)),Bd={then:function(){}};function xx(s){return s=s.status,s==="fulfilled"||s==="rejected"}function bx(s,r,o){switch(o=s[o],o===void 0?s.push(r):o!==r&&(r.then(ks,ks),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,wx(s),s;default:if(typeof r.status=="string")r.then(ks,ks);else{if(s=yt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(u){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=u}},function(u){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,wx(s),s}throw $a=r,Ko}}function Ka(s){try{var r=s._init;return r(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?($a=o,Ko):o}}var $a=null;function _x(){if($a===null)throw Error(i(459));var s=$a;return $a=null,s}function wx(s){if(s===Ko||s===zd)throw Error(i(483))}var $o=null,wc=0;function Fd(s){var r=wc;return wc+=1,$o===null&&($o=[]),bx($o,s,r)}function Tc(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function qd(s,r){throw r.$$typeof===w?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function Tx(s){function r(G,F){if(s){var Y=G.deletions;Y===null?(G.deletions=[F],G.flags|=16):Y.push(F)}}function o(G,F){if(!s)return null;for(;F!==null;)r(G,F),F=F.sibling;return null}function u(G){for(var F=new Map;G!==null;)G.key!==null?F.set(G.key,G):F.set(G.index,G),G=G.sibling;return F}function m(G,F){return G=Ui(G,F),G.index=0,G.sibling=null,G}function y(G,F,Y){return G.index=Y,s?(Y=G.alternate,Y!==null?(Y=Y.index,Y<F?(G.flags|=67108866,F):Y):(G.flags|=67108866,F)):(G.flags|=1048576,F)}function _(G){return s&&G.alternate===null&&(G.flags|=67108866),G}function A(G,F,Y,ce){return F===null||F.tag!==6?(F=Rm(Y,G.mode,ce),F.return=G,F):(F=m(F,Y),F.return=G,F)}function P(G,F,Y,ce){var Ie=Y.type;return Ie===M?ae(G,F,Y.props.children,ce,Y.key):F!==null&&(F.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===S&&Ka(Ie)===F.type)?(F=m(F,Y.props),Tc(F,Y),F.return=G,F):(F=kd(Y.type,Y.key,Y.props,null,G.mode,ce),Tc(F,Y),F.return=G,F)}function W(G,F,Y,ce){return F===null||F.tag!==4||F.stateNode.containerInfo!==Y.containerInfo||F.stateNode.implementation!==Y.implementation?(F=jm(Y,G.mode,ce),F.return=G,F):(F=m(F,Y.children||[]),F.return=G,F)}function ae(G,F,Y,ce,Ie){return F===null||F.tag!==7?(F=Ba(Y,G.mode,ce,Ie),F.return=G,F):(F=m(F,Y),F.return=G,F)}function de(G,F,Y){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Rm(""+F,G.mode,Y),F.return=G,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case E:return Y=kd(F.type,F.key,F.props,null,G.mode,Y),Tc(Y,F),Y.return=G,Y;case j:return F=jm(F,G.mode,Y),F.return=G,F;case S:return F=Ka(F),de(G,F,Y)}if(Re(F)||O(F))return F=Ba(F,G.mode,Y,null),F.return=G,F;if(typeof F.then=="function")return de(G,Fd(F),Y);if(F.$$typeof===K)return de(G,Ld(G,F),Y);qd(G,F)}return null}function J(G,F,Y,ce){var Ie=F!==null?F.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ie!==null?null:A(G,F,""+Y,ce);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:return Y.key===Ie?P(G,F,Y,ce):null;case j:return Y.key===Ie?W(G,F,Y,ce):null;case S:return Y=Ka(Y),J(G,F,Y,ce)}if(Re(Y)||O(Y))return Ie!==null?null:ae(G,F,Y,ce,null);if(typeof Y.then=="function")return J(G,F,Fd(Y),ce);if(Y.$$typeof===K)return J(G,F,Ld(G,Y),ce);qd(G,Y)}return null}function se(G,F,Y,ce,Ie){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return G=G.get(Y)||null,A(F,G,""+ce,Ie);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case E:return G=G.get(ce.key===null?Y:ce.key)||null,P(F,G,ce,Ie);case j:return G=G.get(ce.key===null?Y:ce.key)||null,W(F,G,ce,Ie);case S:return ce=Ka(ce),se(G,F,Y,ce,Ie)}if(Re(ce)||O(ce))return G=G.get(Y)||null,ae(F,G,ce,Ie,null);if(typeof ce.then=="function")return se(G,F,Y,Fd(ce),Ie);if(ce.$$typeof===K)return se(G,F,Y,Ld(F,ce),Ie);qd(F,ce)}return null}function Se(G,F,Y,ce){for(var Ie=null,it=null,Ae=F,He=F=0,Qe=null;Ae!==null&&He<Y.length;He++){Ae.index>He?(Qe=Ae,Ae=null):Qe=Ae.sibling;var rt=J(G,Ae,Y[He],ce);if(rt===null){Ae===null&&(Ae=Qe);break}s&&Ae&&rt.alternate===null&&r(G,Ae),F=y(rt,F,He),it===null?Ie=rt:it.sibling=rt,it=rt,Ae=Qe}if(He===Y.length)return o(G,Ae),Ze&&zi(G,He),Ie;if(Ae===null){for(;He<Y.length;He++)Ae=de(G,Y[He],ce),Ae!==null&&(F=y(Ae,F,He),it===null?Ie=Ae:it.sibling=Ae,it=Ae);return Ze&&zi(G,He),Ie}for(Ae=u(Ae);He<Y.length;He++)Qe=se(Ae,G,He,Y[He],ce),Qe!==null&&(s&&Qe.alternate!==null&&Ae.delete(Qe.key===null?He:Qe.key),F=y(Qe,F,He),it===null?Ie=Qe:it.sibling=Qe,it=Qe);return s&&Ae.forEach(function(Gr){return r(G,Gr)}),Ze&&zi(G,He),Ie}function Me(G,F,Y,ce){if(Y==null)throw Error(i(151));for(var Ie=null,it=null,Ae=F,He=F=0,Qe=null,rt=Y.next();Ae!==null&&!rt.done;He++,rt=Y.next()){Ae.index>He?(Qe=Ae,Ae=null):Qe=Ae.sibling;var Gr=J(G,Ae,rt.value,ce);if(Gr===null){Ae===null&&(Ae=Qe);break}s&&Ae&&Gr.alternate===null&&r(G,Ae),F=y(Gr,F,He),it===null?Ie=Gr:it.sibling=Gr,it=Gr,Ae=Qe}if(rt.done)return o(G,Ae),Ze&&zi(G,He),Ie;if(Ae===null){for(;!rt.done;He++,rt=Y.next())rt=de(G,rt.value,ce),rt!==null&&(F=y(rt,F,He),it===null?Ie=rt:it.sibling=rt,it=rt);return Ze&&zi(G,He),Ie}for(Ae=u(Ae);!rt.done;He++,rt=Y.next())rt=se(Ae,G,He,rt.value,ce),rt!==null&&(s&&rt.alternate!==null&&Ae.delete(rt.key===null?He:rt.key),F=y(rt,F,He),it===null?Ie=rt:it.sibling=rt,it=rt);return s&&Ae.forEach(function(Mj){return r(G,Mj)}),Ze&&zi(G,He),Ie}function pt(G,F,Y,ce){if(typeof Y=="object"&&Y!==null&&Y.type===M&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:e:{for(var Ie=Y.key;F!==null;){if(F.key===Ie){if(Ie=Y.type,Ie===M){if(F.tag===7){o(G,F.sibling),ce=m(F,Y.props.children),ce.return=G,G=ce;break e}}else if(F.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===S&&Ka(Ie)===F.type){o(G,F.sibling),ce=m(F,Y.props),Tc(ce,Y),ce.return=G,G=ce;break e}o(G,F);break}else r(G,F);F=F.sibling}Y.type===M?(ce=Ba(Y.props.children,G.mode,ce,Y.key),ce.return=G,G=ce):(ce=kd(Y.type,Y.key,Y.props,null,G.mode,ce),Tc(ce,Y),ce.return=G,G=ce)}return _(G);case j:e:{for(Ie=Y.key;F!==null;){if(F.key===Ie)if(F.tag===4&&F.stateNode.containerInfo===Y.containerInfo&&F.stateNode.implementation===Y.implementation){o(G,F.sibling),ce=m(F,Y.children||[]),ce.return=G,G=ce;break e}else{o(G,F);break}else r(G,F);F=F.sibling}ce=jm(Y,G.mode,ce),ce.return=G,G=ce}return _(G);case S:return Y=Ka(Y),pt(G,F,Y,ce)}if(Re(Y))return Se(G,F,Y,ce);if(O(Y)){if(Ie=O(Y),typeof Ie!="function")throw Error(i(150));return Y=Ie.call(Y),Me(G,F,Y,ce)}if(typeof Y.then=="function")return pt(G,F,Fd(Y),ce);if(Y.$$typeof===K)return pt(G,F,Ld(G,Y),ce);qd(G,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,F!==null&&F.tag===6?(o(G,F.sibling),ce=m(F,Y),ce.return=G,G=ce):(o(G,F),ce=Rm(Y,G.mode,ce),ce.return=G,G=ce),_(G)):o(G,F)}return function(G,F,Y,ce){try{wc=0;var Ie=pt(G,F,Y,ce);return $o=null,Ie}catch(Ae){if(Ae===Ko||Ae===zd)throw Ae;var it=Zn(29,Ae,null,G.mode);return it.lanes=ce,it.return=G,it}finally{}}}var Ya=Tx(!0),Ex=Tx(!1),Cr=!1;function Fm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qm(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Rr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function jr(s,r,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(ot&2)!==0){var m=u.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),u.pending=r,r=Md(s),ox(s,null,o),r}return Vd(s,u,r,o),Md(s)}function Ec(s,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=s.pendingLanes,o|=u,r.lanes=o,Xl(s,o)}}function Hm(s,r){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?m=y=_:y=y.next=_,o=o.next}while(o!==null);y===null?m=y=r:y=y.next=r}else m=y=r;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=r:s.next=r,o.lastBaseUpdate=r}var Gm=!1;function Sc(){if(Gm){var s=Go;if(s!==null)throw s}}function Ac(s,r,o,u){Gm=!1;var m=s.updateQueue;Cr=!1;var y=m.firstBaseUpdate,_=m.lastBaseUpdate,A=m.shared.pending;if(A!==null){m.shared.pending=null;var P=A,W=P.next;P.next=null,_===null?y=W:_.next=W,_=P;var ae=s.alternate;ae!==null&&(ae=ae.updateQueue,A=ae.lastBaseUpdate,A!==_&&(A===null?ae.firstBaseUpdate=W:A.next=W,ae.lastBaseUpdate=P))}if(y!==null){var de=m.baseState;_=0,ae=W=P=null,A=y;do{var J=A.lane&-536870913,se=J!==A.lane;if(se?(Ye&J)===J:(u&J)===J){J!==0&&J===Ho&&(Gm=!0),ae!==null&&(ae=ae.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Se=s,Me=A;J=r;var pt=o;switch(Me.tag){case 1:if(Se=Me.payload,typeof Se=="function"){de=Se.call(pt,de,J);break e}de=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Me.payload,J=typeof Se=="function"?Se.call(pt,de,J):Se,J==null)break e;de=x({},de,J);break e;case 2:Cr=!0}}J=A.callback,J!==null&&(s.flags|=64,se&&(s.flags|=8192),se=m.callbacks,se===null?m.callbacks=[J]:se.push(J))}else se={lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ae===null?(W=ae=se,P=de):ae=ae.next=se,_|=J;if(A=A.next,A===null){if(A=m.shared.pending,A===null)break;se=A,A=se.next,se.next=null,m.lastBaseUpdate=se,m.shared.pending=null}}while(!0);ae===null&&(P=de),m.baseState=P,m.firstBaseUpdate=W,m.lastBaseUpdate=ae,y===null&&(m.shared.lanes=0),kr|=_,s.lanes=_,s.memoizedState=de}}function Sx(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function Ax(s,r){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)Sx(o[s],r)}var Yo=L(null),Hd=L(0);function Nx(s,r){s=Xi,ye(Hd,s),ye(Yo,r),Xi=s|r.baseLanes}function Km(){ye(Hd,Xi),ye(Yo,Yo.current)}function $m(){Xi=Hd.current,re(Yo),re(Hd)}var es=L(null),ws=null;function Ir(s){var r=s.alternate;ye(Ut,Ut.current&1),ye(es,s),ws===null&&(r===null||Yo.current!==null||r.memoizedState!==null)&&(ws=s)}function Ym(s){ye(Ut,Ut.current),ye(es,s),ws===null&&(ws=s)}function Cx(s){s.tag===22?(ye(Ut,Ut.current),ye(es,s),ws===null&&(ws=s)):Dr()}function Dr(){ye(Ut,Ut.current),ye(es,es.current)}function ts(s){re(es),ws===s&&(ws=null),re(Ut)}var Ut=L(0);function Gd(s){for(var r=s;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||eg(o)||tg(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var qi=0,Fe=null,ft=null,Qt=null,Kd=!1,Qo=!1,Qa=!1,$d=0,Nc=0,Wo=null,ER=0;function Dt(){throw Error(i(321))}function Qm(s,r){if(r===null)return!1;for(var o=0;o<r.length&&o<s.length;o++)if(!Jn(s[o],r[o]))return!1;return!0}function Wm(s,r,o,u,m,y){return qi=y,Fe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=s===null||s.memoizedState===null?db:dp,Qa=!1,y=o(u,m),Qa=!1,Qo&&(y=jx(r,o,u,m)),Rx(s),y}function Rx(s){ee.H=jc;var r=ft!==null&&ft.next!==null;if(qi=0,Qt=ft=Fe=null,Kd=!1,Nc=0,Wo=null,r)throw Error(i(300));s===null||Wt||(s=s.dependencies,s!==null&&Pd(s)&&(Wt=!0))}function jx(s,r,o,u){Fe=s;var m=0;do{if(Qo&&(Wo=null),Nc=0,Qo=!1,25<=m)throw Error(i(301));if(m+=1,Qt=ft=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}ee.H=hb,y=r(o,u)}while(Qo);return y}function SR(){var s=ee.H,r=s.useState()[0];return r=typeof r.then=="function"?Cc(r):r,s=s.useState()[0],(ft!==null?ft.memoizedState:null)!==s&&(Fe.flags|=1024),r}function Xm(){var s=$d!==0;return $d=0,s}function Jm(s,r,o){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~o}function Zm(s){if(Kd){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Kd=!1}qi=0,Qt=ft=Fe=null,Qo=!1,Nc=$d=0,Wo=null}function Vn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Fe.memoizedState=Qt=s:Qt=Qt.next=s,Qt}function zt(){if(ft===null){var s=Fe.alternate;s=s!==null?s.memoizedState:null}else s=ft.next;var r=Qt===null?Fe.memoizedState:Qt.next;if(r!==null)Qt=r,ft=s;else{if(s===null)throw Fe.alternate===null?Error(i(467)):Error(i(310));ft=s,s={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Qt===null?Fe.memoizedState=Qt=s:Qt=Qt.next=s}return Qt}function Yd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cc(s){var r=Nc;return Nc+=1,Wo===null&&(Wo=[]),s=bx(Wo,s,r),r=Fe,(Qt===null?r.memoizedState:Qt.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?db:dp),s}function Qd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Cc(s);if(s.$$typeof===K)return yn(s)}throw Error(i(438,String(s)))}function ep(s){var r=null,o=Fe.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=Fe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Yd(),Fe.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(s),u=0;u<s;u++)o[u]=k;return r.index++,o}function Hi(s,r){return typeof r=="function"?r(s):r}function Wd(s){var r=zt();return tp(r,ft,s)}function tp(s,r,o){var u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var m=s.baseQueue,y=u.pending;if(y!==null){if(m!==null){var _=m.next;m.next=y.next,y.next=_}r.baseQueue=m=y,u.pending=null}if(y=s.baseState,m===null)s.memoizedState=y;else{r=m.next;var A=_=null,P=null,W=r,ae=!1;do{var de=W.lane&-536870913;if(de!==W.lane?(Ye&de)===de:(qi&de)===de){var J=W.revertLane;if(J===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),de===Ho&&(ae=!0);else if((qi&J)===J){W=W.next,J===Ho&&(ae=!0);continue}else de={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},P===null?(A=P=de,_=y):P=P.next=de,Fe.lanes|=J,kr|=J;de=W.action,Qa&&o(y,de),y=W.hasEagerState?W.eagerState:o(y,de)}else J={lane:de,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},P===null?(A=P=J,_=y):P=P.next=J,Fe.lanes|=de,kr|=de;W=W.next}while(W!==null&&W!==r);if(P===null?_=y:P.next=A,!Jn(y,s.memoizedState)&&(Wt=!0,ae&&(o=Go,o!==null)))throw o;s.memoizedState=y,s.baseState=_,s.baseQueue=P,u.lastRenderedState=y}return m===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function np(s){var r=zt(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=s;var u=o.dispatch,m=o.pending,y=r.memoizedState;if(m!==null){o.pending=null;var _=m=m.next;do y=s(y,_.action),_=_.next;while(_!==m);Jn(y,r.memoizedState)||(Wt=!0),r.memoizedState=y,r.baseQueue===null&&(r.baseState=y),o.lastRenderedState=y}return[y,u]}function Ix(s,r,o){var u=Fe,m=zt(),y=Ze;if(y){if(o===void 0)throw Error(i(407));o=o()}else o=r();var _=!Jn((ft||m).memoizedState,o);if(_&&(m.memoizedState=o,Wt=!0),m=m.queue,rp(Mx.bind(null,u,m,s),[s]),m.getSnapshot!==r||_||Qt!==null&&Qt.memoizedState.tag&1){if(u.flags|=2048,Xo(9,{destroy:void 0},Vx.bind(null,u,m,o,r),null),yt===null)throw Error(i(349));y||(qi&127)!==0||Dx(u,r,o)}return o}function Dx(s,r,o){s.flags|=16384,s={getSnapshot:r,value:o},r=Fe.updateQueue,r===null?(r=Yd(),Fe.updateQueue=r,r.stores=[s]):(o=r.stores,o===null?r.stores=[s]:o.push(s))}function Vx(s,r,o,u){r.value=o,r.getSnapshot=u,kx(r)&&Ox(s)}function Mx(s,r,o){return o(function(){kx(r)&&Ox(s)})}function kx(s){var r=s.getSnapshot;s=s.value;try{var o=r();return!Jn(s,o)}catch{return!0}}function Ox(s){var r=za(s,2);r!==null&&Gn(r,s,2)}function sp(s){var r=Vn();if(typeof s=="function"){var o=s;if(s=o(),Qa){An(!0);try{o()}finally{An(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:s},r}function Px(s,r,o,u){return s.baseState=o,tp(s,ft,typeof u=="function"?u:Hi)}function AR(s,r,o,u,m){if(Zd(s))throw Error(i(485));if(s=r.action,s!==null){var y={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};ee.T!==null?o(!0):y.isTransition=!1,u(y),o=r.pending,o===null?(y.next=r.pending=y,Lx(r,y)):(y.next=o.next,r.pending=o.next=y)}}function Lx(s,r){var o=r.action,u=r.payload,m=s.state;if(r.isTransition){var y=ee.T,_={};ee.T=_;try{var A=o(m,u),P=ee.S;P!==null&&P(_,A),Ux(s,r,A)}catch(W){ip(s,r,W)}finally{y!==null&&_.types!==null&&(y.types=_.types),ee.T=y}}else try{y=o(m,u),Ux(s,r,y)}catch(W){ip(s,r,W)}}function Ux(s,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){zx(s,r,u)},function(u){return ip(s,r,u)}):zx(s,r,o)}function zx(s,r,o){r.status="fulfilled",r.value=o,Bx(r),s.state=o,r=s.pending,r!==null&&(o=r.next,o===r?s.pending=null:(o=o.next,r.next=o,Lx(s,o)))}function ip(s,r,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,Bx(r),r=r.next;while(r!==u)}s.action=null}function Bx(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Fx(s,r){return r}function qx(s,r){if(Ze){var o=yt.formState;if(o!==null){e:{var u=Fe;if(Ze){if(xt){t:{for(var m=xt,y=_s;m.nodeType!==8;){if(!y){m=null;break t}if(m=Ts(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){xt=Ts(m.nextSibling),u=m.data==="F!";break e}}Ar(u)}u=!1}u&&(r=o[0])}}return o=Vn(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fx,lastRenderedState:r},o.queue=u,o=lb.bind(null,Fe,u),u.dispatch=o,u=sp(!1),y=up.bind(null,Fe,!1,u.queue),u=Vn(),m={state:r,dispatch:null,action:s,pending:null},u.queue=m,o=AR.bind(null,Fe,m,y,o),m.dispatch=o,u.memoizedState=s,[r,o,!1]}function Hx(s){var r=zt();return Gx(r,ft,s)}function Gx(s,r,o){if(r=tp(s,r,Fx)[0],s=Wd(Hi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Cc(r)}catch(_){throw _===Ko?zd:_}else u=r;r=zt();var m=r.queue,y=m.dispatch;return o!==r.memoizedState&&(Fe.flags|=2048,Xo(9,{destroy:void 0},NR.bind(null,m,o),null)),[u,y,s]}function NR(s,r){s.action=r}function Kx(s){var r=zt(),o=ft;if(o!==null)return Gx(r,o,s);zt(),r=r.memoizedState,o=zt();var u=o.queue.dispatch;return o.memoizedState=s,[r,u,!1]}function Xo(s,r,o,u){return s={tag:s,create:o,deps:u,inst:r,next:null},r=Fe.updateQueue,r===null&&(r=Yd(),Fe.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,r.lastEffect=s),s}function $x(){return zt().memoizedState}function Xd(s,r,o,u){var m=Vn();Fe.flags|=s,m.memoizedState=Xo(1|r,{destroy:void 0},o,u===void 0?null:u)}function Jd(s,r,o,u){var m=zt();u=u===void 0?null:u;var y=m.memoizedState.inst;ft!==null&&u!==null&&Qm(u,ft.memoizedState.deps)?m.memoizedState=Xo(r,y,o,u):(Fe.flags|=s,m.memoizedState=Xo(1|r,y,o,u))}function Yx(s,r){Xd(8390656,8,s,r)}function rp(s,r){Jd(2048,8,s,r)}function CR(s){Fe.flags|=4;var r=Fe.updateQueue;if(r===null)r=Yd(),Fe.updateQueue=r,r.events=[s];else{var o=r.events;o===null?r.events=[s]:o.push(s)}}function Qx(s){var r=zt().memoizedState;return CR({ref:r,nextImpl:s}),function(){if((ot&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Wx(s,r){return Jd(4,2,s,r)}function Xx(s,r){return Jd(4,4,s,r)}function Jx(s,r){if(typeof r=="function"){s=s();var o=r(s);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Zx(s,r,o){o=o!=null?o.concat([s]):null,Jd(4,4,Jx.bind(null,r,s),o)}function ap(){}function eb(s,r){var o=zt();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&Qm(r,u[1])?u[0]:(o.memoizedState=[s,r],s)}function tb(s,r){var o=zt();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&Qm(r,u[1]))return u[0];if(u=s(),Qa){An(!0);try{s()}finally{An(!1)}}return o.memoizedState=[u,r],u}function op(s,r,o){return o===void 0||(qi&1073741824)!==0&&(Ye&261930)===0?s.memoizedState=r:(s.memoizedState=o,s=n1(),Fe.lanes|=s,kr|=s,o)}function nb(s,r,o,u){return Jn(o,r)?o:Yo.current!==null?(s=op(s,o,u),Jn(s,r)||(Wt=!0),s):(qi&42)===0||(qi&1073741824)!==0&&(Ye&261930)===0?(Wt=!0,s.memoizedState=o):(s=n1(),Fe.lanes|=s,kr|=s,r)}function sb(s,r,o,u,m){var y=X.p;X.p=y!==0&&8>y?y:8;var _=ee.T,A={};ee.T=A,up(s,!1,r,o);try{var P=m(),W=ee.S;if(W!==null&&W(A,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ae=TR(P,u);Rc(s,r,ae,is(s))}else Rc(s,r,u,is(s))}catch(de){Rc(s,r,{then:function(){},status:"rejected",reason:de},is())}finally{X.p=y,_!==null&&A.types!==null&&(_.types=A.types),ee.T=_}}function RR(){}function lp(s,r,o,u){if(s.tag!==5)throw Error(i(476));var m=ib(s).queue;sb(s,m,r,ue,o===null?RR:function(){return rb(s),o(u)})}function ib(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:ue},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:o},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function rb(s){var r=ib(s);r.next===null&&(r=s.alternate.memoizedState),Rc(s,r.next.queue,{},is())}function cp(){return yn(Kc)}function ab(){return zt().memoizedState}function ob(){return zt().memoizedState}function jR(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var o=is();s=Rr(o);var u=jr(r,s,o);u!==null&&(Gn(u,r,o),Ec(u,r,o)),r={cache:Lm()},s.payload=r;return}r=r.return}}function IR(s,r,o){var u=is();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Zd(s)?cb(r,o):(o=Nm(s,r,o,u),o!==null&&(Gn(o,s,u),ub(o,r,u)))}function lb(s,r,o){var u=is();Rc(s,r,o,u)}function Rc(s,r,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Zd(s))cb(r,m);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=r.lastRenderedReducer,y!==null))try{var _=r.lastRenderedState,A=y(_,o);if(m.hasEagerState=!0,m.eagerState=A,Jn(A,_))return Vd(s,r,m,0),yt===null&&Dd(),!1}catch{}finally{}if(o=Nm(s,r,m,u),o!==null)return Gn(o,s,u),ub(o,r,u),!0}return!1}function up(s,r,o,u){if(u={lane:2,revertLane:Fp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Zd(s)){if(r)throw Error(i(479))}else r=Nm(s,o,u,2),r!==null&&Gn(r,s,2)}function Zd(s){var r=s.alternate;return s===Fe||r!==null&&r===Fe}function cb(s,r){Qo=Kd=!0;var o=s.pending;o===null?r.next=r:(r.next=o.next,o.next=r),s.pending=r}function ub(s,r,o){if((o&4194048)!==0){var u=r.lanes;u&=s.pendingLanes,o|=u,r.lanes=o,Xl(s,o)}}var jc={readContext:yn,use:Qd,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt};jc.useEffectEvent=Dt;var db={readContext:yn,use:Qd,useCallback:function(s,r){return Vn().memoizedState=[s,r===void 0?null:r],s},useContext:yn,useEffect:Yx,useImperativeHandle:function(s,r,o){o=o!=null?o.concat([s]):null,Xd(4194308,4,Jx.bind(null,r,s),o)},useLayoutEffect:function(s,r){return Xd(4194308,4,s,r)},useInsertionEffect:function(s,r){Xd(4,2,s,r)},useMemo:function(s,r){var o=Vn();r=r===void 0?null:r;var u=s();if(Qa){An(!0);try{s()}finally{An(!1)}}return o.memoizedState=[u,r],u},useReducer:function(s,r,o){var u=Vn();if(o!==void 0){var m=o(r);if(Qa){An(!0);try{o(r)}finally{An(!1)}}}else m=r;return u.memoizedState=u.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},u.queue=s,s=s.dispatch=IR.bind(null,Fe,s),[u.memoizedState,s]},useRef:function(s){var r=Vn();return s={current:s},r.memoizedState=s},useState:function(s){s=sp(s);var r=s.queue,o=lb.bind(null,Fe,r);return r.dispatch=o,[s.memoizedState,o]},useDebugValue:ap,useDeferredValue:function(s,r){var o=Vn();return op(o,s,r)},useTransition:function(){var s=sp(!1);return s=sb.bind(null,Fe,s.queue,!0,!1),Vn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,o){var u=Fe,m=Vn();if(Ze){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),yt===null)throw Error(i(349));(Ye&127)!==0||Dx(u,r,o)}m.memoizedState=o;var y={value:o,getSnapshot:r};return m.queue=y,Yx(Mx.bind(null,u,y,s),[s]),u.flags|=2048,Xo(9,{destroy:void 0},Vx.bind(null,u,y,o,r),null),o},useId:function(){var s=Vn(),r=yt.identifierPrefix;if(Ze){var o=bi,u=xi;o=(u&~(1<<32-Ct(u)-1)).toString(32)+o,r="_"+r+"R_"+o,o=$d++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=ER++,r="_"+r+"r_"+o.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:cp,useFormState:qx,useActionState:qx,useOptimistic:function(s){var r=Vn();r.memoizedState=r.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=up.bind(null,Fe,!0,o),o.dispatch=r,[s,r]},useMemoCache:ep,useCacheRefresh:function(){return Vn().memoizedState=jR.bind(null,Fe)},useEffectEvent:function(s){var r=Vn(),o={impl:s};return r.memoizedState=o,function(){if((ot&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},dp={readContext:yn,use:Qd,useCallback:eb,useContext:yn,useEffect:rp,useImperativeHandle:Zx,useInsertionEffect:Wx,useLayoutEffect:Xx,useMemo:tb,useReducer:Wd,useRef:$x,useState:function(){return Wd(Hi)},useDebugValue:ap,useDeferredValue:function(s,r){var o=zt();return nb(o,ft.memoizedState,s,r)},useTransition:function(){var s=Wd(Hi)[0],r=zt().memoizedState;return[typeof s=="boolean"?s:Cc(s),r]},useSyncExternalStore:Ix,useId:ab,useHostTransitionStatus:cp,useFormState:Hx,useActionState:Hx,useOptimistic:function(s,r){var o=zt();return Px(o,ft,s,r)},useMemoCache:ep,useCacheRefresh:ob};dp.useEffectEvent=Qx;var hb={readContext:yn,use:Qd,useCallback:eb,useContext:yn,useEffect:rp,useImperativeHandle:Zx,useInsertionEffect:Wx,useLayoutEffect:Xx,useMemo:tb,useReducer:np,useRef:$x,useState:function(){return np(Hi)},useDebugValue:ap,useDeferredValue:function(s,r){var o=zt();return ft===null?op(o,s,r):nb(o,ft.memoizedState,s,r)},useTransition:function(){var s=np(Hi)[0],r=zt().memoizedState;return[typeof s=="boolean"?s:Cc(s),r]},useSyncExternalStore:Ix,useId:ab,useHostTransitionStatus:cp,useFormState:Kx,useActionState:Kx,useOptimistic:function(s,r){var o=zt();return ft!==null?Px(o,ft,s,r):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:ep,useCacheRefresh:ob};hb.useEffectEvent=Qx;function hp(s,r,o,u){r=s.memoizedState,o=o(u,r),o=o==null?r:x({},r,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var fp={enqueueSetState:function(s,r,o){s=s._reactInternals;var u=is(),m=Rr(u);m.payload=r,o!=null&&(m.callback=o),r=jr(s,m,u),r!==null&&(Gn(r,s,u),Ec(r,s,u))},enqueueReplaceState:function(s,r,o){s=s._reactInternals;var u=is(),m=Rr(u);m.tag=1,m.payload=r,o!=null&&(m.callback=o),r=jr(s,m,u),r!==null&&(Gn(r,s,u),Ec(r,s,u))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var o=is(),u=Rr(o);u.tag=2,r!=null&&(u.callback=r),r=jr(s,u,o),r!==null&&(Gn(r,s,o),Ec(r,s,o))}};function fb(s,r,o,u,m,y,_){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,y,_):r.prototype&&r.prototype.isPureReactComponent?!gc(o,u)||!gc(m,y):!0}function mb(s,r,o,u){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==s&&fp.enqueueReplaceState(r,r.state,null)}function Wa(s,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(s=s.defaultProps){o===r&&(o=x({},o));for(var m in s)o[m]===void 0&&(o[m]=s[m])}return o}function pb(s){Id(s)}function gb(s){console.error(s)}function yb(s){Id(s)}function eh(s,r){try{var o=s.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function vb(s,r,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function mp(s,r,o){return o=Rr(o),o.tag=3,o.payload={element:null},o.callback=function(){eh(s,r)},o}function xb(s){return s=Rr(s),s.tag=3,s}function bb(s,r,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;s.payload=function(){return m(y)},s.callback=function(){vb(r,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(s.callback=function(){vb(r,o,u),typeof m!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function DR(s,r,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&qo(r,o,m,!0),o=es.current,o!==null){switch(o.tag){case 31:case 13:return ws===null?hh():o.alternate===null&&Vt===0&&(Vt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===Bd?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),Up(s,u,m)),!1;case 22:return o.flags|=65536,u===Bd?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),Up(s,u,m)),!1}throw Error(i(435,o.tag))}return Up(s,u,m),hh(),!1}if(Ze)return r=es.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,u!==Vm&&(s=Error(i(422),{cause:u}),xc(vs(s,o)))):(u!==Vm&&(r=Error(i(423),{cause:u}),xc(vs(r,o))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,u=vs(u,o),m=mp(s.stateNode,u,m),Hm(s,m),Vt!==4&&(Vt=2)),!1;var y=Error(i(520),{cause:u});if(y=vs(y,o),Lc===null?Lc=[y]:Lc.push(y),Vt!==4&&(Vt=2),r===null)return!0;u=vs(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,s=m&-m,o.lanes|=s,s=mp(o.stateNode,u,s),Hm(o,s),!1;case 1:if(r=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Or===null||!Or.has(y))))return o.flags|=65536,m&=-m,o.lanes|=m,m=xb(m),bb(m,s,o,u),Hm(o,m),!1}o=o.return}while(o!==null);return!1}var pp=Error(i(461)),Wt=!1;function vn(s,r,o,u){r.child=s===null?Ex(r,null,o,u):Ya(r,s.child,o,u)}function _b(s,r,o,u,m){o=o.render;var y=r.ref;if("ref"in u){var _={};for(var A in u)A!=="ref"&&(_[A]=u[A])}else _=u;return Ha(r),u=Wm(s,r,o,_,y,m),A=Xm(),s!==null&&!Wt?(Jm(s,r,m),Gi(s,r,m)):(Ze&&A&&Im(r),r.flags|=1,vn(s,r,u,m),r.child)}function wb(s,r,o,u,m){if(s===null){var y=o.type;return typeof y=="function"&&!Cm(y)&&y.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=y,Tb(s,r,y,u,m)):(s=kd(o.type,null,u,r,r.mode,m),s.ref=r.ref,s.return=r,r.child=s)}if(y=s.child,!Tp(s,m)){var _=y.memoizedProps;if(o=o.compare,o=o!==null?o:gc,o(_,u)&&s.ref===r.ref)return Gi(s,r,m)}return r.flags|=1,s=Ui(y,u),s.ref=r.ref,s.return=r,r.child=s}function Tb(s,r,o,u,m){if(s!==null){var y=s.memoizedProps;if(gc(y,u)&&s.ref===r.ref)if(Wt=!1,r.pendingProps=u=y,Tp(s,m))(s.flags&131072)!==0&&(Wt=!0);else return r.lanes=s.lanes,Gi(s,r,m)}return gp(s,r,o,u,m)}function Eb(s,r,o,u){var m=u.children,y=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,s!==null){for(u=r.child=s.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,r.child=null;return Sb(s,r,y,o,u)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ud(r,y!==null?y.cachePool:null),y!==null?Nx(r,y):Km(),Cx(r);else return u=r.lanes=536870912,Sb(s,r,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(Ud(r,y.cachePool),Nx(r,y),Dr(),r.memoizedState=null):(s!==null&&Ud(r,null),Km(),Dr());return vn(s,r,m,o),r.child}function Ic(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Sb(s,r,o,u,m){var y=zm();return y=y===null?null:{parent:Yt._currentValue,pool:y},r.memoizedState={baseLanes:o,cachePool:y},s!==null&&Ud(r,null),Km(),Cx(r),s!==null&&qo(s,r,u,!0),r.childLanes=m,null}function th(s,r){return r=sh({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function Ab(s,r,o){return Ya(r,s.child,null,o),s=th(r,r.pendingProps),s.flags|=2,ts(r),r.memoizedState=null,s}function VR(s,r,o){var u=r.pendingProps,m=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Ze){if(u.mode==="hidden")return s=th(r,u),r.lanes=536870912,Ic(null,s);if(Ym(r),(s=xt)?(s=L1(s,_s),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Er!==null?{id:xi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=cx(s),o.return=r,r.child=o,gn=r,xt=null)):s=null,s===null)throw Ar(r);return r.lanes=536870912,null}return th(r,u)}var y=s.memoizedState;if(y!==null){var _=y.dehydrated;if(Ym(r),m)if(r.flags&256)r.flags&=-257,r=Ab(s,r,o);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Wt||qo(s,r,o,!1),m=(o&s.childLanes)!==0,Wt||m){if(u=yt,u!==null&&(_=Jl(u,o),_!==0&&_!==y.retryLane))throw y.retryLane=_,za(s,_),Gn(u,s,_),pp;hh(),r=Ab(s,r,o)}else s=y.treeContext,xt=Ts(_.nextSibling),gn=r,Ze=!0,Sr=null,_s=!1,s!==null&&hx(r,s),r=th(r,u),r.flags|=4096;return r}return s=Ui(s.child,{mode:u.mode,children:u.children}),s.ref=r.ref,r.child=s,s.return=r,s}function nh(s,r){var o=r.ref;if(o===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(s===null||s.ref!==o)&&(r.flags|=4194816)}}function gp(s,r,o,u,m){return Ha(r),o=Wm(s,r,o,u,void 0,m),u=Xm(),s!==null&&!Wt?(Jm(s,r,m),Gi(s,r,m)):(Ze&&u&&Im(r),r.flags|=1,vn(s,r,o,m),r.child)}function Nb(s,r,o,u,m,y){return Ha(r),r.updateQueue=null,o=jx(r,u,o,m),Rx(s),u=Xm(),s!==null&&!Wt?(Jm(s,r,y),Gi(s,r,y)):(Ze&&u&&Im(r),r.flags|=1,vn(s,r,o,y),r.child)}function Cb(s,r,o,u,m){if(Ha(r),r.stateNode===null){var y=Uo,_=o.contextType;typeof _=="object"&&_!==null&&(y=yn(_)),y=new o(u,y),r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=fp,r.stateNode=y,y._reactInternals=r,y=r.stateNode,y.props=u,y.state=r.memoizedState,y.refs={},Fm(r),_=o.contextType,y.context=typeof _=="object"&&_!==null?yn(_):Uo,y.state=r.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(hp(r,o,_,u),y.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&fp.enqueueReplaceState(y,y.state,null),Ac(r,u,y,m),Sc(),y.state=r.memoizedState),typeof y.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(s===null){y=r.stateNode;var A=r.memoizedProps,P=Wa(o,A);y.props=P;var W=y.context,ae=o.contextType;_=Uo,typeof ae=="object"&&ae!==null&&(_=yn(ae));var de=o.getDerivedStateFromProps;ae=typeof de=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=r.pendingProps!==A,ae||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||W!==_)&&mb(r,y,u,_),Cr=!1;var J=r.memoizedState;y.state=J,Ac(r,u,y,m),Sc(),W=r.memoizedState,A||J!==W||Cr?(typeof de=="function"&&(hp(r,o,de,u),W=r.memoizedState),(P=Cr||fb(r,o,P,u,J,W,_))?(ae||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=W),y.props=u,y.state=W,y.context=_,u=P):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{y=r.stateNode,qm(s,r),_=r.memoizedProps,ae=Wa(o,_),y.props=ae,de=r.pendingProps,J=y.context,W=o.contextType,P=Uo,typeof W=="object"&&W!==null&&(P=yn(W)),A=o.getDerivedStateFromProps,(W=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==de||J!==P)&&mb(r,y,u,P),Cr=!1,J=r.memoizedState,y.state=J,Ac(r,u,y,m),Sc();var se=r.memoizedState;_!==de||J!==se||Cr||s!==null&&s.dependencies!==null&&Pd(s.dependencies)?(typeof A=="function"&&(hp(r,o,A,u),se=r.memoizedState),(ae=Cr||fb(r,o,ae,u,J,se,P)||s!==null&&s.dependencies!==null&&Pd(s.dependencies))?(W||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,se,P),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,se,P)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===s.memoizedProps&&J===s.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&J===s.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=se),y.props=u,y.state=se,y.context=P,u=ae):(typeof y.componentDidUpdate!="function"||_===s.memoizedProps&&J===s.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&J===s.memoizedState||(r.flags|=1024),u=!1)}return y=u,nh(s,r),u=(r.flags&128)!==0,y||u?(y=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),r.flags|=1,s!==null&&u?(r.child=Ya(r,s.child,null,m),r.child=Ya(r,null,o,m)):vn(s,r,o,m),r.memoizedState=y.state,s=r.child):s=Gi(s,r,m),s}function Rb(s,r,o,u){return Fa(),r.flags|=256,vn(s,r,o,u),r.child}var yp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vp(s){return{baseLanes:s,cachePool:vx()}}function xp(s,r,o){return s=s!==null?s.childLanes&~o:0,r&&(s|=ss),s}function jb(s,r,o){var u=r.pendingProps,m=!1,y=(r.flags&128)!==0,_;if((_=y)||(_=s!==null&&s.memoizedState===null?!1:(Ut.current&2)!==0),_&&(m=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,s===null){if(Ze){if(m?Ir(r):Dr(),(s=xt)?(s=L1(s,_s),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Er!==null?{id:xi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=cx(s),o.return=r,r.child=o,gn=r,xt=null)):s=null,s===null)throw Ar(r);return tg(s)?r.lanes=32:r.lanes=536870912,null}var A=u.children;return u=u.fallback,m?(Dr(),m=r.mode,A=sh({mode:"hidden",children:A},m),u=Ba(u,m,o,null),A.return=r,u.return=r,A.sibling=u,r.child=A,u=r.child,u.memoizedState=vp(o),u.childLanes=xp(s,_,o),r.memoizedState=yp,Ic(null,u)):(Ir(r),bp(r,A))}var P=s.memoizedState;if(P!==null&&(A=P.dehydrated,A!==null)){if(y)r.flags&256?(Ir(r),r.flags&=-257,r=_p(s,r,o)):r.memoizedState!==null?(Dr(),r.child=s.child,r.flags|=128,r=null):(Dr(),A=u.fallback,m=r.mode,u=sh({mode:"visible",children:u.children},m),A=Ba(A,m,o,null),A.flags|=2,u.return=r,A.return=r,u.sibling=A,r.child=u,Ya(r,s.child,null,o),u=r.child,u.memoizedState=vp(o),u.childLanes=xp(s,_,o),r.memoizedState=yp,r=Ic(null,u));else if(Ir(r),tg(A)){if(_=A.nextSibling&&A.nextSibling.dataset,_)var W=_.dgst;_=W,u=Error(i(419)),u.stack="",u.digest=_,xc({value:u,source:null,stack:null}),r=_p(s,r,o)}else if(Wt||qo(s,r,o,!1),_=(o&s.childLanes)!==0,Wt||_){if(_=yt,_!==null&&(u=Jl(_,o),u!==0&&u!==P.retryLane))throw P.retryLane=u,za(s,u),Gn(_,s,u),pp;eg(A)||hh(),r=_p(s,r,o)}else eg(A)?(r.flags|=192,r.child=s.child,r=null):(s=P.treeContext,xt=Ts(A.nextSibling),gn=r,Ze=!0,Sr=null,_s=!1,s!==null&&hx(r,s),r=bp(r,u.children),r.flags|=4096);return r}return m?(Dr(),A=u.fallback,m=r.mode,P=s.child,W=P.sibling,u=Ui(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,W!==null?A=Ui(W,A):(A=Ba(A,m,o,null),A.flags|=2),A.return=r,u.return=r,u.sibling=A,r.child=u,Ic(null,u),u=r.child,A=s.child.memoizedState,A===null?A=vp(o):(m=A.cachePool,m!==null?(P=Yt._currentValue,m=m.parent!==P?{parent:P,pool:P}:m):m=vx(),A={baseLanes:A.baseLanes|o,cachePool:m}),u.memoizedState=A,u.childLanes=xp(s,_,o),r.memoizedState=yp,Ic(s.child,u)):(Ir(r),o=s.child,s=o.sibling,o=Ui(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,s!==null&&(_=r.deletions,_===null?(r.deletions=[s],r.flags|=16):_.push(s)),r.child=o,r.memoizedState=null,o)}function bp(s,r){return r=sh({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function sh(s,r){return s=Zn(22,s,null,r),s.lanes=0,s}function _p(s,r,o){return Ya(r,s.child,null,o),s=bp(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function Ib(s,r,o){s.lanes|=r;var u=s.alternate;u!==null&&(u.lanes|=r),Om(s.return,r,o)}function wp(s,r,o,u,m,y){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:y}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=m,_.treeForkCount=y)}function Db(s,r,o){var u=r.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var _=Ut.current,A=(_&2)!==0;if(A?(_=_&1|2,r.flags|=128):_&=1,ye(Ut,_),vn(s,r,u,o),u=Ze?vc:0,!A&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ib(s,o,r);else if(s.tag===19)Ib(s,o,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(m){case"forwards":for(o=r.child,m=null;o!==null;)s=o.alternate,s!==null&&Gd(s)===null&&(m=o),o=o.sibling;o=m,o===null?(m=r.child,r.child=null):(m=o.sibling,o.sibling=null),wp(r,!1,m,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=r.child,r.child=null;m!==null;){if(s=m.alternate,s!==null&&Gd(s)===null){r.child=m;break}s=m.sibling,m.sibling=o,o=m,m=s}wp(r,!0,o,null,y,u);break;case"together":wp(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function Gi(s,r,o){if(s!==null&&(r.dependencies=s.dependencies),kr|=r.lanes,(o&r.childLanes)===0)if(s!==null){if(qo(s,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,o=Ui(s,s.pendingProps),r.child=o,o.return=r;s.sibling!==null;)s=s.sibling,o=o.sibling=Ui(s,s.pendingProps),o.return=r;o.sibling=null}return r.child}function Tp(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Pd(s)))}function MR(s,r,o){switch(r.tag){case 3:lt(r,r.stateNode.containerInfo),Nr(r,Yt,s.memoizedState.cache),Fa();break;case 27:case 5:Is(r);break;case 4:lt(r,r.stateNode.containerInfo);break;case 10:Nr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Ym(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Ir(r),r.flags|=128,null):(o&r.child.childLanes)!==0?jb(s,r,o):(Ir(r),s=Gi(s,r,o),s!==null?s.sibling:null);Ir(r);break;case 19:var m=(s.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(qo(s,r,o,!1),u=(o&r.childLanes)!==0),m){if(u)return Db(s,r,o);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ye(Ut,Ut.current),u)break;return null;case 22:return r.lanes=0,Eb(s,r,o,r.pendingProps);case 24:Nr(r,Yt,s.memoizedState.cache)}return Gi(s,r,o)}function Vb(s,r,o){if(s!==null)if(s.memoizedProps!==r.pendingProps)Wt=!0;else{if(!Tp(s,o)&&(r.flags&128)===0)return Wt=!1,MR(s,r,o);Wt=(s.flags&131072)!==0}else Wt=!1,Ze&&(r.flags&1048576)!==0&&dx(r,vc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(s=Ka(r.elementType),r.type=s,typeof s=="function")Cm(s)?(u=Wa(s,u),r.tag=1,r=Cb(null,r,s,u,o)):(r.tag=0,r=gp(null,r,s,u,o));else{if(s!=null){var m=s.$$typeof;if(m===oe){r.tag=11,r=_b(null,r,s,u,o);break e}else if(m===R){r.tag=14,r=wb(null,r,s,u,o);break e}}throw r=te(s)||s,Error(i(306,r,""))}}return r;case 0:return gp(s,r,r.type,r.pendingProps,o);case 1:return u=r.type,m=Wa(u,r.pendingProps),Cb(s,r,u,m,o);case 3:e:{if(lt(r,r.stateNode.containerInfo),s===null)throw Error(i(387));u=r.pendingProps;var y=r.memoizedState;m=y.element,qm(s,r),Ac(r,u,null,o);var _=r.memoizedState;if(u=_.cache,Nr(r,Yt,u),u!==y.cache&&Pm(r,[Yt],o,!0),Sc(),u=_.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=y,r.memoizedState=y,r.flags&256){r=Rb(s,r,u,o);break e}else if(u!==m){m=vs(Error(i(424)),r),xc(m),r=Rb(s,r,u,o);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(xt=Ts(s.firstChild),gn=r,Ze=!0,Sr=null,_s=!0,o=Ex(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Fa(),u===m){r=Gi(s,r,o);break e}vn(s,r,u,o)}r=r.child}return r;case 26:return nh(s,r),s===null?(o=H1(r.type,null,r.pendingProps,null))?r.memoizedState=o:Ze||(o=r.type,s=r.pendingProps,u=xh(ke.current).createElement(o),u[Gt]=r,u[cn]=s,xn(u,o,s),Kt(u),r.stateNode=u):r.memoizedState=H1(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Is(r),s===null&&Ze&&(u=r.stateNode=B1(r.type,r.pendingProps,ke.current),gn=r,_s=!0,m=xt,zr(r.type)?(ng=m,xt=Ts(u.firstChild)):xt=m),vn(s,r,r.pendingProps.children,o),nh(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Ze&&((m=u=xt)&&(u=uj(u,r.type,r.pendingProps,_s),u!==null?(r.stateNode=u,gn=r,xt=Ts(u.firstChild),_s=!1,m=!0):m=!1),m||Ar(r)),Is(r),m=r.type,y=r.pendingProps,_=s!==null?s.memoizedProps:null,u=y.children,Xp(m,y)?u=null:_!==null&&Xp(m,_)&&(r.flags|=32),r.memoizedState!==null&&(m=Wm(s,r,SR,null,null,o),Kc._currentValue=m),nh(s,r),vn(s,r,u,o),r.child;case 6:return s===null&&Ze&&((s=o=xt)&&(o=dj(o,r.pendingProps,_s),o!==null?(r.stateNode=o,gn=r,xt=null,s=!0):s=!1),s||Ar(r)),null;case 13:return jb(s,r,o);case 4:return lt(r,r.stateNode.containerInfo),u=r.pendingProps,s===null?r.child=Ya(r,null,u,o):vn(s,r,u,o),r.child;case 11:return _b(s,r,r.type,r.pendingProps,o);case 7:return vn(s,r,r.pendingProps,o),r.child;case 8:return vn(s,r,r.pendingProps.children,o),r.child;case 12:return vn(s,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,Nr(r,r.type,u.value),vn(s,r,u.children,o),r.child;case 9:return m=r.type._context,u=r.pendingProps.children,Ha(r),m=yn(m),u=u(m),r.flags|=1,vn(s,r,u,o),r.child;case 14:return wb(s,r,r.type,r.pendingProps,o);case 15:return Tb(s,r,r.type,r.pendingProps,o);case 19:return Db(s,r,o);case 31:return VR(s,r,o);case 22:return Eb(s,r,o,r.pendingProps);case 24:return Ha(r),u=yn(Yt),s===null?(m=zm(),m===null&&(m=yt,y=Lm(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=o),m=y),r.memoizedState={parent:u,cache:m},Fm(r),Nr(r,Yt,m)):((s.lanes&o)!==0&&(qm(s,r),Ac(r,null,null,o),Sc()),m=s.memoizedState,y=r.memoizedState,m.parent!==u?(m={parent:u,cache:u},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),Nr(r,Yt,u)):(u=y.cache,Nr(r,Yt,u),u!==m.cache&&Pm(r,[Yt],o,!0))),vn(s,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Ki(s){s.flags|=4}function Ep(s,r,o,u,m){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(m&335544128)===m)if(s.stateNode.complete)s.flags|=8192;else if(a1())s.flags|=8192;else throw $a=Bd,Bm}else s.flags&=-16777217}function Mb(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Q1(r))if(a1())s.flags|=8192;else throw $a=Bd,Bm}function ih(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?ud():536870912,s.lanes|=r,tl|=r)}function Dc(s,r){if(!Ze)switch(s.tailMode){case"hidden":r=s.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function bt(s){var r=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(r)for(var m=s.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=u,s.childLanes=o,r}function kR(s,r,o){var u=r.pendingProps;switch(Dm(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(r),null;case 1:return bt(r),null;case 3:return o=r.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Fi(Yt),nt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(Fo(r)?Ki(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Mm())),bt(r),null;case 26:var m=r.type,y=r.memoizedState;return s===null?(Ki(r),y!==null?(bt(r),Mb(r,y)):(bt(r),Ep(r,m,null,u,o))):y?y!==s.memoizedState?(Ki(r),bt(r),Mb(r,y)):(bt(r),r.flags&=-16777217):(s=s.memoizedProps,s!==u&&Ki(r),bt(r),Ep(r,m,s,u,o)),null;case 27:if(ei(r),o=ke.current,m=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==u&&Ki(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return bt(r),null}s=_e.current,Fo(r)?fx(r):(s=B1(m,u,o),r.stateNode=s,Ki(r))}return bt(r),null;case 5:if(ei(r),m=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==u&&Ki(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return bt(r),null}if(y=_e.current,Fo(r))fx(r);else{var _=xh(ke.current);switch(y){case 1:y=_.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=_.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=_.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?_.createElement(m,{is:u.is}):_.createElement(m)}}y[Gt]=r,y[cn]=u;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)y.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=y;e:switch(xn(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ki(r)}}return bt(r),Ep(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,o),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==u&&Ki(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(i(166));if(s=ke.current,Fo(r)){if(s=r.stateNode,o=r.memoizedProps,u=null,m=gn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}s[Gt]=r,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||j1(s.nodeValue,o)),s||Ar(r,!0)}else s=xh(s).createTextNode(u),s[Gt]=r,r.stateNode=s}return bt(r),null;case 31:if(o=r.memoizedState,s===null||s.memoizedState!==null){if(u=Fo(r),o!==null){if(s===null){if(!u)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Gt]=r}else Fa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;bt(r),s=!1}else o=Mm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return r.flags&256?(ts(r),r):(ts(r),null);if((r.flags&128)!==0)throw Error(i(558))}return bt(r),null;case 13:if(u=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=Fo(r),u!==null&&u.dehydrated!==null){if(s===null){if(!m)throw Error(i(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Gt]=r}else Fa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;bt(r),m=!1}else m=Mm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(ts(r),r):(ts(r),null)}return ts(r),(r.flags&128)!==0?(r.lanes=o,r):(o=u!==null,s=s!==null&&s.memoizedState!==null,o&&(u=r.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),o!==s&&o&&(r.child.flags|=8192),ih(r,r.updateQueue),bt(r),null);case 4:return nt(),s===null&&Kp(r.stateNode.containerInfo),bt(r),null;case 10:return Fi(r.type),bt(r),null;case 19:if(re(Ut),u=r.memoizedState,u===null)return bt(r),null;if(m=(r.flags&128)!==0,y=u.rendering,y===null)if(m)Dc(u,!1);else{if(Vt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(y=Gd(s),y!==null){for(r.flags|=128,Dc(u,!1),s=y.updateQueue,r.updateQueue=s,ih(r,s),r.subtreeFlags=0,s=o,o=r.child;o!==null;)lx(o,s),o=o.sibling;return ye(Ut,Ut.current&1|2),Ze&&zi(r,u.treeForkCount),r.child}s=s.sibling}u.tail!==null&&ge()>ch&&(r.flags|=128,m=!0,Dc(u,!1),r.lanes=4194304)}else{if(!m)if(s=Gd(y),s!==null){if(r.flags|=128,m=!0,s=s.updateQueue,r.updateQueue=s,ih(r,s),Dc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Ze)return bt(r),null}else 2*ge()-u.renderingStartTime>ch&&o!==536870912&&(r.flags|=128,m=!0,Dc(u,!1),r.lanes=4194304);u.isBackwards?(y.sibling=r.child,r.child=y):(s=u.last,s!==null?s.sibling=y:r.child=y,u.last=y)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=ge(),s.sibling=null,o=Ut.current,ye(Ut,m?o&1|2:o&1),Ze&&zi(r,u.treeForkCount),s):(bt(r),null);case 22:case 23:return ts(r),$m(),u=r.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(bt(r),r.subtreeFlags&6&&(r.flags|=8192)):bt(r),o=r.updateQueue,o!==null&&ih(r,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),s!==null&&re(Ga),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Fi(Yt),bt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function OR(s,r){switch(Dm(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Fi(Yt),nt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return ei(r),null;case 31:if(r.memoizedState!==null){if(ts(r),r.alternate===null)throw Error(i(340));Fa()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(ts(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Fa()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return re(Ut),null;case 4:return nt(),null;case 10:return Fi(r.type),null;case 22:case 23:return ts(r),$m(),s!==null&&re(Ga),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Fi(Yt),null;case 25:return null;default:return null}}function kb(s,r){switch(Dm(r),r.tag){case 3:Fi(Yt),nt();break;case 26:case 27:case 5:ei(r);break;case 4:nt();break;case 31:r.memoizedState!==null&&ts(r);break;case 13:ts(r);break;case 19:re(Ut);break;case 10:Fi(r.type);break;case 22:case 23:ts(r),$m(),s!==null&&re(Ga);break;case 24:Fi(Yt)}}function Vc(s,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&s)===s){u=void 0;var y=o.create,_=o.inst;u=y(),_.destroy=u}o=o.next}while(o!==m)}}catch(A){dt(r,r.return,A)}}function Vr(s,r,o){try{var u=r.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&s)===s){var _=u.inst,A=_.destroy;if(A!==void 0){_.destroy=void 0,m=r;var P=o,W=A;try{W()}catch(ae){dt(m,P,ae)}}}u=u.next}while(u!==y)}}catch(ae){dt(r,r.return,ae)}}function Ob(s){var r=s.updateQueue;if(r!==null){var o=s.stateNode;try{Ax(r,o)}catch(u){dt(s,s.return,u)}}}function Pb(s,r,o){o.props=Wa(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){dt(s,r,u)}}function Mc(s,r){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof o=="function"?s.refCleanup=o(u):o.current=u}}catch(m){dt(s,r,m)}}function _i(s,r){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){dt(s,r,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){dt(s,r,m)}else o.current=null}function Lb(s){var r=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){dt(s,s.return,m)}}function Sp(s,r,o){try{var u=s.stateNode;ij(u,s.type,o,r),u[cn]=r}catch(m){dt(s,s.return,m)}}function Ub(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&zr(s.type)||s.tag===4}function Ap(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ub(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&zr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Np(s,r,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(s),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ks));else if(u!==4&&(u===27&&zr(s.type)&&(o=s.stateNode,r=null),s=s.child,s!==null))for(Np(s,r,o),s=s.sibling;s!==null;)Np(s,r,o),s=s.sibling}function rh(s,r,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,r?o.insertBefore(s,r):o.appendChild(s);else if(u!==4&&(u===27&&zr(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(rh(s,r,o),s=s.sibling;s!==null;)rh(s,r,o),s=s.sibling}function zb(s){var r=s.stateNode,o=s.memoizedProps;try{for(var u=s.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);xn(r,u,o),r[Gt]=s,r[cn]=o}catch(y){dt(s,s.return,y)}}var $i=!1,Xt=!1,Cp=!1,Bb=typeof WeakSet=="function"?WeakSet:Set,dn=null;function PR(s,r){if(s=s.containerInfo,Qp=Ah,s=Zv(s),_m(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var _=0,A=-1,P=-1,W=0,ae=0,de=s,J=null;t:for(;;){for(var se;de!==o||m!==0&&de.nodeType!==3||(A=_+m),de!==y||u!==0&&de.nodeType!==3||(P=_+u),de.nodeType===3&&(_+=de.nodeValue.length),(se=de.firstChild)!==null;)J=de,de=se;for(;;){if(de===s)break t;if(J===o&&++W===m&&(A=_),J===y&&++ae===u&&(P=_),(se=de.nextSibling)!==null)break;de=J,J=de.parentNode}de=se}o=A===-1||P===-1?null:{start:A,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(Wp={focusedElem:s,selectionRange:o},Ah=!1,dn=r;dn!==null;)if(r=dn,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,dn=s;else for(;dn!==null;){switch(r=dn,y=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)m=s[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,o=r,m=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var Se=Wa(o.type,m);s=u.getSnapshotBeforeUpdate(Se,y),u.__reactInternalSnapshotBeforeUpdate=s}catch(Me){dt(o,o.return,Me)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,o=s.nodeType,o===9)Zp(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Zp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,dn=s;break}dn=r.return}}function Fb(s,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Qi(s,o),u&4&&Vc(5,o);break;case 1:if(Qi(s,o),u&4)if(s=o.stateNode,r===null)try{s.componentDidMount()}catch(_){dt(o,o.return,_)}else{var m=Wa(o.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(m,r,s.__reactInternalSnapshotBeforeUpdate)}catch(_){dt(o,o.return,_)}}u&64&&Ob(o),u&512&&Mc(o,o.return);break;case 3:if(Qi(s,o),u&64&&(s=o.updateQueue,s!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{Ax(s,r)}catch(_){dt(o,o.return,_)}}break;case 27:r===null&&u&4&&zb(o);case 26:case 5:Qi(s,o),r===null&&u&4&&Lb(o),u&512&&Mc(o,o.return);break;case 12:Qi(s,o);break;case 31:Qi(s,o),u&4&&Gb(s,o);break;case 13:Qi(s,o),u&4&&Kb(s,o),u&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=KR.bind(null,o),hj(s,o))));break;case 22:if(u=o.memoizedState!==null||$i,!u){r=r!==null&&r.memoizedState!==null||Xt,m=$i;var y=Xt;$i=u,(Xt=r)&&!y?Wi(s,o,(o.subtreeFlags&8772)!==0):Qi(s,o),$i=m,Xt=y}break;case 30:break;default:Qi(s,o)}}function qb(s){var r=s.alternate;r!==null&&(s.alternate=null,qb(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&So(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var St=null,Bn=!1;function Yi(s,r,o){for(o=o.child;o!==null;)Hb(s,r,o),o=o.sibling}function Hb(s,r,o){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Qn,o)}catch{}switch(o.tag){case 26:Xt||_i(o,r),Yi(s,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Xt||_i(o,r);var u=St,m=Bn;zr(o.type)&&(St=o.stateNode,Bn=!1),Yi(s,r,o),qc(o.stateNode),St=u,Bn=m;break;case 5:Xt||_i(o,r);case 6:if(u=St,m=Bn,St=null,Yi(s,r,o),St=u,Bn=m,St!==null)if(Bn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(o.stateNode)}catch(y){dt(o,r,y)}else try{St.removeChild(o.stateNode)}catch(y){dt(o,r,y)}break;case 18:St!==null&&(Bn?(s=St,O1(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),cl(s)):O1(St,o.stateNode));break;case 4:u=St,m=Bn,St=o.stateNode.containerInfo,Bn=!0,Yi(s,r,o),St=u,Bn=m;break;case 0:case 11:case 14:case 15:Vr(2,o,r),Xt||Vr(4,o,r),Yi(s,r,o);break;case 1:Xt||(_i(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Pb(o,r,u)),Yi(s,r,o);break;case 21:Yi(s,r,o);break;case 22:Xt=(u=Xt)||o.memoizedState!==null,Yi(s,r,o),Xt=u;break;default:Yi(s,r,o)}}function Gb(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{cl(s)}catch(o){dt(r,r.return,o)}}}function Kb(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{cl(s)}catch(o){dt(r,r.return,o)}}function LR(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new Bb),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new Bb),r;default:throw Error(i(435,s.tag))}}function ah(s,r){var o=LR(s);r.forEach(function(u){if(!o.has(u)){o.add(u);var m=$R.bind(null,s,u);u.then(m,m)}})}function Fn(s,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],y=s,_=r,A=_;e:for(;A!==null;){switch(A.tag){case 27:if(zr(A.type)){St=A.stateNode,Bn=!1;break e}break;case 5:St=A.stateNode,Bn=!1;break e;case 3:case 4:St=A.stateNode.containerInfo,Bn=!0;break e}A=A.return}if(St===null)throw Error(i(160));Hb(y,_,m),St=null,Bn=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)$b(r,s),r=r.sibling}var Bs=null;function $b(s,r){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Fn(r,s),qn(s),u&4&&(Vr(3,s,s.return),Vc(3,s),Vr(5,s,s.return));break;case 1:Fn(r,s),qn(s),u&512&&(Xt||o===null||_i(o,o.return)),u&64&&$i&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Bs;if(Fn(r,s),qn(s),u&512&&(Xt||o===null||_i(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[oi]||y[Gt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),xn(y,u,o),y[Gt]=s,Kt(y),u=y;break e;case"link":var _=$1("link","href",m).get(u+(o.href||""));if(_){for(var A=0;A<_.length;A++)if(y=_[A],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(A,1);break t}}y=m.createElement(u),xn(y,u,o),m.head.appendChild(y);break;case"meta":if(_=$1("meta","content",m).get(u+(o.content||""))){for(A=0;A<_.length;A++)if(y=_[A],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(A,1);break t}}y=m.createElement(u),xn(y,u,o),m.head.appendChild(y);break;default:throw Error(i(468,u))}y[Gt]=s,Kt(y),u=y}s.stateNode=u}else Y1(m,s.type,s.stateNode);else s.stateNode=K1(m,u,s.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?Y1(m,s.type,s.stateNode):K1(m,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Sp(s,s.memoizedProps,o.memoizedProps)}break;case 27:Fn(r,s),qn(s),u&512&&(Xt||o===null||_i(o,o.return)),o!==null&&u&4&&Sp(s,s.memoizedProps,o.memoizedProps);break;case 5:if(Fn(r,s),qn(s),u&512&&(Xt||o===null||_i(o,o.return)),s.flags&32){m=s.stateNode;try{zn(m,"")}catch(Se){dt(s,s.return,Se)}}u&4&&s.stateNode!=null&&(m=s.memoizedProps,Sp(s,m,o!==null?o.memoizedProps:m)),u&1024&&(Cp=!0);break;case 6:if(Fn(r,s),qn(s),u&4){if(s.stateNode===null)throw Error(i(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(Se){dt(s,s.return,Se)}}break;case 3:if(wh=null,m=Bs,Bs=bh(r.containerInfo),Fn(r,s),Bs=m,qn(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{cl(r.containerInfo)}catch(Se){dt(s,s.return,Se)}Cp&&(Cp=!1,Yb(s));break;case 4:u=Bs,Bs=bh(s.stateNode.containerInfo),Fn(r,s),qn(s),Bs=u;break;case 12:Fn(r,s),qn(s);break;case 31:Fn(r,s),qn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,ah(s,u)));break;case 13:Fn(r,s),qn(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(lh=ge()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,ah(s,u)));break;case 22:m=s.memoizedState!==null;var P=o!==null&&o.memoizedState!==null,W=$i,ae=Xt;if($i=W||m,Xt=ae||P,Fn(r,s),Xt=ae,$i=W,qn(s),u&8192)e:for(r=s.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(o===null||P||$i||Xt||Xa(s)),o=null,r=s;;){if(r.tag===5||r.tag===26){if(o===null){P=o=r;try{if(y=P.stateNode,m)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{A=P.stateNode;var de=P.memoizedProps.style,J=de!=null&&de.hasOwnProperty("display")?de.display:null;A.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Se){dt(P,P.return,Se)}}}else if(r.tag===6){if(o===null){P=r;try{P.stateNode.nodeValue=m?"":P.memoizedProps}catch(Se){dt(P,P.return,Se)}}}else if(r.tag===18){if(o===null){P=r;try{var se=P.stateNode;m?P1(se,!0):P1(P.stateNode,!1)}catch(Se){dt(P,P.return,Se)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,ah(s,o))));break;case 19:Fn(r,s),qn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,ah(s,u)));break;case 30:break;case 21:break;default:Fn(r,s),qn(s)}}function qn(s){var r=s.flags;if(r&2){try{for(var o,u=s.return;u!==null;){if(Ub(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var m=o.stateNode,y=Ap(s);rh(s,y,m);break;case 5:var _=o.stateNode;o.flags&32&&(zn(_,""),o.flags&=-33);var A=Ap(s);rh(s,A,_);break;case 3:case 4:var P=o.stateNode.containerInfo,W=Ap(s);Np(s,W,P);break;default:throw Error(i(161))}}catch(ae){dt(s,s.return,ae)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function Yb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;Yb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Qi(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Fb(s,r.alternate,r),r=r.sibling}function Xa(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Vr(4,r,r.return),Xa(r);break;case 1:_i(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Pb(r,r.return,o),Xa(r);break;case 27:qc(r.stateNode);case 26:case 5:_i(r,r.return),Xa(r);break;case 22:r.memoizedState===null&&Xa(r);break;case 30:Xa(r);break;default:Xa(r)}s=s.sibling}}function Wi(s,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,m=s,y=r,_=y.flags;switch(y.tag){case 0:case 11:case 15:Wi(m,y,o),Vc(4,y);break;case 1:if(Wi(m,y,o),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(W){dt(u,u.return,W)}if(u=y,m=u.updateQueue,m!==null){var A=u.stateNode;try{var P=m.shared.hiddenCallbacks;if(P!==null)for(m.shared.hiddenCallbacks=null,m=0;m<P.length;m++)Sx(P[m],A)}catch(W){dt(u,u.return,W)}}o&&_&64&&Ob(y),Mc(y,y.return);break;case 27:zb(y);case 26:case 5:Wi(m,y,o),o&&u===null&&_&4&&Lb(y),Mc(y,y.return);break;case 12:Wi(m,y,o);break;case 31:Wi(m,y,o),o&&_&4&&Gb(m,y);break;case 13:Wi(m,y,o),o&&_&4&&Kb(m,y);break;case 22:y.memoizedState===null&&Wi(m,y,o),Mc(y,y.return);break;case 30:break;default:Wi(m,y,o)}r=r.sibling}}function Rp(s,r){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&bc(o))}function jp(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&bc(s))}function Fs(s,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Qb(s,r,o,u),r=r.sibling}function Qb(s,r,o,u){var m=r.flags;switch(r.tag){case 0:case 11:case 15:Fs(s,r,o,u),m&2048&&Vc(9,r);break;case 1:Fs(s,r,o,u);break;case 3:Fs(s,r,o,u),m&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&bc(s)));break;case 12:if(m&2048){Fs(s,r,o,u),s=r.stateNode;try{var y=r.memoizedProps,_=y.id,A=y.onPostCommit;typeof A=="function"&&A(_,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(P){dt(r,r.return,P)}}else Fs(s,r,o,u);break;case 31:Fs(s,r,o,u);break;case 13:Fs(s,r,o,u);break;case 23:break;case 22:y=r.stateNode,_=r.alternate,r.memoizedState!==null?y._visibility&2?Fs(s,r,o,u):kc(s,r):y._visibility&2?Fs(s,r,o,u):(y._visibility|=2,Jo(s,r,o,u,(r.subtreeFlags&10256)!==0||!1)),m&2048&&Rp(_,r);break;case 24:Fs(s,r,o,u),m&2048&&jp(r.alternate,r);break;default:Fs(s,r,o,u)}}function Jo(s,r,o,u,m){for(m=m&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var y=s,_=r,A=o,P=u,W=_.flags;switch(_.tag){case 0:case 11:case 15:Jo(y,_,A,P,m),Vc(8,_);break;case 23:break;case 22:var ae=_.stateNode;_.memoizedState!==null?ae._visibility&2?Jo(y,_,A,P,m):kc(y,_):(ae._visibility|=2,Jo(y,_,A,P,m)),m&&W&2048&&Rp(_.alternate,_);break;case 24:Jo(y,_,A,P,m),m&&W&2048&&jp(_.alternate,_);break;default:Jo(y,_,A,P,m)}r=r.sibling}}function kc(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=s,u=r,m=u.flags;switch(u.tag){case 22:kc(o,u),m&2048&&Rp(u.alternate,u);break;case 24:kc(o,u),m&2048&&jp(u.alternate,u);break;default:kc(o,u)}r=r.sibling}}var Oc=8192;function Zo(s,r,o){if(s.subtreeFlags&Oc)for(s=s.child;s!==null;)Wb(s,r,o),s=s.sibling}function Wb(s,r,o){switch(s.tag){case 26:Zo(s,r,o),s.flags&Oc&&s.memoizedState!==null&&Ej(o,Bs,s.memoizedState,s.memoizedProps);break;case 5:Zo(s,r,o);break;case 3:case 4:var u=Bs;Bs=bh(s.stateNode.containerInfo),Zo(s,r,o),Bs=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=Oc,Oc=16777216,Zo(s,r,o),Oc=u):Zo(s,r,o));break;default:Zo(s,r,o)}}function Xb(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Pc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];dn=u,Zb(u,s)}Xb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Jb(s),s=s.sibling}function Jb(s){switch(s.tag){case 0:case 11:case 15:Pc(s),s.flags&2048&&Vr(9,s,s.return);break;case 3:Pc(s);break;case 12:Pc(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,oh(s)):Pc(s);break;default:Pc(s)}}function oh(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];dn=u,Zb(u,s)}Xb(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Vr(8,r,r.return),oh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,oh(r));break;default:oh(r)}s=s.sibling}}function Zb(s,r){for(;dn!==null;){var o=dn;switch(o.tag){case 0:case 11:case 15:Vr(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:bc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,dn=u;else e:for(o=s;dn!==null;){u=dn;var m=u.sibling,y=u.return;if(qb(u),u===o){dn=null;break e}if(m!==null){m.return=y,dn=m;break e}dn=y}}}var UR={getCacheForType:function(s){var r=yn(Yt),o=r.data.get(s);return o===void 0&&(o=s(),r.data.set(s,o)),o},cacheSignal:function(){return yn(Yt).controller.signal}},zR=typeof WeakMap=="function"?WeakMap:Map,ot=0,yt=null,Ke=null,Ye=0,ut=0,ns=null,Mr=!1,el=!1,Ip=!1,Xi=0,Vt=0,kr=0,Ja=0,Dp=0,ss=0,tl=0,Lc=null,Hn=null,Vp=!1,lh=0,e1=0,ch=1/0,uh=null,Or=null,an=0,Pr=null,nl=null,Ji=0,Mp=0,kp=null,t1=null,Uc=0,Op=null;function is(){return(ot&2)!==0&&Ye!==0?Ye&-Ye:ee.T!==null?Fp():dd()}function n1(){if(ss===0)if((Ye&536870912)===0||Ze){var s=Sa;Sa<<=1,(Sa&3932160)===0&&(Sa=262144),ss=s}else ss=536870912;return s=es.current,s!==null&&(s.flags|=32),ss}function Gn(s,r,o){(s===yt&&(ut===2||ut===9)||s.cancelPendingCommit!==null)&&(sl(s,0),Lr(s,Ye,ss,!1)),Aa(s,o),((ot&2)===0||s!==yt)&&(s===yt&&((ot&2)===0&&(Ja|=o),Vt===4&&Lr(s,Ye,ss,!1)),wi(s))}function s1(s,r,o){if((ot&6)!==0)throw Error(i(327));var u=!o&&(r&127)===0&&(r&s.expiredLanes)===0||Ds(s,r),m=u?qR(s,r):Lp(s,r,!0),y=u;do{if(m===0){el&&!u&&Lr(s,r,0,!1);break}else{if(o=s.current.alternate,y&&!BR(o)){m=Lp(s,r,!1),y=!1;continue}if(m===2){if(y=r,s.errorRecoveryDisabledLanes&y)var _=0;else _=s.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var A=s;m=Lc;var P=A.current.memoizedState.isDehydrated;if(P&&(sl(A,_).flags|=256),_=Lp(A,_,!1),_!==2){if(Ip&&!P){A.errorRecoveryDisabledLanes|=y,Ja|=y,m=4;break e}y=Hn,Hn=m,y!==null&&(Hn===null?Hn=y:Hn.push.apply(Hn,y))}m=_}if(y=!1,m!==2)continue}}if(m===1){sl(s,0),Lr(s,r,0,!0);break}e:{switch(u=s,y=m,y){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Lr(u,r,ss,!Mr);break e;case 2:Hn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(m=lh+300-ge(),10<m)){if(Lr(u,r,ss,!Mr),ii(u,0,!0)!==0)break e;Ji=r,u.timeoutHandle=M1(i1.bind(null,u,o,Hn,uh,Vp,r,ss,Ja,tl,Mr,y,"Throttled",-0,0),m);break e}i1(u,o,Hn,uh,Vp,r,ss,Ja,tl,Mr,y,null,-0,0)}}break}while(!0);wi(s)}function i1(s,r,o,u,m,y,_,A,P,W,ae,de,J,se){if(s.timeoutHandle=-1,de=r.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ks},Wb(r,y,de);var Se=(y&62914560)===y?lh-ge():(y&4194048)===y?e1-ge():0;if(Se=Sj(de,Se),Se!==null){Ji=y,s.cancelPendingCommit=Se(h1.bind(null,s,r,y,o,u,m,_,A,P,ae,de,null,J,se)),Lr(s,y,_,!W);return}}h1(s,r,y,o,u,m,_,A,P)}function BR(s){for(var r=s;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],y=m.getSnapshot;m=m.value;try{if(!Jn(y(),m))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Lr(s,r,o,u){r&=~Dp,r&=~Ja,s.suspendedLanes|=r,s.pingedLanes&=~r,u&&(s.warmLanes|=r),u=s.expirationTimes;for(var m=r;0<m;){var y=31-Ct(m),_=1<<y;u[y]=-1,m&=~_}o!==0&&Na(s,o,r)}function dh(){return(ot&6)===0?(zc(0),!1):!0}function Pp(){if(Ke!==null){if(ut===0)var s=Ke.return;else s=Ke,Bi=qa=null,Zm(s),$o=null,wc=0,s=Ke;for(;s!==null;)kb(s.alternate,s),s=s.return;Ke=null}}function sl(s,r){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,oj(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),Ji=0,Pp(),yt=s,Ke=o=Ui(s.current,null),Ye=r,ut=0,ns=null,Mr=!1,el=Ds(s,r),Ip=!1,tl=ss=Dp=Ja=kr=Vt=0,Hn=Lc=null,Vp=!1,(r&8)!==0&&(r|=r&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=r;0<u;){var m=31-Ct(u),y=1<<m;r|=s[m],u&=~y}return Xi=r,Dd(),o}function r1(s,r){Fe=null,ee.H=jc,r===Ko||r===zd?(r=_x(),ut=3):r===Bm?(r=_x(),ut=4):ut=r===pp?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ns=r,Ke===null&&(Vt=1,eh(s,vs(r,s.current)))}function a1(){var s=es.current;return s===null?!0:(Ye&4194048)===Ye?ws===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?s===ws:!1}function o1(){var s=ee.H;return ee.H=jc,s===null?jc:s}function l1(){var s=ee.A;return ee.A=UR,s}function hh(){Vt=4,Mr||(Ye&4194048)!==Ye&&es.current!==null||(el=!0),(kr&134217727)===0&&(Ja&134217727)===0||yt===null||Lr(yt,Ye,ss,!1)}function Lp(s,r,o){var u=ot;ot|=2;var m=o1(),y=l1();(yt!==s||Ye!==r)&&(uh=null,sl(s,r)),r=!1;var _=Vt;e:do try{if(ut!==0&&Ke!==null){var A=Ke,P=ns;switch(ut){case 8:Pp(),_=6;break e;case 3:case 2:case 9:case 6:es.current===null&&(r=!0);var W=ut;if(ut=0,ns=null,il(s,A,P,W),o&&el){_=0;break e}break;default:W=ut,ut=0,ns=null,il(s,A,P,W)}}FR(),_=Vt;break}catch(ae){r1(s,ae)}while(!0);return r&&s.shellSuspendCounter++,Bi=qa=null,ot=u,ee.H=m,ee.A=y,Ke===null&&(yt=null,Ye=0,Dd()),_}function FR(){for(;Ke!==null;)c1(Ke)}function qR(s,r){var o=ot;ot|=2;var u=o1(),m=l1();yt!==s||Ye!==r?(uh=null,ch=ge()+500,sl(s,r)):el=Ds(s,r);e:do try{if(ut!==0&&Ke!==null){r=Ke;var y=ns;t:switch(ut){case 1:ut=0,ns=null,il(s,r,y,1);break;case 2:case 9:if(xx(y)){ut=0,ns=null,u1(r);break}r=function(){ut!==2&&ut!==9||yt!==s||(ut=7),wi(s)},y.then(r,r);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:xx(y)?(ut=0,ns=null,u1(r)):(ut=0,ns=null,il(s,r,y,7));break;case 5:var _=null;switch(Ke.tag){case 26:_=Ke.memoizedState;case 5:case 27:var A=Ke;if(_?Q1(_):A.stateNode.complete){ut=0,ns=null;var P=A.sibling;if(P!==null)Ke=P;else{var W=A.return;W!==null?(Ke=W,fh(W)):Ke=null}break t}}ut=0,ns=null,il(s,r,y,5);break;case 6:ut=0,ns=null,il(s,r,y,6);break;case 8:Pp(),Vt=6;break e;default:throw Error(i(462))}}HR();break}catch(ae){r1(s,ae)}while(!0);return Bi=qa=null,ee.H=u,ee.A=m,ot=o,Ke!==null?0:(yt=null,Ye=0,Dd(),Vt)}function HR(){for(;Ke!==null&&!Q();)c1(Ke)}function c1(s){var r=Vb(s.alternate,s,Xi);s.memoizedProps=s.pendingProps,r===null?fh(s):Ke=r}function u1(s){var r=s,o=r.alternate;switch(r.tag){case 15:case 0:r=Nb(o,r,r.pendingProps,r.type,void 0,Ye);break;case 11:r=Nb(o,r,r.pendingProps,r.type.render,r.ref,Ye);break;case 5:Zm(r);default:kb(o,r),r=Ke=lx(r,Xi),r=Vb(o,r,Xi)}s.memoizedProps=s.pendingProps,r===null?fh(s):Ke=r}function il(s,r,o,u){Bi=qa=null,Zm(r),$o=null,wc=0;var m=r.return;try{if(DR(s,m,r,o,Ye)){Vt=1,eh(s,vs(o,s.current)),Ke=null;return}}catch(y){if(m!==null)throw Ke=m,y;Vt=1,eh(s,vs(o,s.current)),Ke=null;return}r.flags&32768?(Ze||u===1?s=!0:el||(Ye&536870912)!==0?s=!1:(Mr=s=!0,(u===2||u===9||u===3||u===6)&&(u=es.current,u!==null&&u.tag===13&&(u.flags|=16384))),d1(r,s)):fh(r)}function fh(s){var r=s;do{if((r.flags&32768)!==0){d1(r,Mr);return}s=r.return;var o=kR(r.alternate,r,Xi);if(o!==null){Ke=o;return}if(r=r.sibling,r!==null){Ke=r;return}Ke=r=s}while(r!==null);Vt===0&&(Vt=5)}function d1(s,r){do{var o=OR(s.alternate,s);if(o!==null){o.flags&=32767,Ke=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(s=s.sibling,s!==null)){Ke=s;return}Ke=s=o}while(s!==null);Vt=6,Ke=null}function h1(s,r,o,u,m,y,_,A,P){s.cancelPendingCommit=null;do mh();while(an!==0);if((ot&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(y=r.lanes|r.childLanes,y|=Am,ym(s,o,y,_,A,P),s===yt&&(Ke=yt=null,Ye=0),nl=r,Pr=s,Ji=o,Mp=y,kp=m,t1=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,YR(Ge,function(){return y1(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=ee.T,ee.T=null,m=X.p,X.p=2,_=ot,ot|=4;try{PR(s,r,o)}finally{ot=_,X.p=m,ee.T=u}}an=1,f1(),m1(),p1()}}function f1(){if(an===1){an=0;var s=Pr,r=nl,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=ee.T,ee.T=null;var u=X.p;X.p=2;var m=ot;ot|=4;try{$b(r,s);var y=Wp,_=Zv(s.containerInfo),A=y.focusedElem,P=y.selectionRange;if(_!==A&&A&&A.ownerDocument&&Jv(A.ownerDocument.documentElement,A)){if(P!==null&&_m(A)){var W=P.start,ae=P.end;if(ae===void 0&&(ae=W),"selectionStart"in A)A.selectionStart=W,A.selectionEnd=Math.min(ae,A.value.length);else{var de=A.ownerDocument||document,J=de&&de.defaultView||window;if(J.getSelection){var se=J.getSelection(),Se=A.textContent.length,Me=Math.min(P.start,Se),pt=P.end===void 0?Me:Math.min(P.end,Se);!se.extend&&Me>pt&&(_=pt,pt=Me,Me=_);var G=Xv(A,Me),F=Xv(A,pt);if(G&&F&&(se.rangeCount!==1||se.anchorNode!==G.node||se.anchorOffset!==G.offset||se.focusNode!==F.node||se.focusOffset!==F.offset)){var Y=de.createRange();Y.setStart(G.node,G.offset),se.removeAllRanges(),Me>pt?(se.addRange(Y),se.extend(F.node,F.offset)):(Y.setEnd(F.node,F.offset),se.addRange(Y))}}}}for(de=[],se=A;se=se.parentNode;)se.nodeType===1&&de.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<de.length;A++){var ce=de[A];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Ah=!!Qp,Wp=Qp=null}finally{ot=m,X.p=u,ee.T=o}}s.current=r,an=2}}function m1(){if(an===2){an=0;var s=Pr,r=nl,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=ee.T,ee.T=null;var u=X.p;X.p=2;var m=ot;ot|=4;try{Fb(s,r.alternate,r)}finally{ot=m,X.p=u,ee.T=o}}an=3}}function p1(){if(an===4||an===3){an=0,ie();var s=Pr,r=nl,o=Ji,u=t1;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?an=5:(an=0,nl=Pr=null,g1(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(Or=null),ki(o),r=r.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Qn,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=ee.T,m=X.p,X.p=2,ee.T=null;try{for(var y=s.onRecoverableError,_=0;_<u.length;_++){var A=u[_];y(A.value,{componentStack:A.stack})}}finally{ee.T=r,X.p=m}}(Ji&3)!==0&&mh(),wi(s),m=s.pendingLanes,(o&261930)!==0&&(m&42)!==0?s===Op?Uc++:(Uc=0,Op=s):Uc=0,zc(0)}}function g1(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,bc(r)))}function mh(){return f1(),m1(),p1(),y1()}function y1(){if(an!==5)return!1;var s=Pr,r=Mp;Mp=0;var o=ki(Ji),u=ee.T,m=X.p;try{X.p=32>o?32:o,ee.T=null,o=kp,kp=null;var y=Pr,_=Ji;if(an=0,nl=Pr=null,Ji=0,(ot&6)!==0)throw Error(i(331));var A=ot;if(ot|=4,Jb(y.current),Qb(y,y.current,_,o),ot=A,zc(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Qn,y)}catch{}return!0}finally{X.p=m,ee.T=u,g1(s,r)}}function v1(s,r,o){r=vs(o,r),r=mp(s.stateNode,r,2),s=jr(s,r,2),s!==null&&(Aa(s,2),wi(s))}function dt(s,r,o){if(s.tag===3)v1(s,s,o);else for(;r!==null;){if(r.tag===3){v1(r,s,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Or===null||!Or.has(u))){s=vs(o,s),o=xb(2),u=jr(r,o,2),u!==null&&(bb(o,u,r,s),Aa(u,2),wi(u));break}}r=r.return}}function Up(s,r,o){var u=s.pingCache;if(u===null){u=s.pingCache=new zR;var m=new Set;u.set(r,m)}else m=u.get(r),m===void 0&&(m=new Set,u.set(r,m));m.has(o)||(Ip=!0,m.add(o),s=GR.bind(null,s,r,o),r.then(s,s))}function GR(s,r,o){var u=s.pingCache;u!==null&&u.delete(r),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,yt===s&&(Ye&o)===o&&(Vt===4||Vt===3&&(Ye&62914560)===Ye&&300>ge()-lh?(ot&2)===0&&sl(s,0):Dp|=o,tl===Ye&&(tl=0)),wi(s)}function x1(s,r){r===0&&(r=ud()),s=za(s,r),s!==null&&(Aa(s,r),wi(s))}function KR(s){var r=s.memoizedState,o=0;r!==null&&(o=r.retryLane),x1(s,o)}function $R(s,r){var o=0;switch(s.tag){case 31:case 13:var u=s.stateNode,m=s.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(r),x1(s,o)}function YR(s,r){return It(s,r)}var ph=null,rl=null,zp=!1,gh=!1,Bp=!1,Ur=0;function wi(s){s!==rl&&s.next===null&&(rl===null?ph=rl=s:rl=rl.next=s),gh=!0,zp||(zp=!0,WR())}function zc(s,r){if(!Bp&&gh){Bp=!0;do for(var o=!1,u=ph;u!==null;){if(s!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var _=u.suspendedLanes,A=u.pingedLanes;y=(1<<31-Ct(42|s)+1)-1,y&=m&~(_&~A),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,T1(u,y))}else y=Ye,y=ii(u,u===yt?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Ds(u,y)||(o=!0,T1(u,y));u=u.next}while(o);Bp=!1}}function QR(){b1()}function b1(){gh=zp=!1;var s=0;Ur!==0&&aj()&&(s=Ur);for(var r=ge(),o=null,u=ph;u!==null;){var m=u.next,y=_1(u,r);y===0?(u.next=null,o===null?ph=m:o.next=m,m===null&&(rl=o)):(o=u,(s!==0||(y&3)!==0)&&(gh=!0)),u=m}an!==0&&an!==5||zc(s),Ur!==0&&(Ur=0)}function _1(s,r){for(var o=s.suspendedLanes,u=s.pingedLanes,m=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var _=31-Ct(y),A=1<<_,P=m[_];P===-1?((A&o)===0||(A&u)!==0)&&(m[_]=gm(A,r)):P<=r&&(s.expiredLanes|=A),y&=~A}if(r=yt,o=Ye,o=ii(s,s===r?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,o===0||s===r&&(ut===2||ut===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&U(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Ds(s,o)){if(r=o&-o,r===s.callbackPriority)return r;switch(u!==null&&U(u),ki(o)){case 2:case 8:o=Ce;break;case 32:o=Ge;break;case 268435456:o=qt;break;default:o=Ge}return u=w1.bind(null,s),o=It(o,u),s.callbackPriority=r,s.callbackNode=o,r}return u!==null&&u!==null&&U(u),s.callbackPriority=2,s.callbackNode=null,2}function w1(s,r){if(an!==0&&an!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(mh()&&s.callbackNode!==o)return null;var u=Ye;return u=ii(s,s===yt?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(s1(s,u,r),_1(s,ge()),s.callbackNode!=null&&s.callbackNode===o?w1.bind(null,s):null)}function T1(s,r){if(mh())return null;s1(s,r,!0)}function WR(){lj(function(){(ot&6)!==0?It(fe,QR):b1()})}function Fp(){if(Ur===0){var s=Ho;s===0&&(s=ni,ni<<=1,(ni&261888)===0&&(ni=256)),Ur=s}return Ur}function E1(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ro(""+s)}function S1(s,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,s.id&&o.setAttribute("form",s.id),r.parentNode.insertBefore(o,r),s=new FormData(s),o.parentNode.removeChild(o),s}function XR(s,r,o,u,m){if(r==="submit"&&o&&o.stateNode===m){var y=E1((m[cn]||null).action),_=u.submitter;_&&(r=(r=_[cn]||null)?E1(r.formAction):_.getAttribute("formAction"),r!==null&&(y=r,_=null));var A=new pi("action","action",null,u,m);s.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ur!==0){var P=_?S1(m,_):new FormData(m);lp(o,{pending:!0,data:P,method:m.method,action:y},null,P)}}else typeof y=="function"&&(A.preventDefault(),P=_?S1(m,_):new FormData(m),lp(o,{pending:!0,data:P,method:m.method,action:y},y,P))},currentTarget:m}]})}}for(var qp=0;qp<Sm.length;qp++){var Hp=Sm[qp],JR=Hp.toLowerCase(),ZR=Hp[0].toUpperCase()+Hp.slice(1);zs(JR,"on"+ZR)}zs(nx,"onAnimationEnd"),zs(sx,"onAnimationIteration"),zs(ix,"onAnimationStart"),zs("dblclick","onDoubleClick"),zs("focusin","onFocus"),zs("focusout","onBlur"),zs(pR,"onTransitionRun"),zs(gR,"onTransitionStart"),zs(yR,"onTransitionCancel"),zs(rx,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ej=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bc));function A1(s,r){r=(r&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],m=u.event;u=u.listeners;e:{var y=void 0;if(r)for(var _=u.length-1;0<=_;_--){var A=u[_],P=A.instance,W=A.currentTarget;if(A=A.listener,P!==y&&m.isPropagationStopped())break e;y=A,m.currentTarget=W;try{y(m)}catch(ae){Id(ae)}m.currentTarget=null,y=P}else for(_=0;_<u.length;_++){if(A=u[_],P=A.instance,W=A.currentTarget,A=A.listener,P!==y&&m.isPropagationStopped())break e;y=A,m.currentTarget=W;try{y(m)}catch(ae){Id(ae)}m.currentTarget=null,y=P}}}}function $e(s,r){var o=r[Eo];o===void 0&&(o=r[Eo]=new Set);var u=s+"__bubble";o.has(u)||(N1(r,s,2,!1),o.add(u))}function Gp(s,r,o){var u=0;r&&(u|=4),N1(o,s,u,r)}var yh="_reactListening"+Math.random().toString(36).slice(2);function Kp(s){if(!s[yh]){s[yh]=!0,Zl.forEach(function(o){o!=="selectionchange"&&(ej.has(o)||Gp(o,!1,s),Gp(o,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[yh]||(r[yh]=!0,Gp("selectionchange",!1,r))}}function N1(s,r,o,u){switch(n_(r)){case 2:var m=Cj;break;case 8:m=Rj;break;default:m=og}o=m.bind(null,r,o,s),m=void 0,!Da||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),u?m!==void 0?s.addEventListener(r,o,{capture:!0,passive:m}):s.addEventListener(r,o,!0):m!==void 0?s.addEventListener(r,o,{passive:m}):s.addEventListener(r,o,!1)}function $p(s,r,o,u,m){var y=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var A=u.stateNode.containerInfo;if(A===m)break;if(_===4)for(_=u.return;_!==null;){var P=_.tag;if((P===3||P===4)&&_.stateNode.containerInfo===m)return;_=_.return}for(;A!==null;){if(_=li(A),_===null)return;if(P=_.tag,P===5||P===6||P===26||P===27){u=y=_;continue e}A=A.parentNode}}u=u.return}br(function(){var W=y,ae=ms(o),de=[];e:{var J=ax.get(s);if(J!==void 0){var se=pi,Se=s;switch(s){case"keypress":if(Ma(o)===0)break e;case"keydown":case"keyup":se=Cd;break;case"focusin":Se="focus",se=Oa;break;case"focusout":Se="blur",se=Oa;break;case"beforeblur":case"afterblur":se=Oa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=b;break;case nx:case sx:case ix:se=_d;break;case rx:se=C;break;case"scroll":case"scrollend":se=dc;break;case"wheel":se=ne;break;case"copy":case"cut":case"paste":se=wd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Li;break;case"toggle":case"beforetoggle":se=Be}var Me=(r&4)!==0,pt=!Me&&(s==="scroll"||s==="scrollend"),G=Me?J!==null?J+"Capture":null:J;Me=[];for(var F=W,Y;F!==null;){var ce=F;if(Y=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Y===null||G===null||(ce=Os(F,G),ce!=null&&Me.push(Fc(F,ce,Y))),pt)break;F=F.return}0<Me.length&&(J=new se(J,Se,null,o,ae),de.push({event:J,listeners:Me}))}}if((r&7)===0){e:{if(J=s==="mouseover"||s==="pointerover",se=s==="mouseout"||s==="pointerout",J&&o!==lc&&(Se=o.relatedTarget||o.fromElement)&&(li(Se)||Se[ai]))break e;if((se||J)&&(J=ae.window===ae?ae:(J=ae.ownerDocument)?J.defaultView||J.parentWindow:window,se?(Se=o.relatedTarget||o.toElement,se=W,Se=Se?li(Se):null,Se!==null&&(pt=l(Se),Me=Se.tag,Se!==pt||Me!==5&&Me!==27&&Me!==6)&&(Se=null)):(se=null,Se=W),se!==Se)){if(Me=hc,ce="onMouseLeave",G="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(Me=Li,ce="onPointerLeave",G="onPointerEnter",F="pointer"),pt=se==null?J:Wn(se),Y=Se==null?J:Wn(Se),J=new Me(ce,F+"leave",se,o,ae),J.target=pt,J.relatedTarget=Y,ce=null,li(ae)===W&&(Me=new Me(G,F+"enter",Se,o,ae),Me.target=Y,Me.relatedTarget=pt,ce=Me),pt=ce,se&&Se)t:{for(Me=tj,G=se,F=Se,Y=0,ce=G;ce;ce=Me(ce))Y++;ce=0;for(var Ie=F;Ie;Ie=Me(Ie))ce++;for(;0<Y-ce;)G=Me(G),Y--;for(;0<ce-Y;)F=Me(F),ce--;for(;Y--;){if(G===F||F!==null&&G===F.alternate){Me=G;break t}G=Me(G),F=Me(F)}Me=null}else Me=null;se!==null&&C1(de,J,se,Me,!1),Se!==null&&pt!==null&&C1(de,pt,Se,Me,!0)}}e:{if(J=W?Wn(W):window,se=J.nodeName&&J.nodeName.toLowerCase(),se==="select"||se==="input"&&J.type==="file")var it=Gv;else if(qv(J))if(Kv)it=hR;else{it=uR;var Ae=cR}else se=J.nodeName,!se||se.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?W&&Co(W.elementType)&&(it=Gv):it=dR;if(it&&(it=it(s,W))){Hv(de,it,o,ae);break e}Ae&&Ae(s,J,W),s==="focusout"&&W&&J.type==="number"&&W.memoizedProps.value!=null&&rc(J,"number",J.value)}switch(Ae=W?Wn(W):window,s){case"focusin":(qv(Ae)||Ae.contentEditable==="true")&&(Oo=Ae,wm=W,yc=null);break;case"focusout":yc=wm=Oo=null;break;case"mousedown":Tm=!0;break;case"contextmenu":case"mouseup":case"dragend":Tm=!1,ex(de,o,ae);break;case"selectionchange":if(mR)break;case"keydown":case"keyup":ex(de,o,ae)}var He;if(at)e:{switch(s){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else ko?Pa(s,o)&&(Qe="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(Qe="onCompositionStart");Qe&&(vi&&o.locale!=="ko"&&(ko||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&ko&&(He=uc()):(mi=ae,cc="value"in mi?mi.value:mi.textContent,ko=!0)),Ae=vh(W,Qe),0<Ae.length&&(Qe=new yi(Qe,s,null,o,ae),de.push({event:Qe,listeners:Ae}),He?Qe.data=He:(He=Mo(o),He!==null&&(Qe.data=He)))),(He=gs?rR(s,o):aR(s,o))&&(Qe=vh(W,"onBeforeInput"),0<Qe.length&&(Ae=new yi("onBeforeInput","beforeinput",null,o,ae),de.push({event:Ae,listeners:Qe}),Ae.data=He)),XR(de,s,W,o,ae)}A1(de,r)})}function Fc(s,r,o){return{instance:s,listener:r,currentTarget:o}}function vh(s,r){for(var o=r+"Capture",u=[];s!==null;){var m=s,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Os(s,o),m!=null&&u.unshift(Fc(s,m,y)),m=Os(s,r),m!=null&&u.push(Fc(s,m,y))),s.tag===3)return u;s=s.return}return[]}function tj(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function C1(s,r,o,u,m){for(var y=r._reactName,_=[];o!==null&&o!==u;){var A=o,P=A.alternate,W=A.stateNode;if(A=A.tag,P!==null&&P===u)break;A!==5&&A!==26&&A!==27||W===null||(P=W,m?(W=Os(o,y),W!=null&&_.unshift(Fc(o,W,P))):m||(W=Os(o,y),W!=null&&_.push(Fc(o,W,P)))),o=o.return}_.length!==0&&s.push({event:r,listeners:_})}var nj=/\r\n?/g,sj=/\u0000|\uFFFD/g;function R1(s){return(typeof s=="string"?s:""+s).replace(nj,`
`).replace(sj,"")}function j1(s,r){return r=R1(r),R1(s)===r}function mt(s,r,o,u,m,y){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||zn(s,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&zn(s,""+u);break;case"className":Xn(s,"class",u);break;case"tabIndex":Xn(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Xn(s,o,u);break;case"style":oc(s,u,y);break;case"data":if(r!=="object"){Xn(s,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=Ro(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(r!=="input"&&mt(s,r,"name",m.name,m,null),mt(s,r,"formEncType",m.formEncType,m,null),mt(s,r,"formMethod",m.formMethod,m,null),mt(s,r,"formTarget",m.formTarget,m,null)):(mt(s,r,"encType",m.encType,m,null),mt(s,r,"method",m.method,m,null),mt(s,r,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=Ro(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=ks);break;case"onScroll":u!=null&&$e("scroll",s);break;case"onScrollEnd":u!=null&&$e("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=Ro(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":$e("beforetoggle",s),$e("toggle",s),Ao(s,"popover",u);break;case"xlinkActuate":$t(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":$t(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":$t(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":$t(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":$t(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":$t(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":$t(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":$t(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":$t(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ao(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=vd.get(o)||o,Ao(s,o,u))}}function Yp(s,r,o,u,m,y){switch(o){case"style":oc(s,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=o}}break;case"children":typeof u=="string"?zn(s,u):(typeof u=="number"||typeof u=="bigint")&&zn(s,""+u);break;case"onScroll":u!=null&&$e("scroll",s);break;case"onScrollEnd":u!=null&&$e("scrollend",s);break;case"onClick":u!=null&&(s.onclick=ks);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ec.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),r=o.slice(2,m?o.length-7:void 0),y=s[cn]||null,y=y!=null?y[o]:null,typeof y=="function"&&s.removeEventListener(r,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(r,u,m);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):Ao(s,o,u)}}}function xn(s,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",s),$e("load",s);var u=!1,m=!1,y;for(y in o)if(o.hasOwnProperty(y)){var _=o[y];if(_!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:mt(s,r,y,_,o,null)}}m&&mt(s,r,"srcSet",o.srcSet,o,null),u&&mt(s,r,"src",o.src,o,null);return;case"input":$e("invalid",s);var A=y=_=m=null,P=null,W=null;for(u in o)if(o.hasOwnProperty(u)){var ae=o[u];if(ae!=null)switch(u){case"name":m=ae;break;case"type":_=ae;break;case"checked":P=ae;break;case"defaultChecked":W=ae;break;case"value":y=ae;break;case"defaultValue":A=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,r));break;default:mt(s,r,u,ae,o,null)}}pd(s,y,A,P,W,_,m,!1);return;case"select":$e("invalid",s),u=_=y=null;for(m in o)if(o.hasOwnProperty(m)&&(A=o[m],A!=null))switch(m){case"value":y=A;break;case"defaultValue":_=A;break;case"multiple":u=A;default:mt(s,r,m,A,o,null)}r=y,o=_,s.multiple=!!u,r!=null?gr(s,!!u,r,!1):o!=null&&gr(s,!!u,o,!0);return;case"textarea":$e("invalid",s),y=m=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(A=o[_],A!=null))switch(_){case"value":u=A;break;case"defaultValue":m=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:mt(s,r,_,A,o,null)}yr(s,u,m,y);return;case"option":for(P in o)if(o.hasOwnProperty(P)&&(u=o[P],u!=null))switch(P){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:mt(s,r,P,u,o,null)}return;case"dialog":$e("beforetoggle",s),$e("toggle",s),$e("cancel",s),$e("close",s);break;case"iframe":case"object":$e("load",s);break;case"video":case"audio":for(u=0;u<Bc.length;u++)$e(Bc[u],s);break;case"image":$e("error",s),$e("load",s);break;case"details":$e("toggle",s);break;case"embed":case"source":case"link":$e("error",s),$e("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in o)if(o.hasOwnProperty(W)&&(u=o[W],u!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:mt(s,r,W,u,o,null)}return;default:if(Co(r)){for(ae in o)o.hasOwnProperty(ae)&&(u=o[ae],u!==void 0&&Yp(s,r,ae,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&mt(s,r,A,u,o,null))}function ij(s,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,_=null,A=null,P=null,W=null,ae=null;for(se in o){var de=o[se];if(o.hasOwnProperty(se)&&de!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":P=de;default:u.hasOwnProperty(se)||mt(s,r,se,null,u,de)}}for(var J in u){var se=u[J];if(de=o[J],u.hasOwnProperty(J)&&(se!=null||de!=null))switch(J){case"type":y=se;break;case"name":m=se;break;case"checked":W=se;break;case"defaultChecked":ae=se;break;case"value":_=se;break;case"defaultValue":A=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,r));break;default:se!==de&&mt(s,r,J,se,u,de)}}No(s,_,A,P,W,ae,y,m);return;case"select":se=_=A=J=null;for(y in o)if(P=o[y],o.hasOwnProperty(y)&&P!=null)switch(y){case"value":break;case"multiple":se=P;default:u.hasOwnProperty(y)||mt(s,r,y,null,u,P)}for(m in u)if(y=u[m],P=o[m],u.hasOwnProperty(m)&&(y!=null||P!=null))switch(m){case"value":J=y;break;case"defaultValue":A=y;break;case"multiple":_=y;default:y!==P&&mt(s,r,m,y,u,P)}r=A,o=_,u=se,J!=null?gr(s,!!o,J,!1):!!u!=!!o&&(r!=null?gr(s,!!o,r,!0):gr(s,!!o,o?[]:"",!1));return;case"textarea":se=J=null;for(A in o)if(m=o[A],o.hasOwnProperty(A)&&m!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:mt(s,r,A,null,u,m)}for(_ in u)if(m=u[_],y=o[_],u.hasOwnProperty(_)&&(m!=null||y!=null))switch(_){case"value":J=m;break;case"defaultValue":se=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==y&&mt(s,r,_,m,u,y)}gd(s,J,se);return;case"option":for(var Se in o)if(J=o[Se],o.hasOwnProperty(Se)&&J!=null&&!u.hasOwnProperty(Se))switch(Se){case"selected":s.selected=!1;break;default:mt(s,r,Se,null,u,J)}for(P in u)if(J=u[P],se=o[P],u.hasOwnProperty(P)&&J!==se&&(J!=null||se!=null))switch(P){case"selected":s.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:mt(s,r,P,J,u,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in o)J=o[Me],o.hasOwnProperty(Me)&&J!=null&&!u.hasOwnProperty(Me)&&mt(s,r,Me,null,u,J);for(W in u)if(J=u[W],se=o[W],u.hasOwnProperty(W)&&J!==se&&(J!=null||se!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,r));break;default:mt(s,r,W,J,u,se)}return;default:if(Co(r)){for(var pt in o)J=o[pt],o.hasOwnProperty(pt)&&J!==void 0&&!u.hasOwnProperty(pt)&&Yp(s,r,pt,void 0,u,J);for(ae in u)J=u[ae],se=o[ae],!u.hasOwnProperty(ae)||J===se||J===void 0&&se===void 0||Yp(s,r,ae,J,u,se);return}}for(var G in o)J=o[G],o.hasOwnProperty(G)&&J!=null&&!u.hasOwnProperty(G)&&mt(s,r,G,null,u,J);for(de in u)J=u[de],se=o[de],!u.hasOwnProperty(de)||J===se||J==null&&se==null||mt(s,r,de,J,u,se)}function I1(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rj(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],y=m.transferSize,_=m.initiatorType,A=m.duration;if(y&&A&&I1(_)){for(_=0,A=m.responseEnd,u+=1;u<o.length;u++){var P=o[u],W=P.startTime;if(W>A)break;var ae=P.transferSize,de=P.initiatorType;ae&&I1(de)&&(P=P.responseEnd,_+=ae*(P<A?1:(A-W)/(P-W)))}if(--u,r+=8*(y+_)/(m.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Qp=null,Wp=null;function xh(s){return s.nodeType===9?s:s.ownerDocument}function D1(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function V1(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Xp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Jp=null;function aj(){var s=window.event;return s&&s.type==="popstate"?s===Jp?!1:(Jp=s,!0):(Jp=null,!1)}var M1=typeof setTimeout=="function"?setTimeout:void 0,oj=typeof clearTimeout=="function"?clearTimeout:void 0,k1=typeof Promise=="function"?Promise:void 0,lj=typeof queueMicrotask=="function"?queueMicrotask:typeof k1<"u"?function(s){return k1.resolve(null).then(s).catch(cj)}:M1;function cj(s){setTimeout(function(){throw s})}function zr(s){return s==="head"}function O1(s,r){var o=r,u=0;do{var m=o.nextSibling;if(s.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){s.removeChild(m),cl(r);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")qc(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,qc(o);for(var y=o.firstChild;y;){var _=y.nextSibling,A=y.nodeName;y[oi]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=_}}else o==="body"&&qc(s.ownerDocument.body);o=m}while(o);cl(r)}function P1(s,r){var o=s;s=0;do{var u=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=u}while(o)}function Zp(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Zp(o),So(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function uj(s,r,o,u){for(;s.nodeType===1;){var m=o;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[oi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=Ts(s.nextSibling),s===null)break}return null}function dj(s,r,o){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Ts(s.nextSibling),s===null))return null;return s}function L1(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Ts(s.nextSibling),s===null))return null;return s}function eg(s){return s.data==="$?"||s.data==="$~"}function tg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function hj(s,r){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||o.readyState!=="loading")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Ts(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var ng=null;function U1(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(r===0)return Ts(s.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}s=s.nextSibling}return null}function z1(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return s;r--}else o!=="/$"&&o!=="/&"||r++}s=s.previousSibling}return null}function B1(s,r,o){switch(r=xh(o),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function qc(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);So(s)}var Es=new Map,F1=new Set;function bh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Zi=X.d;X.d={f:fj,r:mj,D:pj,C:gj,L:yj,m:vj,X:bj,S:xj,M:_j};function fj(){var s=Zi.f(),r=dh();return s||r}function mj(s){var r=fs(s);r!==null&&r.tag===5&&r.type==="form"?rb(r):Zi.r(s)}var al=typeof document>"u"?null:document;function q1(s,r,o){var u=al;if(u&&typeof r=="string"&&r){var m=Un(r);m='link[rel="'+s+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),F1.has(m)||(F1.add(m),s={rel:s,crossOrigin:o,href:r},u.querySelector(m)===null&&(r=u.createElement("link"),xn(r,"link",s),Kt(r),u.head.appendChild(r)))}}function pj(s){Zi.D(s),q1("dns-prefetch",s,null)}function gj(s,r){Zi.C(s,r),q1("preconnect",s,r)}function yj(s,r,o){Zi.L(s,r,o);var u=al;if(u&&s&&r){var m='link[rel="preload"][as="'+Un(r)+'"]';r==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Un(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Un(o.imageSizes)+'"]')):m+='[href="'+Un(s)+'"]';var y=m;switch(r){case"style":y=ol(s);break;case"script":y=ll(s)}Es.has(y)||(s=x({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:s,as:r},o),Es.set(y,s),u.querySelector(m)!==null||r==="style"&&u.querySelector(Hc(y))||r==="script"&&u.querySelector(Gc(y))||(r=u.createElement("link"),xn(r,"link",s),Kt(r),u.head.appendChild(r)))}}function vj(s,r){Zi.m(s,r);var o=al;if(o&&s){var u=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+Un(u)+'"][href="'+Un(s)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=ll(s)}if(!Es.has(y)&&(s=x({rel:"modulepreload",href:s},r),Es.set(y,s),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Gc(y)))return}u=o.createElement("link"),xn(u,"link",s),Kt(u),o.head.appendChild(u)}}}function xj(s,r,o){Zi.S(s,r,o);var u=al;if(u&&s){var m=ci(u).hoistableStyles,y=ol(s);r=r||"default";var _=m.get(y);if(!_){var A={loading:0,preload:null};if(_=u.querySelector(Hc(y)))A.loading=5;else{s=x({rel:"stylesheet",href:s,"data-precedence":r},o),(o=Es.get(y))&&sg(s,o);var P=_=u.createElement("link");Kt(P),xn(P,"link",s),P._p=new Promise(function(W,ae){P.onload=W,P.onerror=ae}),P.addEventListener("load",function(){A.loading|=1}),P.addEventListener("error",function(){A.loading|=2}),A.loading|=4,_h(_,r,u)}_={type:"stylesheet",instance:_,count:1,state:A},m.set(y,_)}}}function bj(s,r){Zi.X(s,r);var o=al;if(o&&s){var u=ci(o).hoistableScripts,m=ll(s),y=u.get(m);y||(y=o.querySelector(Gc(m)),y||(s=x({src:s,async:!0},r),(r=Es.get(m))&&ig(s,r),y=o.createElement("script"),Kt(y),xn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function _j(s,r){Zi.M(s,r);var o=al;if(o&&s){var u=ci(o).hoistableScripts,m=ll(s),y=u.get(m);y||(y=o.querySelector(Gc(m)),y||(s=x({src:s,async:!0,type:"module"},r),(r=Es.get(m))&&ig(s,r),y=o.createElement("script"),Kt(y),xn(y,"link",s),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function H1(s,r,o,u){var m=(m=ke.current)?bh(m):null;if(!m)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=ol(o.href),o=ci(m).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=ol(o.href);var y=ci(m).hoistableStyles,_=y.get(s);if(_||(m=m.ownerDocument||m,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,_),(y=m.querySelector(Hc(s)))&&!y._p&&(_.instance=y,_.state.loading=5),Es.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Es.set(s,o),y||wj(m,s,o,_.state))),r&&u===null)throw Error(i(528,""));return _}if(r&&u!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ll(o),o=ci(m).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ol(s){return'href="'+Un(s)+'"'}function Hc(s){return'link[rel="stylesheet"]['+s+"]"}function G1(s){return x({},s,{"data-precedence":s.precedence,precedence:null})}function wj(s,r,o,u){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=s.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),xn(r,"link",o),Kt(r),s.head.appendChild(r))}function ll(s){return'[src="'+Un(s)+'"]'}function Gc(s){return"script[async]"+s}function K1(s,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=s.querySelector('style[data-href~="'+Un(o.href)+'"]');if(u)return r.instance=u,Kt(u),u;var m=x({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Kt(u),xn(u,"style",m),_h(u,o.precedence,s),r.instance=u;case"stylesheet":m=ol(o.href);var y=s.querySelector(Hc(m));if(y)return r.state.loading|=4,r.instance=y,Kt(y),y;u=G1(o),(m=Es.get(m))&&sg(u,m),y=(s.ownerDocument||s).createElement("link"),Kt(y);var _=y;return _._p=new Promise(function(A,P){_.onload=A,_.onerror=P}),xn(y,"link",u),r.state.loading|=4,_h(y,o.precedence,s),r.instance=y;case"script":return y=ll(o.src),(m=s.querySelector(Gc(y)))?(r.instance=m,Kt(m),m):(u=o,(m=Es.get(y))&&(u=x({},o),ig(u,m)),s=s.ownerDocument||s,m=s.createElement("script"),Kt(m),xn(m,"link",u),s.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,_h(u,o.precedence,s));return r.instance}function _h(s,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,_=0;_<u.length;_++){var A=u[_];if(A.dataset.precedence===r)y=A;else if(y!==m)break}y?y.parentNode.insertBefore(s,y.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(s,r.firstChild))}function sg(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function ig(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var wh=null;function $1(s,r,o){if(wh===null){var u=new Map,m=wh=new Map;m.set(o,u)}else m=wh,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),m=0;m<o.length;m++){var y=o[m];if(!(y[oi]||y[Gt]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(r)||"";_=s+_;var A=u.get(_);A?A.push(y):u.set(_,[y])}}return u}function Y1(s,r,o){s=s.ownerDocument||s,s.head.insertBefore(o,r==="title"?s.querySelector("head > title"):null)}function Tj(s,r,o){if(o===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Q1(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Ej(s,r,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=ol(u.href),y=r.querySelector(Hc(m));if(y){r=y._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=Th.bind(s),r.then(s,s)),o.state.loading|=4,o.instance=y,Kt(y);return}y=r.ownerDocument||r,u=G1(u),(m=Es.get(m))&&sg(u,m),y=y.createElement("link"),Kt(y);var _=y;_._p=new Promise(function(A,P){_.onload=A,_.onerror=P}),xn(y,"link",u),o.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=Th.bind(s),r.addEventListener("load",o),r.addEventListener("error",o))}}var rg=0;function Sj(s,r){return s.stylesheets&&s.count===0&&Sh(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var u=setTimeout(function(){if(s.stylesheets&&Sh(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+r);0<s.imgBytes&&rg===0&&(rg=62500*rj());var m=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Sh(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>rg?50:800)+r);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Th(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Eh=null;function Sh(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Eh=new Map,r.forEach(Aj,s),Eh=null,Th.call(s))}function Aj(s,r){if(!(r.state.loading&4)){var o=Eh.get(s);if(o)var u=o.get(null);else{o=new Map,Eh.set(s,o);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var _=m[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}m=r.instance,_=m.getAttribute("data-precedence"),y=o.get(_)||u,y===u&&o.set(null,m),o.set(_,m),this.count++,u=Th.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),r.state.loading|=4}}var Kc={$$typeof:K,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function Nj(s,r,o,u,m,y,_,A,P){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ri(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ri(0),this.hiddenUpdates=ri(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function W1(s,r,o,u,m,y,_,A,P,W,ae,de){return s=new Nj(s,r,o,_,P,W,ae,de,A),r=1,y===!0&&(r|=24),y=Zn(3,null,null,r),s.current=y,y.stateNode=s,r=Lm(),r.refCount++,s.pooledCache=r,r.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:r},Fm(y),s}function X1(s){return s?(s=Uo,s):Uo}function J1(s,r,o,u,m,y){m=X1(m),u.context===null?u.context=m:u.pendingContext=m,u=Rr(r),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=jr(s,u,r),o!==null&&(Gn(o,s,r),Ec(o,s,r))}function Z1(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<r?o:r}}function ag(s,r){Z1(s,r),(s=s.alternate)&&Z1(s,r)}function e_(s){if(s.tag===13||s.tag===31){var r=za(s,67108864);r!==null&&Gn(r,s,67108864),ag(s,67108864)}}function t_(s){if(s.tag===13||s.tag===31){var r=is();r=Ca(r);var o=za(s,r);o!==null&&Gn(o,s,r),ag(s,r)}}var Ah=!0;function Cj(s,r,o,u){var m=ee.T;ee.T=null;var y=X.p;try{X.p=2,og(s,r,o,u)}finally{X.p=y,ee.T=m}}function Rj(s,r,o,u){var m=ee.T;ee.T=null;var y=X.p;try{X.p=8,og(s,r,o,u)}finally{X.p=y,ee.T=m}}function og(s,r,o,u){if(Ah){var m=lg(u);if(m===null)$p(s,r,u,Nh,o),s_(s,u);else if(Ij(m,s,r,o,u))u.stopPropagation();else if(s_(s,u),r&4&&-1<jj.indexOf(s)){for(;m!==null;){var y=fs(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=si(y.pendingLanes);if(_!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;_;){var P=1<<31-Ct(_);A.entanglements[1]|=P,_&=~P}wi(y),(ot&6)===0&&(ch=ge()+500,zc(0))}}break;case 31:case 13:A=za(y,2),A!==null&&Gn(A,y,2),dh(),ag(y,2)}if(y=lg(u),y===null&&$p(s,r,u,Nh,o),y===m)break;m=y}m!==null&&u.stopPropagation()}else $p(s,r,u,null,o)}}function lg(s){return s=ms(s),cg(s)}var Nh=null;function cg(s){if(Nh=null,s=li(s),s!==null){var r=l(s);if(r===null)s=null;else{var o=r.tag;if(o===13){if(s=c(r),s!==null)return s;s=null}else if(o===31){if(s=h(r),s!==null)return s;s=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Nh=s,null}function n_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pe()){case fe:return 2;case Ce:return 8;case Ge:case st:return 32;case qt:return 268435456;default:return 32}default:return 32}}var ug=!1,Br=null,Fr=null,qr=null,$c=new Map,Yc=new Map,Hr=[],jj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s_(s,r){switch(s){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":$c.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yc.delete(r.pointerId)}}function Qc(s,r,o,u,m,y){return s===null||s.nativeEvent!==y?(s={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},r!==null&&(r=fs(r),r!==null&&e_(r)),s):(s.eventSystemFlags|=u,r=s.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),s)}function Ij(s,r,o,u,m){switch(r){case"focusin":return Br=Qc(Br,s,r,o,u,m),!0;case"dragenter":return Fr=Qc(Fr,s,r,o,u,m),!0;case"mouseover":return qr=Qc(qr,s,r,o,u,m),!0;case"pointerover":var y=m.pointerId;return $c.set(y,Qc($c.get(y)||null,s,r,o,u,m)),!0;case"gotpointercapture":return y=m.pointerId,Yc.set(y,Qc(Yc.get(y)||null,s,r,o,u,m)),!0}return!1}function i_(s){var r=li(s.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){s.blockedOn=r,Vs(s.priority,function(){t_(o)});return}}else if(r===31){if(r=h(o),r!==null){s.blockedOn=r,Vs(s.priority,function(){t_(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ch(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var o=lg(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);lc=u,o.target.dispatchEvent(u),lc=null}else return r=fs(o),r!==null&&e_(r),s.blockedOn=o,!1;r.shift()}return!0}function r_(s,r,o){Ch(s)&&o.delete(r)}function Dj(){ug=!1,Br!==null&&Ch(Br)&&(Br=null),Fr!==null&&Ch(Fr)&&(Fr=null),qr!==null&&Ch(qr)&&(qr=null),$c.forEach(r_),Yc.forEach(r_)}function Rh(s,r){s.blockedOn===r&&(s.blockedOn=null,ug||(ug=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Dj)))}var jh=null;function a_(s){jh!==s&&(jh=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){jh===s&&(jh=null);for(var r=0;r<s.length;r+=3){var o=s[r],u=s[r+1],m=s[r+2];if(typeof u!="function"){if(cg(u||o)===null)continue;break}var y=fs(o);y!==null&&(s.splice(r,3),r-=3,lp(y,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function cl(s){function r(P){return Rh(P,s)}Br!==null&&Rh(Br,s),Fr!==null&&Rh(Fr,s),qr!==null&&Rh(qr,s),$c.forEach(r),Yc.forEach(r);for(var o=0;o<Hr.length;o++){var u=Hr[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Hr.length&&(o=Hr[0],o.blockedOn===null);)i_(o),o.blockedOn===null&&Hr.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],y=o[u+1],_=m[cn]||null;if(typeof y=="function")_||a_(o);else if(_){var A=null;if(y&&y.hasAttribute("formAction")){if(m=y,_=y[cn]||null)A=_.formAction;else if(cg(m)!==null)continue}else A=_.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),a_(o)}}}function o_(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(_){return m=_})},focusReset:"manual",scroll:"manual"})}function r(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),m!==null&&(m(),m=null)}}}function dg(s){this._internalRoot=s}Ih.prototype.render=dg.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,u=is();J1(o,u,s,r,null,null)},Ih.prototype.unmount=dg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;J1(s.current,2,null,s,null,null),dh(),r[ai]=null}};function Ih(s){this._internalRoot=s}Ih.prototype.unstable_scheduleHydration=function(s){if(s){var r=dd();s={blockedOn:null,target:s,priority:r};for(var o=0;o<Hr.length&&r!==0&&r<Hr[o].priority;o++);Hr.splice(o,0,s),o===0&&i_(s)}};var l_=e.version;if(l_!=="19.2.3")throw Error(i(527,l_,"19.2.3"));X.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=g(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var Vj={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{Qn=Dh.inject(Vj),Pt=Dh}catch{}}return Xc.createRoot=function(s,r){if(!a(s))throw Error(i(299));var o=!1,u="",m=pb,y=gb,_=yb;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=W1(s,1,!1,null,null,o,u,null,m,y,_,o_),s[ai]=r.current,Kp(s),new dg(r)},Xc.hydrateRoot=function(s,r,o){if(!a(s))throw Error(i(299));var u=!1,m="",y=pb,_=gb,A=yb,P=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.formState!==void 0&&(P=o.formState)),r=W1(s,1,!0,r,o??null,u,m,P,y,_,A,o_),r.context=X1(null),o=r.current,u=is(),u=Ca(u),m=Rr(u),m.callback=null,jr(o,m,u),o=u,r.current.lanes=o,Aa(r,o),wi(r),s[ai]=r.current,Kp(s),new Ih(r)},Xc.version="19.2.3",Xc}var v_;function qj(){if(v_)return mg.exports;v_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),mg.exports=Fj(),mg.exports}var Hj=qj();const Gj=qT(Hj),Kj=()=>{};var x_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},$j=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const a=t[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],c=t[n++],h=t[n++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=t[n++],c=t[n++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},GT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<t.length;a+=3){const l=t[a],c=a+1<t.length,h=c?t[a+1]:0,p=a+2<t.length,g=p?t[a+2]:0,v=l>>2,x=(l&3)<<4|h>>4;let w=(h&15)<<2|g>>6,E=g&63;p||(E=64,c||(w=64)),i.push(n[v],n[x],n[w],n[E])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(HT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$j(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],h=a<t.length?n[t.charAt(a)]:0;++a;const g=a<t.length?n[t.charAt(a)]:64;++a;const x=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||h==null||g==null||x==null)throw new Yj;const w=l<<2|h>>4;if(i.push(w),g!==64){const E=h<<4&240|g>>2;if(i.push(E),x!==64){const j=g<<6&192|x;i.push(j)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Yj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Qj=function(t){const e=HT(t);return GT.encodeByteArray(e,!0)},af=function(t){return Qj(t).replace(/\./g,"")},KT=function(t){try{return GT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=()=>Wj().__FIREBASE_DEFAULTS__,Jj=()=>{if(typeof process>"u"||typeof x_>"u")return;const t=x_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Zj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&KT(t[1]);return e&&JSON.parse(e)},Of=()=>{try{return Kj()||Xj()||Jj()||Zj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$T=t=>{var e,n;return(n=(e=Of())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},eI=t=>{const e=$T(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},YT=()=>{var t;return(t=Of())==null?void 0:t.config},QT=t=>{var e;return(e=Of())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function WT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...t};return[af(JSON.stringify(n)),af(JSON.stringify(c)),""].join(".")}const uu={};function sI(){const t={prod:[],emulator:[]};for(const e of Object.keys(uu))uu[e]?t.emulator.push(e):t.prod.push(e);return t}function iI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let b_=!1;function XT(t,e){if(typeof window>"u"||typeof document>"u"||!Ul(window.location.host)||uu[t]===e||uu[t]||b_)return;uu[t]=e;function n(w){return`__firebase__banner__${w}`}const i="__firebase__banner",l=sI().prod.length>0;function c(){const w=document.getElementById(i);w&&w.remove()}function h(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,E){w.setAttribute("width","24"),w.setAttribute("id",E),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function g(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{b_=!0,c()},w}function v(w,E){w.setAttribute("id",E),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function x(){const w=iI(i),E=n("text"),j=document.getElementById(E)||document.createElement("span"),M=n("learnmore"),V=document.getElementById(M)||document.createElement("a"),q=n("preprendIcon"),B=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const K=w.element;h(K),v(V,M);const oe=g();p(B,q),K.append(B,j,V,oe),document.body.appendChild(K)}l?(j.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(In())}function aI(){var e;const t=(e=Of())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cI(){const t=In();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uI(){return!aI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZT(){try{return typeof indexedDB=="object"}catch{return!1}}function eE(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(n){e(n)}})}function dI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="FirebaseError";class Zs extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=hI,Object.setPrototypeOf(this,Zs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yo.prototype.create)}}class yo{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?fI(l,i):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Zs(a,h,i)}}function fI(t,e){return t.replace(mI,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const mI=/\{\$([^}]+)}/g;function pI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function la(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const l=t[a],c=e[a];if(__(l)&&__(c)){if(!la(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function __(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function su(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function gI(t,e){const n=new yI(t,e);return n.subscribe.bind(n)}class yI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let a;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");vI(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:i},a.next===void 0&&(a.next=vg),a.error===void 0&&(a.error=vg),a.complete===void 0&&(a.complete=vg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=1e3,bI=2,_I=14400*1e3,wI=.5;function w_(t,e=xI,n=bI){const i=e*Math.pow(n,t),a=Math.round(wI*i*(Math.random()-.5)*2);return Math.min(_I,i+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){return t&&t._delegate?t._delegate:t}class Ws{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new tI;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SI(e))try{this.getOrInitializeService({instanceIdentifier:eo})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=eo){return this.instances.has(e)}getOptions(e=eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&c.resolve(a)}return a}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:EI(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=eo){return this.component?this.component.multipleInstances?e:eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EI(t){return t===eo?void 0:t}function SI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const NI={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},CI=We.INFO,RI={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},jI=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),a=RI[e];if(a)console[a](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pf{constructor(e){this.name=e,this._logLevel=CI,this._logHandler=jI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const II=(t,e)=>e.some(n=>t instanceof n);let T_,E_;function DI(){return T_||(T_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VI(){return E_||(E_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tE=new WeakMap,e0=new WeakMap,nE=new WeakMap,xg=new WeakMap,J0=new WeakMap;function MI(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(sa(t.result)),a()},c=()=>{i(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&tE.set(n,t)}).catch(()=>{}),J0.set(e,t),e}function kI(t){if(e0.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});e0.set(t,e)}let t0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return e0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OI(t){t0=t(t0)}function PI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(bg(this),e,...n);return nE.set(i,e.sort?e.sort():[e]),sa(i)}:VI().includes(t)?function(...e){return t.apply(bg(this),e),sa(tE.get(this))}:function(...e){return sa(t.apply(bg(this),e))}}function LI(t){return typeof t=="function"?PI(t):(t instanceof IDBTransaction&&kI(t),II(t,DI())?new Proxy(t,t0):t)}function sa(t){if(t instanceof IDBRequest)return MI(t);if(xg.has(t))return xg.get(t);const e=LI(t);return e!==t&&(xg.set(t,e),J0.set(e,t)),e}const bg=t=>J0.get(t);function sE(t,e,{blocked:n,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(t,e),h=sa(c);return i&&c.addEventListener("upgradeneeded",p=>{i(sa(c.result),p.oldVersion,p.newVersion,sa(c.transaction),p)}),n&&c.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const UI=["get","getKey","getAll","getAllKeys","count"],zI=["put","add","delete","clear"],_g=new Map;function S_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_g.get(e))return _g.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=zI.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||UI.includes(n)))return;const l=async function(c,...h){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(h.shift())),(await Promise.all([g[n](...h),a&&p.done]))[0]};return _g.set(e,l),l}OI(t=>({...t,get:(e,n,i)=>S_(e,n)||t.get(e,n,i),has:(e,n)=>!!S_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FI(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function FI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const n0="@firebase/app",A_="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new Pf("@firebase/app"),qI="@firebase/app-compat",HI="@firebase/analytics-compat",GI="@firebase/analytics",KI="@firebase/app-check-compat",$I="@firebase/app-check",YI="@firebase/auth",QI="@firebase/auth-compat",WI="@firebase/database",XI="@firebase/data-connect",JI="@firebase/database-compat",ZI="@firebase/functions",e4="@firebase/functions-compat",t4="@firebase/installations",n4="@firebase/installations-compat",s4="@firebase/messaging",i4="@firebase/messaging-compat",r4="@firebase/performance",a4="@firebase/performance-compat",o4="@firebase/remote-config",l4="@firebase/remote-config-compat",c4="@firebase/storage",u4="@firebase/storage-compat",d4="@firebase/firestore",h4="@firebase/ai",f4="@firebase/firestore-compat",m4="firebase",p4="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="[DEFAULT]",g4={[n0]:"fire-core",[qI]:"fire-core-compat",[GI]:"fire-analytics",[HI]:"fire-analytics-compat",[$I]:"fire-app-check",[KI]:"fire-app-check-compat",[YI]:"fire-auth",[QI]:"fire-auth-compat",[WI]:"fire-rtdb",[XI]:"fire-data-connect",[JI]:"fire-rtdb-compat",[ZI]:"fire-fn",[e4]:"fire-fn-compat",[t4]:"fire-iid",[n4]:"fire-iid-compat",[s4]:"fire-fcm",[i4]:"fire-fcm-compat",[r4]:"fire-perf",[a4]:"fire-perf-compat",[o4]:"fire-rc",[l4]:"fire-rc-compat",[c4]:"fire-gcs",[u4]:"fire-gcs-compat",[d4]:"fire-fst",[f4]:"fire-fst-compat",[h4]:"fire-vertex","fire-js":"fire-js",[m4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=new Map,y4=new Map,i0=new Map;function N_(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ii(t){const e=t.name;if(i0.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;i0.set(e,t);for(const n of of.values())N_(n,t);for(const n of y4.values())N_(n,t);return!0}function vo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function As(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ia=new yo("app","Firebase",v4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=p4;function iE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:s0,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw ia.create("bad-app-name",{appName:String(a)});if(n||(n=YT()),!n)throw ia.create("no-options");const l=of.get(a);if(l){if(la(n,l.options)&&la(i,l.config))return l;throw ia.create("duplicate-app",{appName:a})}const c=new AI(a);for(const p of i0.values())c.addComponent(p);const h=new x4(n,i,c);return of.set(a,h),h}function Z0(t=s0){const e=of.get(t);if(!e&&t===s0&&YT())return iE();if(!e)throw ia.create("no-app",{appName:t});return e}function Rs(t,e,n){let i=g4[t]??t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(c.join(" "));return}Ii(new Ws(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4="firebase-heartbeat-database",_4=1,Tu="firebase-heartbeat-store";let wg=null;function rE(){return wg||(wg=sE(b4,_4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Tu)}catch(n){console.warn(n)}}}}).catch(t=>{throw ia.create("idb-open",{originalErrorMessage:t.message})})),wg}async function w4(t){try{const n=(await rE()).transaction(Tu),i=await n.objectStore(Tu).get(aE(t));return await n.done,i}catch(e){if(e instanceof Zs)ir.warn(e.message);else{const n=ia.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ir.warn(n.message)}}}async function C_(t,e){try{const i=(await rE()).transaction(Tu,"readwrite");await i.objectStore(Tu).put(e,aE(t)),await i.done}catch(n){if(n instanceof Zs)ir.warn(n.message);else{const i=ia.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ir.warn(i.message)}}}function aE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=1024,E4=30;class S4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N4(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=R_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>E4){const c=C4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ir.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=R_(),{heartbeatsToSend:i,unsentEntries:a}=A4(this._heartbeatsCache.heartbeats),l=af(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return ir.warn(n),""}}}function R_(){return new Date().toISOString().substring(0,10)}function A4(t,e=T4){const n=[];let i=t.slice();for(const a of t){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),j_(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),j_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class N4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZT()?eE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await w4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return C_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return C_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function j_(t){return af(JSON.stringify({version:2,heartbeats:t})).length}function C4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(t){Ii(new Ws("platform-logger",e=>new BI(e),"PRIVATE")),Ii(new Ws("heartbeat",e=>new S4(e),"PRIVATE")),Rs(n0,A_,t),Rs(n0,A_,"esm2020"),Rs("fire-js","")}R4("");var j4="firebase",I4="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rs(j4,I4,"app");const oE="@firebase/installations",ey="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=1e4,cE=`w:${ey}`,uE="FIS_v2",D4="https://firebaseinstallations.googleapis.com/v1",V4=3600*1e3,M4="installations",k4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},lo=new yo(M4,k4,O4);function dE(t){return t instanceof Zs&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE({projectId:t}){return`${D4}/projects/${t}/installations`}function fE(t){return{token:t.token,requestStatus:2,expiresIn:L4(t.expiresIn),creationTime:Date.now()}}async function mE(t,e){const i=(await e.json()).error;return lo.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function pE({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function P4(t,{refreshToken:e}){const n=pE(t);return n.append("Authorization",U4(e)),n}async function gE(t){const e=await t();return e.status>=500&&e.status<600?t():e}function L4(t){return Number(t.replace("s","000"))}function U4(t){return`${uE} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z4({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=hE(t),a=pE(t),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={fid:n,authVersion:uE,appId:t.appId,sdkVersion:cE},h={method:"POST",headers:a,body:JSON.stringify(c)},p=await gE(()=>fetch(i,h));if(p.ok){const g=await p.json();return{fid:g.fid||n,registrationStatus:2,refreshToken:g.refreshToken,authToken:fE(g.authToken)}}else throw await mE("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=/^[cdef][\w-]{21}$/,r0="";function q4(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=H4(t);return F4.test(n)?n:r0}catch{return r0}}function H4(t){return B4(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=new Map;function xE(t,e){const n=Lf(t);bE(n,e),G4(n,e)}function bE(t,e){const n=vE.get(t);if(n)for(const i of n)i(e)}function G4(t,e){const n=K4();n&&n.postMessage({key:t,fid:e}),$4()}let no=null;function K4(){return!no&&"BroadcastChannel"in self&&(no=new BroadcastChannel("[Firebase] FID Change"),no.onmessage=t=>{bE(t.data.key,t.data.fid)}),no}function $4(){vE.size===0&&no&&(no.close(),no=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4="firebase-installations-database",Q4=1,co="firebase-installations-store";let Tg=null;function ty(){return Tg||(Tg=sE(Y4,Q4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(co)}}})),Tg}async function lf(t,e){const n=Lf(t),a=(await ty()).transaction(co,"readwrite"),l=a.objectStore(co),c=await l.get(n);return await l.put(e,n),await a.done,(!c||c.fid!==e.fid)&&xE(t,e.fid),e}async function _E(t){const e=Lf(t),i=(await ty()).transaction(co,"readwrite");await i.objectStore(co).delete(e),await i.done}async function Uf(t,e){const n=Lf(t),a=(await ty()).transaction(co,"readwrite"),l=a.objectStore(co),c=await l.get(n),h=e(c);return h===void 0?await l.delete(n):await l.put(h,n),await a.done,h&&(!c||c.fid!==h.fid)&&xE(t,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ny(t){let e;const n=await Uf(t.appConfig,i=>{const a=W4(i),l=X4(t,a);return e=l.registrationPromise,l.installationEntry});return n.fid===r0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function W4(t){const e=t||{fid:q4(),registrationStatus:0};return wE(e)}function X4(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(lo.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=J4(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Z4(t)}:{installationEntry:e}}async function J4(t,e){try{const n=await z4(t,e);return lf(t.appConfig,n)}catch(n){throw dE(n)&&n.customData.serverCode===409?await _E(t.appConfig):await lf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Z4(t){let e=await I_(t.appConfig);for(;e.registrationStatus===1;)await yE(100),e=await I_(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await ny(t);return i||n}return e}function I_(t){return Uf(t,e=>{if(!e)throw lo.create("installation-not-found");return wE(e)})}function wE(t){return e3(t)?{fid:t.fid,registrationStatus:0}:t}function e3(t){return t.registrationStatus===1&&t.registrationTime+lE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t3({appConfig:t,heartbeatServiceProvider:e},n){const i=n3(t,n),a=P4(t,n),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={installation:{sdkVersion:cE,appId:t.appId}},h={method:"POST",headers:a,body:JSON.stringify(c)},p=await gE(()=>fetch(i,h));if(p.ok){const g=await p.json();return fE(g)}else throw await mE("Generate Auth Token",p)}function n3(t,{fid:e}){return`${hE(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sy(t,e=!1){let n;const i=await Uf(t.appConfig,l=>{if(!TE(l))throw lo.create("not-registered");const c=l.authToken;if(!e&&r3(c))return l;if(c.requestStatus===1)return n=s3(t,e),l;{if(!navigator.onLine)throw lo.create("app-offline");const h=o3(l);return n=i3(t,h),h}});return n?await n:i.authToken}async function s3(t,e){let n=await D_(t.appConfig);for(;n.authToken.requestStatus===1;)await yE(100),n=await D_(t.appConfig);const i=n.authToken;return i.requestStatus===0?sy(t,e):i}function D_(t){return Uf(t,e=>{if(!TE(e))throw lo.create("not-registered");const n=e.authToken;return l3(n)?{...e,authToken:{requestStatus:0}}:e})}async function i3(t,e){try{const n=await t3(t,e),i={...e,authToken:n};return await lf(t.appConfig,i),n}catch(n){if(dE(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await _E(t.appConfig);else{const i={...e,authToken:{requestStatus:0}};await lf(t.appConfig,i)}throw n}}function TE(t){return t!==void 0&&t.registrationStatus===2}function r3(t){return t.requestStatus===2&&!a3(t)}function a3(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+V4}function o3(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function l3(t){return t.requestStatus===1&&t.requestTime+lE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c3(t){const e=t,{installationEntry:n,registrationPromise:i}=await ny(e);return i?i.catch(console.error):sy(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u3(t,e=!1){const n=t;return await d3(n),(await sy(n,e)).token}async function d3(t){const{registrationPromise:e}=await ny(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(t){if(!t||!t.options)throw Eg("App Configuration");if(!t.name)throw Eg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Eg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Eg(t){return lo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="installations",f3="installations-internal",m3=t=>{const e=t.getProvider("app").getImmediate(),n=h3(e),i=vo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},p3=t=>{const e=t.getProvider("app").getImmediate(),n=vo(e,EE).getImmediate();return{getId:()=>c3(n),getToken:a=>u3(n,a)}};function g3(){Ii(new Ws(EE,m3,"PUBLIC")),Ii(new Ws(f3,p3,"PRIVATE"))}g3();Rs(oE,ey);Rs(oE,ey,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="analytics",y3="firebase_id",v3="origin",x3=60*1e3,b3="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",iy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn=new Pf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ls=new yo("analytics","Analytics",_3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(t){if(!t.startsWith(iy)){const e=ls.create("invalid-gtag-resource",{gtagURL:t});return Pn.warn(e.message),""}return t}function SE(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function T3(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function E3(t,e){const n=T3("firebase-js-sdk-policy",{createScriptURL:w3}),i=document.createElement("script"),a=`${iy}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function S3(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function A3(t,e,n,i,a,l){const c=i[a];try{if(c)await e[c];else{const p=(await SE(n)).find(g=>g.measurementId===a);p&&await e[p.appId]}}catch(h){Pn.error(h)}t("config",a,l)}async function N3(t,e,n,i,a){try{let l=[];if(a&&a.send_to){let c=a.send_to;Array.isArray(c)||(c=[c]);const h=await SE(n);for(const p of c){const g=h.find(x=>x.measurementId===p),v=g&&e[g.appId];if(v)l.push(v);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),t("event",i,a||{})}catch(l){Pn.error(l)}}function C3(t,e,n,i){async function a(l,...c){try{if(l==="event"){const[h,p]=c;await N3(t,e,n,h,p)}else if(l==="config"){const[h,p]=c;await A3(t,e,n,i,h,p)}else if(l==="consent"){const[h,p]=c;t("consent",h,p)}else if(l==="get"){const[h,p,g]=c;t("get",h,p,g)}else if(l==="set"){const[h]=c;t("set",h)}else t(l,...c)}catch(h){Pn.error(h)}}return a}function R3(t,e,n,i,a){let l=function(...c){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=C3(l,t,e,n),{gtagCore:l,wrappedGtag:window[a]}}function j3(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(iy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=30,D3=1e3;class V3{constructor(e={},n=D3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const AE=new V3;function M3(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function k3(t){var c;const{appId:e,apiKey:n}=t,i={method:"GET",headers:M3(n)},a=b3.replace("{app-id}",e),l=await fetch(a,i);if(l.status!==200&&l.status!==304){let h="";try{const p=await l.json();(c=p.error)!=null&&c.message&&(h=p.error.message)}catch{}throw ls.create("config-fetch-failed",{httpStatus:l.status,responseMessage:h})}return l.json()}async function O3(t,e=AE,n){const{appId:i,apiKey:a,measurementId:l}=t.options;if(!i)throw ls.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:i};throw ls.create("no-api-key")}const c=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new U3;return setTimeout(async()=>{h.abort()},x3),NE({appId:i,apiKey:a,measurementId:l},c,h,e)}async function NE(t,{throttleEndTimeMillis:e,backoffCount:n},i,a=AE){var h;const{appId:l,measurementId:c}=t;try{await P3(i,e)}catch(p){if(c)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:l,measurementId:c};throw p}try{const p=await k3(t);return a.deleteThrottleMetadata(l),p}catch(p){const g=p;if(!L3(g)){if(a.deleteThrottleMetadata(l),c)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:l,measurementId:c};throw p}const v=Number((h=g==null?void 0:g.customData)==null?void 0:h.httpStatus)===503?w_(n,a.intervalMillis,I3):w_(n,a.intervalMillis),x={throttleEndTimeMillis:Date.now()+v,backoffCount:n+1};return a.setThrottleMetadata(l,x),Pn.debug(`Calling attemptFetch again in ${v} millis`),NE(t,x,i,a)}}function P3(t,e){return new Promise((n,i)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(n,a);t.addEventListener(()=>{clearTimeout(l),i(ls.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function L3(t){if(!(t instanceof Zs)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class U3{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function z3(t,e,n,i,a){if(a&&a.global){t("event",n,i);return}else{const l=await e,c={...i,send_to:l};t("event",n,c)}}async function B3(t,e,n,i){if(i&&i.global){const a={};for(const l of Object.keys(n))a[`user_properties.${l}`]=n[l];return t("set",a),Promise.resolve()}else{const a=await e;t("config",a,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F3(){if(ZT())try{await eE()}catch(t){return Pn.warn(ls.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Pn.warn(ls.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function q3(t,e,n,i,a,l,c){const h=O3(t);h.then(w=>{n[w.measurementId]=w.appId,t.options.measurementId&&w.measurementId!==t.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>Pn.error(w)),e.push(h);const p=F3().then(w=>{if(w)return i.getId()}),[g,v]=await Promise.all([h,p]);j3(l)||E3(l,g.measurementId),a("js",new Date);const x=(c==null?void 0:c.config)??{};return x[v3]="firebase",x.update=!0,v!=null&&(x[y3]=v),a("config",g.measurementId,x),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e){this.app=e}_delete(){return delete _l[this.app.options.appId],Promise.resolve()}}let _l={},V_=[];const M_={};let Sg="dataLayer",G3="gtag",k_,ry,O_=!1;function K3(){const t=[];if(JT()&&t.push("This is a browser extension environment."),dI()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,a)=>`(${a+1}) ${i}`).join(" "),n=ls.create("invalid-analytics-context",{errorInfo:e});Pn.warn(n.message)}}function $3(t,e,n){K3();const i=t.options.appId;if(!i)throw ls.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ls.create("no-api-key");if(_l[i]!=null)throw ls.create("already-exists",{id:i});if(!O_){S3(Sg);const{wrappedGtag:l,gtagCore:c}=R3(_l,V_,M_,Sg,G3);ry=l,k_=c,O_=!0}return _l[i]=q3(t,V_,M_,e,k_,Sg,n),new H3(t)}function Y3(t=Z0()){t=Tt(t);const e=vo(t,cf);return e.isInitialized()?e.getImmediate():Q3(t)}function Q3(t,e={}){const n=vo(t,cf);if(n.isInitialized()){const a=n.getImmediate();if(la(e,n.getOptions()))return a;throw ls.create("already-initialized")}return n.initialize({options:e})}function W3(t,e,n){t=Tt(t),B3(ry,_l[t.app.options.appId],e,n).catch(i=>Pn.error(i))}function X3(t,e,n,i){t=Tt(t),z3(ry,_l[t.app.options.appId],e,n,i).catch(a=>Pn.error(a))}const P_="@firebase/analytics",L_="0.10.19";function J3(){Ii(new Ws(cf,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return $3(i,a,n)},"PUBLIC")),Ii(new Ws("analytics-internal",t,"PRIVATE")),Rs(P_,L_),Rs(P_,L_,"esm2020");function t(e){try{const n=e.getProvider(cf).getImmediate();return{logEvent:(i,a,l)=>X3(n,i,a,l),setUserProperties:(i,a)=>W3(n,i,a)}}catch(n){throw ls.create("interop-component-reg-failed",{reason:n})}}}J3();function CE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z3=CE,RE=new yo("auth","Firebase",CE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=new Pf("@firebase/auth");function eD(t,...e){uf.logLevel<=We.WARN&&uf.warn(`Auth (${zl}): ${t}`,...e)}function Gh(t,...e){uf.logLevel<=We.ERROR&&uf.error(`Auth (${zl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t,...e){throw ay(t,...e)}function Si(t,...e){return ay(t,...e)}function jE(t,e,n){const i={...Z3(),[e]:n};return new yo("auth","Firebase",i).create(e,{appName:t.name})}function sr(t){return jE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ay(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return RE.create(t,...e)}function Pe(t,e,...n){if(!t)throw ay(e,...n)}function tr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Gh(e),new Error(e)}function rr(t,e){t||tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function tD(){return U_()==="http:"||U_()==="https:"}function U_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tD()||JT()||"connection"in navigator)?navigator.onLine:!0}function sD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n){this.shortDelay=e,this.longDelay=n,rr(n>e,"Short delay should be less than long delay!"),this.isMobile=rI()||lI()}get(){return nD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t,e){rr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aD=new Fu(3e4,6e4);function cr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ur(t,e,n,i,a={}){return DE(t,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const h=Bu({key:t.config.apiKey,...c}).slice(1),p=await t._getAdditionalHeaders();p["Content-Type"]="application/json",t.languageCode&&(p["X-Firebase-Locale"]=t.languageCode);const g={method:e,headers:p,...l};return oI()||(g.referrerPolicy="no-referrer"),t.emulatorConfig&&Ul(t.emulatorConfig.host)&&(g.credentials="include"),IE.fetch()(await VE(t,t.config.apiHost,n,h),g)})}async function DE(t,e,n){t._canInitEmulator=!1;const i={...iD,...e};try{const a=new lD(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Vh(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[p,g]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vh(t,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Vh(t,"email-already-in-use",c);if(p==="USER_DISABLED")throw Vh(t,"user-disabled",c);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw jE(t,v,g);Xs(t,v)}}catch(a){if(a instanceof Zs)throw a;Xs(t,"network-request-failed",{message:String(a)})}}async function qu(t,e,n,i,a={}){const l=await ur(t,e,n,i,a);return"mfaPendingCredential"in l&&Xs(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function VE(t,e,n,i){const a=`${e}${n}?${i}`,l=t,c=l.config.emulator?oy(t.config,a):`${t.config.apiScheme}://${a}`;return rD.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function oD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Si(this.auth,"network-request-failed")),aD.get())})}}function Vh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const a=Si(t,e,i);return a.customData._tokenResponse=n,a}function z_(t){return t!==void 0&&t.enterprise!==void 0}class cD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return oD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uD(t,e){return ur(t,"GET","/v2/recaptchaConfig",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(t,e){return ur(t,"POST","/v1/accounts:delete",e)}async function df(t,e){return ur(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hD(t,e=!1){const n=Tt(t),i=await n.getIdToken(e),a=ly(i);Pe(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:du(Ag(a.auth_time)),issuedAtTime:du(Ag(a.iat)),expirationTime:du(Ag(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Ag(t){return Number(t)*1e3}function ly(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Gh("JWT malformed, contained fewer than 3 sections"),null;try{const a=KT(n);return a?JSON.parse(a):(Gh("Failed to decode base64 JWT payload"),null)}catch(a){return Gh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function B_(t){const e=ly(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Zs&&fD(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function fD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=du(this.lastLoginAt),this.creationTime=du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hf(t){var x;const e=t.auth,n=await t.getIdToken(),i=await Eu(t,df(e,{idToken:n}));Pe(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const l=(x=a.providerUserInfo)!=null&&x.length?ME(a.providerUserInfo):[],c=gD(t.providerData,l),h=t.isAnonymous,p=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),g=h?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new o0(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,v)}async function pD(t){const e=Tt(t);await hf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gD(t,e){return[...t.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function ME(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(t,e){const n=await DE(t,{},async()=>{const i=Bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,c=await VE(t,a,"/v1/token",`key=${l}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:i};return t.emulatorConfig&&Ul(t.emulatorConfig.host)&&(p.credentials="include"),IE.fetch()(c,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vD(t,e){return ur(t,"POST","/v2/accounts:revokeToken",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):B_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=B_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:a,expiresIn:l}=await yD(e,n);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:a,expirationTime:l}=n,c=new wl;return i&&(Pe(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Pe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Pe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wl,this.toJSON())}_performRefresh(){return tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $s{constructor({uid:e,auth:n,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new mD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new o0(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Eu(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hD(this,e)}reload(){return pD(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $s({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await hf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(As(this.auth.app))return Promise.reject(sr(this.auth));const e=await this.getIdToken();return await Eu(this,dD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,a=n.email??void 0,l=n.phoneNumber??void 0,c=n.photoURL??void 0,h=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:x,emailVerified:w,isAnonymous:E,providerData:j,stsTokenManager:M}=n;Pe(x&&M,e,"internal-error");const V=wl.fromJSON(this.name,M);Pe(typeof x=="string",e,"internal-error"),Kr(i,e.name),Kr(a,e.name),Pe(typeof w=="boolean",e,"internal-error"),Pe(typeof E=="boolean",e,"internal-error"),Kr(l,e.name),Kr(c,e.name),Kr(h,e.name),Kr(p,e.name),Kr(g,e.name),Kr(v,e.name);const q=new $s({uid:x,auth:e,email:a,emailVerified:w,displayName:i,isAnonymous:E,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:V,createdAt:g,lastLoginAt:v});return j&&Array.isArray(j)&&(q.providerData=j.map(B=>({...B}))),p&&(q._redirectEventId=p),q}static async _fromIdTokenResponse(e,n,i=!1){const a=new wl;a.updateFromServerResponse(n);const l=new $s({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await hf(l),l}static async _fromGetAccountInfoResponse(e,n,i){const a=n.users[0];Pe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?ME(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new wl;h.updateFromIdToken(i);const p=new $s({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new o0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=new Map;function nr(t){rr(t instanceof Function,"Expected a class definition");let e=F_.get(t);return e?(rr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,F_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kE.type="NONE";const q_=kE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t,e,n){return`firebase:${t}:${e}:${n}`}class Tl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Kh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Kh("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await df(this.auth,{idToken:e}).catch(()=>{});return n?$s._fromGetAccountInfoResponse(this.auth,n,e):null}return $s._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Tl(nr(q_),e,i);const a=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||nr(q_);const c=Kh(i,e.config.apiKey,e.name);let h=null;for(const g of n)try{const v=await g._get(c);if(v){let x;if(typeof v=="string"){const w=await df(e,{idToken:v}).catch(()=>{});if(!w)break;x=await $s._fromGetAccountInfoResponse(e,w,v)}else x=$s._fromJSON(e,v);g!==l&&(h=x),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Tl(l,e,i):(l=p[0],h&&await l._set(c,h.toJSON()),await Promise.all(n.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Tl(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BE(e))return"Blackberry";if(FE(e))return"Webos";if(PE(e))return"Safari";if((e.includes("chrome/")||LE(e))&&!e.includes("edge/"))return"Chrome";if(zE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function OE(t=In()){return/firefox\//i.test(t)}function PE(t=In()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LE(t=In()){return/crios\//i.test(t)}function UE(t=In()){return/iemobile/i.test(t)}function zE(t=In()){return/android/i.test(t)}function BE(t=In()){return/blackberry/i.test(t)}function FE(t=In()){return/webos/i.test(t)}function cy(t=In()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xD(t=In()){var e;return cy(t)&&!!((e=window.navigator)!=null&&e.standalone)}function bD(){return cI()&&document.documentMode===10}function qE(t=In()){return cy(t)||zE(t)||FE(t)||BE(t)||/windows phone/i.test(t)||UE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t,e=[]){let n;switch(t){case"Browser":n=H_(In());break;case"Worker":n=`${H_(In())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=l=>new Promise((c,h)=>{try{const p=e(l);c(p)}catch(p){h(p)}});i.onAbort=n,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(t,e={}){return ur(t,"GET","/v2/passwordPolicy",cr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=6;class ED{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??TD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,n,i,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G_(this),this.idTokenSubscription=new G_(this),this.beforeStateQueue=new _D(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=nr(n)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Tl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await df(this,{idToken:e}),i=await $s._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(As(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&(p!=null&&p.user)&&(i=p.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(As(this.app))return Promise.reject(sr(this));const n=e?Tt(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return As(this.app)?Promise.reject(sr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return As(this.app)?Promise.reject(sr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wD(this),n=new ED(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yo("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await vD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&nr(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await Tl.create(this,[nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,i,a);return()=>{c=!0,p()}}else{const p=e.addObserver(n);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(As(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&eD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ya(t){return Tt(t)}class G_{constructor(e){this.auth=e,this.observer=null,this.addObserver=gI(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AD(t){zf=t}function GE(t){return zf.loadJS(t)}function ND(){return zf.recaptchaEnterpriseScript}function CD(){return zf.gapiScript}function RD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class jD{constructor(){this.enterprise=new ID}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ID{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const DD="recaptcha-enterprise",KE="NO_RECAPTCHA";class VD{constructor(e){this.type=DD,this.auth=ya(e)}async verify(e="verify",n=!1){async function i(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{uD(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const g=new cD(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(p=>{h(p)})})}function a(l,c,h){const p=window.grecaptcha;z_(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(KE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jD().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(h=>{if(!n&&z_(window.grecaptcha))a(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=ND();p.length!==0&&(p+=h),GE(p).then(()=>{a(h,l,c)}).catch(g=>{c(g)})}}).catch(h=>{c(h)})})}}async function K_(t,e,n,i=!1,a=!1){const l=new VD(t);let c;if(a)c=KE;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,g=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function ff(t,e,n,i,a){var l;if((l=t._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await K_(t,e,n,n==="getOobCode");return i(t,c)}else return i(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await K_(t,e,n,n==="getOobCode");return i(t,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t,e){const n=vo(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(la(l,e??{}))return a;Xs(a,"already-initialized")}return n.initialize({options:e})}function kD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(nr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function OD(t,e,n){const i=ya(t);Pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=$E(e),{host:c,port:h}=PD(e),p=h===null?"":`:${h}`,g={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Pe(la(g,i.config.emulator)&&la(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Ul(c)?(WT(`${l}//${c}${p}`),XT("Auth",!0)):LD()}function $E(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function PD(t){const e=$E(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:$_(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:$_(c)}}}function $_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function LD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return tr("not implemented")}_getIdTokenResponse(e){return tr("not implemented")}_linkToIdToken(e,n){return tr("not implemented")}_getReauthenticationResolver(e){return tr("not implemented")}}async function UD(t,e){return ur(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zD(t,e){return qu(t,"POST","/v1/accounts:signInWithPassword",cr(t,e))}async function YE(t,e){return ur(t,"POST","/v1/accounts:sendOobCode",cr(t,e))}async function BD(t,e){return YE(t,e)}async function FD(t,e){return YE(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD(t,e){return qu(t,"POST","/v1/accounts:signInWithEmailLink",cr(t,e))}async function HD(t,e){return qu(t,"POST","/v1/accounts:signInWithEmailLink",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su extends uy{constructor(e,n,i,a=null){super("password",i),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Su(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Su(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ff(e,n,"signInWithPassword",zD);case"emailLink":return qD(e,{email:this._email,oobCode:this._password});default:Xs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ff(e,i,"signUpPassword",UD);case"emailLink":return HD(e,{idToken:n,email:this._email,oobCode:this._password});default:Xs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t,e){return qu(t,"POST","/v1/accounts:signInWithIdp",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="http://localhost";class uo extends uy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=n;if(!i||!a)return null;const c=new uo(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return El(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,El(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,El(e,n)}buildRequest(){const e={requestUri:GD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $D(t){const e=nu(su(t)).link,n=e?nu(su(e)).deep_link_id:null,i=nu(su(t)).deep_link_id;return(i?nu(su(i)).link:null)||i||n||e||t}class dy{constructor(e){const n=nu(su(e)),i=n.apiKey??null,a=n.oobCode??null,l=KD(n.mode??null);Pe(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=$D(e);try{return new dy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this.providerId=Bl.PROVIDER_ID}static credential(e,n){return Su._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=dy.parseLink(n);return Pe(i,"argument-error"),Su._fromEmailAndCode(e,i.code,i.tenantId)}}Bl.PROVIDER_ID="password";Bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends QE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Hu{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return uo._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Qr.credential(n,i)}catch{return null}}}Qr.GOOGLE_SIGN_IN_METHOD="google.com";Qr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Hu{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.GITHUB_SIGN_IN_METHOD="github.com";Wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Hu{constructor(){super("twitter.com")}static credential(e,n){return uo._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Xr.credential(n,i)}catch{return null}}}Xr.TWITTER_SIGN_IN_METHOD="twitter.com";Xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(t,e){return qu(t,"POST","/v1/accounts:signUp",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,a=!1){const l=await $s._fromIdTokenResponse(e,i,a),c=Y_(i);return new ho({user:l,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const a=Y_(i);return new ho({user:e,providerId:a,_tokenResponse:i,operationType:n})}}function Y_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends Zs{constructor(e,n,i,a){super(n.code,n.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,mf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,a){return new mf(e,n,i,a)}}function WE(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?mf._fromErrorAndOperation(t,l,e,i):l})}async function QD(t,e,n=!1){const i=await Eu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ho._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t,e,n=!1){const{auth:i}=t;if(As(i.app))return Promise.reject(sr(i));const a="reauthenticate";try{const l=await Eu(t,WE(i,a,e,t),n);Pe(l.idToken,i,"internal-error");const c=ly(l.idToken);Pe(c,i,"internal-error");const{sub:h}=c;return Pe(t.uid===h,i,"user-mismatch"),ho._forOperation(t,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Xs(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XE(t,e,n=!1){if(As(t.app))return Promise.reject(sr(t));const i="signIn",a=await WE(t,i,e),l=await ho._fromIdTokenResponse(t,i,a);return n||await t._updateCurrentUser(l.user),l}async function XD(t,e){return XE(ya(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JE(t){const e=ya(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JD(t,e,n){const i=ya(t);await ff(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",FD)}async function ZD(t,e,n){if(As(t.app))return Promise.reject(sr(t));const i=ya(t),c=await ff(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YD).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&JE(t),p}),h=await ho._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(h.user),h}function eV(t,e,n){return As(t.app)?Promise.reject(sr(t)):XD(Tt(t),Bl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&JE(t),i})}async function hy(t,e){const n=Tt(t),a={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:l}=await BD(n.auth,a);l!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(t,e){return Tt(t).setPersistence(e)}function nV(t,e,n,i){return Tt(t).onIdTokenChanged(e,n,i)}function sV(t,e,n){return Tt(t).beforeAuthStateChanged(e,n)}function iV(t,e,n,i){return Tt(t).onAuthStateChanged(e,n,i)}function l0(t){return Tt(t).signOut()}const pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=1e3,aV=10;class eS extends ZE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),a=this.localCache[n];i!==a&&e(n,a,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,h,p)=>{this.notifyListeners(c,p)});return}const i=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);bD()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,aV):a()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},rV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}eS.type="LOCAL";const tS=eS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS extends ZE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nS.type="SESSION";const sS=nS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const i=new Bf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(c).map(async g=>g(n.origin,l)),p=await oV(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((h,p)=>{const g=fy("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(x){const w=x;if(w.data.eventId===g)switch(w.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(w.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(){return window}function cV(t){Ai().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(){return typeof Ai().WorkerGlobalScope<"u"&&typeof Ai().importScripts=="function"}async function uV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function hV(){return iS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="firebaseLocalStorageDb",fV=1,gf="firebaseLocalStorage",aS="fbase_key";class Gu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ff(t,e){return t.transaction([gf],e?"readwrite":"readonly").objectStore(gf)}function mV(){const t=indexedDB.deleteDatabase(rS);return new Gu(t).toPromise()}function c0(){const t=indexedDB.open(rS,fV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(gf,{keyPath:aS})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(gf)?e(i):(i.close(),await mV(),e(await c0()))})})}async function Q_(t,e,n){const i=Ff(t,!0).put({[aS]:e,value:n});return new Gu(i).toPromise()}async function pV(t,e){const n=Ff(t,!1).get(e),i=await new Gu(n).toPromise();return i===void 0?null:i.value}function W_(t,e){const n=Ff(t,!0).delete(e);return new Gu(n).toPromise()}const gV=800,yV=3;class oS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await c0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>yV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bf._getInstance(hV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await uV(),!this.activeServiceWorker)return;this.sender=new lV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await c0();return await Q_(e,pf,"1"),await W_(e,pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Q_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>pV(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>W_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Ff(a,!1).getAll();return new Gu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oS.type="LOCAL";const vV=oS;new Fu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t,e){return e?nr(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my extends uy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return El(e,this._buildIdpRequest())}_linkToIdToken(e,n){return El(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return El(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bV(t){return XE(t.auth,new my(t),t.bypassAuthState)}function _V(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),WD(n,new my(t),t.bypassAuthState)}async function wV(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),QD(n,new my(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,n,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:a,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:n,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bV;case"linkViaPopup":case"linkViaRedirect":return wV;case"reauthViaPopup":case"reauthViaRedirect":return _V;default:Xs(this.auth,"internal-error")}}resolve(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=new Fu(2e3,1e4);class pl extends lS{constructor(e,n,i,a,l){super(e,n,a,l),this.provider=i,this.authWindow=null,this.pollId=null,pl.currentPopupAction&&pl.currentPopupAction.cancel(),pl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){rr(this.filter.length===1,"Popup operations only handle one event");const e=fy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TV.get())};e()}}pl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV="pendingRedirect",$h=new Map;class SV extends lS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=$h.get(this.auth._key());if(!e){try{const i=await AV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}$h.set(this.auth._key(),e)}return this.bypassAuthState||$h.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AV(t,e){const n=RV(e),i=CV(t);if(!await i._isAvailable())return!1;const a=await i._get(n)==="true";return await i._remove(n),a}function NV(t,e){$h.set(t._key(),e)}function CV(t){return nr(t._redirectPersistence)}function RV(t){return Kh(EV,t.config.apiKey,t.name)}async function jV(t,e,n=!1){if(As(t.app))return Promise.reject(sr(t));const i=ya(t),a=xV(i,e),c=await new SV(i,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=600*1e3;class DV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!cS(e)){const a=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Si(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IV&&this.cachedEventUids.clear(),this.cachedEventUids.has(X_(e))}saveEventToCache(e){this.cachedEventUids.add(X_(e)),this.lastProcessedEventTime=Date.now()}}function X_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function VV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV(t,e={}){return ur(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OV=/^https?/;async function PV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await MV(t);for(const n of e)try{if(LV(n))return}catch{}Xs(t,"unauthorized-domain")}function LV(t){const e=a0(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!OV.test(n))return!1;if(kV.test(t))return i===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=new Fu(3e4,6e4);function J_(){const t=Ai().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function zV(t){return new Promise((e,n)=>{var a,l,c;function i(){J_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{J_(),n(Si(t,"network-request-failed"))},timeout:UV.get()})}if((l=(a=Ai().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Ai().gapi)!=null&&c.load)i();else{const h=RD("iframefcb");return Ai()[h]=()=>{gapi.load?i():n(Si(t,"network-request-failed"))},GE(`${CD()}?onload=${h}`).catch(p=>n(p))}}).catch(e=>{throw Yh=null,e})}let Yh=null;function BV(t){return Yh=Yh||zV(t),Yh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=new Fu(5e3,15e3),qV="__/auth/iframe",HV="emulator/auth/iframe",GV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $V(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?oy(e,HV):`https://${t.config.authDomain}/${qV}`,i={apiKey:e.apiKey,appName:t.name,v:zl},a=KV.get(t.config.apiHost);a&&(i.eid=a);const l=t._getFrameworks();return l.length&&(i.fw=l.join(",")),`${n}?${Bu(i).slice(1)}`}async function YV(t){const e=await BV(t),n=Ai().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:$V(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GV,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Si(t,"network-request-failed"),h=Ai().setTimeout(()=>{l(c)},FV.get());function p(){Ai().clearTimeout(h),a(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WV=500,XV=600,JV="_blank",ZV="http://localhost";class Z_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function e5(t,e,n,i=WV,a=XV){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const p={...QV,width:i.toString(),height:a.toString(),top:l,left:c},g=In().toLowerCase();n&&(h=LE(g)?JV:n),OE(g)&&(e=e||ZV,p.scrollbars="yes");const v=Object.entries(p).reduce((w,[E,j])=>`${w}${E}=${j},`,"");if(xD(g)&&h!=="_self")return t5(e||"",h),new Z_(null);const x=window.open(e||"",h,v);Pe(x,t,"popup-blocked");try{x.focus()}catch{}return new Z_(x)}function t5(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5="__/auth/handler",s5="emulator/auth/handler",i5=encodeURIComponent("fac");async function ew(t,e,n,i,a,l){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:zl,eventId:a};if(e instanceof QE){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",pI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,x]of Object.entries({}))c[v]=x}if(e instanceof Hu){const v=e.getScopes().filter(x=>x!=="");v.length>0&&(c.scopes=v.join(","))}t.tenantId&&(c.tid=t.tenantId);const h=c;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const p=await t._getAppCheckToken(),g=p?`#${i5}=${encodeURIComponent(p)}`:"";return`${r5(t)}?${Bu(h).slice(1)}${g}`}function r5({config:t}){return t.emulator?oy(t,s5):`https://${t.authDomain}/${n5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="webStorageSupport";class a5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sS,this._completeRedirectFn=jV,this._overrideRedirectResult=NV}async _openPopup(e,n,i,a){var c;rr((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await ew(e,n,i,a0(),a);return e5(e,l,fy())}async _openRedirect(e,n,i,a){await this._originValidation(e);const l=await ew(e,n,i,a0(),a);return cV(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(rr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await YV(e),i=new DV(e);return n.register("authEvent",a=>(Pe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ng,{type:Ng},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[Ng];l!==void 0&&n(!!l),Xs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qE()||PE()||cy()}}const o5=a5;var tw="@firebase/auth",nw="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function u5(t){Ii(new Ws("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;Pe(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HE(t)},g=new SD(i,a,l,p);return kD(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ii(new Ws("auth-internal",e=>{const n=ya(e.getProvider("auth").getImmediate());return(i=>new l5(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rs(tw,nw,c5(t)),Rs(tw,nw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=300,h5=QT("authIdTokenMaxAge")||d5;let sw=null;const f5=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>h5)return;const a=n==null?void 0:n.token;sw!==a&&(sw=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function m5(t=Z0()){const e=vo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=MD(t,{popupRedirectResolver:o5,persistence:[vV,tS,sS]}),i=QT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=f5(l.toString());sV(n,c,()=>c(n.currentUser)),nV(n,h=>c(h))}}const a=$T("auth");return a&&OD(n,`http://${a}`),n}function p5(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}AD({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=a=>{const l=Si("internal-error");l.customData=a,n(l)},i.type="text/javascript",i.charset="UTF-8",p5().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});u5("Browser");var iw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ra,uS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,S){function N(){}N.prototype=S.prototype,R.F=S.prototype,R.prototype=new N,R.prototype.constructor=R,R.D=function(k,D,O){for(var I=Array(arguments.length-2),te=2;te<arguments.length;te++)I[te-2]=arguments[te];return S.prototype[D].apply(k,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,S,N){N||(N=0);const k=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)k[D]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(D=0;D<16;++D)k[D]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=R.g[0],N=R.g[1],D=R.g[2];let O=R.g[3],I;I=S+(O^N&(D^O))+k[0]+3614090360&4294967295,S=N+(I<<7&4294967295|I>>>25),I=O+(D^S&(N^D))+k[1]+3905402710&4294967295,O=S+(I<<12&4294967295|I>>>20),I=D+(N^O&(S^N))+k[2]+606105819&4294967295,D=O+(I<<17&4294967295|I>>>15),I=N+(S^D&(O^S))+k[3]+3250441966&4294967295,N=D+(I<<22&4294967295|I>>>10),I=S+(O^N&(D^O))+k[4]+4118548399&4294967295,S=N+(I<<7&4294967295|I>>>25),I=O+(D^S&(N^D))+k[5]+1200080426&4294967295,O=S+(I<<12&4294967295|I>>>20),I=D+(N^O&(S^N))+k[6]+2821735955&4294967295,D=O+(I<<17&4294967295|I>>>15),I=N+(S^D&(O^S))+k[7]+4249261313&4294967295,N=D+(I<<22&4294967295|I>>>10),I=S+(O^N&(D^O))+k[8]+1770035416&4294967295,S=N+(I<<7&4294967295|I>>>25),I=O+(D^S&(N^D))+k[9]+2336552879&4294967295,O=S+(I<<12&4294967295|I>>>20),I=D+(N^O&(S^N))+k[10]+4294925233&4294967295,D=O+(I<<17&4294967295|I>>>15),I=N+(S^D&(O^S))+k[11]+2304563134&4294967295,N=D+(I<<22&4294967295|I>>>10),I=S+(O^N&(D^O))+k[12]+1804603682&4294967295,S=N+(I<<7&4294967295|I>>>25),I=O+(D^S&(N^D))+k[13]+4254626195&4294967295,O=S+(I<<12&4294967295|I>>>20),I=D+(N^O&(S^N))+k[14]+2792965006&4294967295,D=O+(I<<17&4294967295|I>>>15),I=N+(S^D&(O^S))+k[15]+1236535329&4294967295,N=D+(I<<22&4294967295|I>>>10),I=S+(D^O&(N^D))+k[1]+4129170786&4294967295,S=N+(I<<5&4294967295|I>>>27),I=O+(N^D&(S^N))+k[6]+3225465664&4294967295,O=S+(I<<9&4294967295|I>>>23),I=D+(S^N&(O^S))+k[11]+643717713&4294967295,D=O+(I<<14&4294967295|I>>>18),I=N+(O^S&(D^O))+k[0]+3921069994&4294967295,N=D+(I<<20&4294967295|I>>>12),I=S+(D^O&(N^D))+k[5]+3593408605&4294967295,S=N+(I<<5&4294967295|I>>>27),I=O+(N^D&(S^N))+k[10]+38016083&4294967295,O=S+(I<<9&4294967295|I>>>23),I=D+(S^N&(O^S))+k[15]+3634488961&4294967295,D=O+(I<<14&4294967295|I>>>18),I=N+(O^S&(D^O))+k[4]+3889429448&4294967295,N=D+(I<<20&4294967295|I>>>12),I=S+(D^O&(N^D))+k[9]+568446438&4294967295,S=N+(I<<5&4294967295|I>>>27),I=O+(N^D&(S^N))+k[14]+3275163606&4294967295,O=S+(I<<9&4294967295|I>>>23),I=D+(S^N&(O^S))+k[3]+4107603335&4294967295,D=O+(I<<14&4294967295|I>>>18),I=N+(O^S&(D^O))+k[8]+1163531501&4294967295,N=D+(I<<20&4294967295|I>>>12),I=S+(D^O&(N^D))+k[13]+2850285829&4294967295,S=N+(I<<5&4294967295|I>>>27),I=O+(N^D&(S^N))+k[2]+4243563512&4294967295,O=S+(I<<9&4294967295|I>>>23),I=D+(S^N&(O^S))+k[7]+1735328473&4294967295,D=O+(I<<14&4294967295|I>>>18),I=N+(O^S&(D^O))+k[12]+2368359562&4294967295,N=D+(I<<20&4294967295|I>>>12),I=S+(N^D^O)+k[5]+4294588738&4294967295,S=N+(I<<4&4294967295|I>>>28),I=O+(S^N^D)+k[8]+2272392833&4294967295,O=S+(I<<11&4294967295|I>>>21),I=D+(O^S^N)+k[11]+1839030562&4294967295,D=O+(I<<16&4294967295|I>>>16),I=N+(D^O^S)+k[14]+4259657740&4294967295,N=D+(I<<23&4294967295|I>>>9),I=S+(N^D^O)+k[1]+2763975236&4294967295,S=N+(I<<4&4294967295|I>>>28),I=O+(S^N^D)+k[4]+1272893353&4294967295,O=S+(I<<11&4294967295|I>>>21),I=D+(O^S^N)+k[7]+4139469664&4294967295,D=O+(I<<16&4294967295|I>>>16),I=N+(D^O^S)+k[10]+3200236656&4294967295,N=D+(I<<23&4294967295|I>>>9),I=S+(N^D^O)+k[13]+681279174&4294967295,S=N+(I<<4&4294967295|I>>>28),I=O+(S^N^D)+k[0]+3936430074&4294967295,O=S+(I<<11&4294967295|I>>>21),I=D+(O^S^N)+k[3]+3572445317&4294967295,D=O+(I<<16&4294967295|I>>>16),I=N+(D^O^S)+k[6]+76029189&4294967295,N=D+(I<<23&4294967295|I>>>9),I=S+(N^D^O)+k[9]+3654602809&4294967295,S=N+(I<<4&4294967295|I>>>28),I=O+(S^N^D)+k[12]+3873151461&4294967295,O=S+(I<<11&4294967295|I>>>21),I=D+(O^S^N)+k[15]+530742520&4294967295,D=O+(I<<16&4294967295|I>>>16),I=N+(D^O^S)+k[2]+3299628645&4294967295,N=D+(I<<23&4294967295|I>>>9),I=S+(D^(N|~O))+k[0]+4096336452&4294967295,S=N+(I<<6&4294967295|I>>>26),I=O+(N^(S|~D))+k[7]+1126891415&4294967295,O=S+(I<<10&4294967295|I>>>22),I=D+(S^(O|~N))+k[14]+2878612391&4294967295,D=O+(I<<15&4294967295|I>>>17),I=N+(O^(D|~S))+k[5]+4237533241&4294967295,N=D+(I<<21&4294967295|I>>>11),I=S+(D^(N|~O))+k[12]+1700485571&4294967295,S=N+(I<<6&4294967295|I>>>26),I=O+(N^(S|~D))+k[3]+2399980690&4294967295,O=S+(I<<10&4294967295|I>>>22),I=D+(S^(O|~N))+k[10]+4293915773&4294967295,D=O+(I<<15&4294967295|I>>>17),I=N+(O^(D|~S))+k[1]+2240044497&4294967295,N=D+(I<<21&4294967295|I>>>11),I=S+(D^(N|~O))+k[8]+1873313359&4294967295,S=N+(I<<6&4294967295|I>>>26),I=O+(N^(S|~D))+k[15]+4264355552&4294967295,O=S+(I<<10&4294967295|I>>>22),I=D+(S^(O|~N))+k[6]+2734768916&4294967295,D=O+(I<<15&4294967295|I>>>17),I=N+(O^(D|~S))+k[13]+1309151649&4294967295,N=D+(I<<21&4294967295|I>>>11),I=S+(D^(N|~O))+k[4]+4149444226&4294967295,S=N+(I<<6&4294967295|I>>>26),I=O+(N^(S|~D))+k[11]+3174756917&4294967295,O=S+(I<<10&4294967295|I>>>22),I=D+(S^(O|~N))+k[2]+718787259&4294967295,D=O+(I<<15&4294967295|I>>>17),I=N+(O^(D|~S))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+O&4294967295}i.prototype.v=function(R,S){S===void 0&&(S=R.length);const N=S-this.blockSize,k=this.C;let D=this.h,O=0;for(;O<S;){if(D==0)for(;O<=N;)a(this,R,O),O+=this.blockSize;if(typeof R=="string"){for(;O<S;)if(k[D++]=R.charCodeAt(O++),D==this.blockSize){a(this,k),D=0;break}}else for(;O<S;)if(k[D++]=R[O++],D==this.blockSize){a(this,k),D=0;break}}this.h=D,this.o+=S},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;S=this.o*8;for(var N=R.length-8;N<R.length;++N)R[N]=S&255,S/=256;for(this.v(R),R=Array(16),S=0,N=0;N<4;++N)for(let k=0;k<32;k+=8)R[S++]=this.g[N]>>>k&255;return R};function l(R,S){var N=h;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=S(R)}function c(R,S){this.h=S;const N=[];let k=!0;for(let D=R.length-1;D>=0;D--){const O=R[D]|0;k&&O==S||(N[D]=O,k=!1)}this.g=N}var h={};function p(R){return-128<=R&&R<128?l(R,function(S){return new c([S|0],S<0?-1:0)}):new c([R|0],R<0?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return x;if(R<0)return V(g(-R));const S=[];let N=1;for(let k=0;R>=N;k++)S[k]=R/N|0,N*=4294967296;return new c(S,0)}function v(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return V(v(R.substring(1),S));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(S,8));let k=x;for(let O=0;O<R.length;O+=8){var D=Math.min(8,R.length-O);const I=parseInt(R.substring(O,O+D),S);D<8?(D=g(Math.pow(S,D)),k=k.j(D).add(g(I))):(k=k.j(N),k=k.add(g(I)))}return k}var x=p(0),w=p(1),E=p(16777216);t=c.prototype,t.m=function(){if(M(this))return-V(this).m();let R=0,S=1;for(let N=0;N<this.g.length;N++){const k=this.i(N);R+=(k>=0?k:4294967296+k)*S,S*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(j(this))return"0";if(M(this))return"-"+V(this).toString(R);const S=g(Math.pow(R,6));var N=this;let k="";for(;;){const D=oe(N,S).g;N=q(N,D.j(S));let O=((N.g.length>0?N.g[0]:N.h)>>>0).toString(R);if(N=D,j(N))return O+k;for(;O.length<6;)O="0"+O;k=O+k}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function j(R){if(R.h!=0)return!1;for(let S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function M(R){return R.h==-1}t.l=function(R){return R=q(this,R),M(R)?-1:j(R)?0:1};function V(R){const S=R.g.length,N=[];for(let k=0;k<S;k++)N[k]=~R.g[k];return new c(N,~R.h).add(w)}t.abs=function(){return M(this)?V(this):this},t.add=function(R){const S=Math.max(this.g.length,R.g.length),N=[];let k=0;for(let D=0;D<=S;D++){let O=k+(this.i(D)&65535)+(R.i(D)&65535),I=(O>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);k=I>>>16,O&=65535,I&=65535,N[D]=I<<16|O}return new c(N,N[N.length-1]&-2147483648?-1:0)};function q(R,S){return R.add(V(S))}t.j=function(R){if(j(this)||j(R))return x;if(M(this))return M(R)?V(this).j(V(R)):V(V(this).j(R));if(M(R))return V(this.j(V(R)));if(this.l(E)<0&&R.l(E)<0)return g(this.m()*R.m());const S=this.g.length+R.g.length,N=[];for(var k=0;k<2*S;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(let D=0;D<R.g.length;D++){const O=this.i(k)>>>16,I=this.i(k)&65535,te=R.i(D)>>>16,Re=R.i(D)&65535;N[2*k+2*D]+=I*Re,B(N,2*k+2*D),N[2*k+2*D+1]+=O*Re,B(N,2*k+2*D+1),N[2*k+2*D+1]+=I*te,B(N,2*k+2*D+1),N[2*k+2*D+2]+=O*te,B(N,2*k+2*D+2)}for(R=0;R<S;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=S;R<2*S;R++)N[R]=0;return new c(N,0)};function B(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function K(R,S){this.g=R,this.h=S}function oe(R,S){if(j(S))throw Error("division by zero");if(j(R))return new K(x,x);if(M(R))return S=oe(V(R),S),new K(V(S.g),V(S.h));if(M(S))return S=oe(R,V(S)),new K(V(S.g),S.h);if(R.g.length>30){if(M(R)||M(S))throw Error("slowDivide_ only works with positive integers.");for(var N=w,k=S;k.l(R)<=0;)N=H(N),k=H(k);var D=Z(N,1),O=Z(k,1);for(k=Z(k,2),N=Z(N,2);!j(k);){var I=O.add(k);I.l(R)<=0&&(D=D.add(N),O=I),k=Z(k,1),N=Z(N,1)}return S=q(R,D.j(S)),new K(D,S)}for(D=x;R.l(S)>=0;){for(N=Math.max(1,Math.floor(R.m()/S.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),O=g(N),I=O.j(S);M(I)||I.l(R)>0;)N-=k,O=g(N),I=O.j(S);j(O)&&(O=w),D=D.add(O),R=q(R,I)}return new K(D,R)}t.B=function(R){return oe(this,R).h},t.and=function(R){const S=Math.max(this.g.length,R.g.length),N=[];for(let k=0;k<S;k++)N[k]=this.i(k)&R.i(k);return new c(N,this.h&R.h)},t.or=function(R){const S=Math.max(this.g.length,R.g.length),N=[];for(let k=0;k<S;k++)N[k]=this.i(k)|R.i(k);return new c(N,this.h|R.h)},t.xor=function(R){const S=Math.max(this.g.length,R.g.length),N=[];for(let k=0;k<S;k++)N[k]=this.i(k)^R.i(k);return new c(N,this.h^R.h)};function H(R){const S=R.g.length+1,N=[];for(let k=0;k<S;k++)N[k]=R.i(k)<<1|R.i(k-1)>>>31;return new c(N,R.h)}function Z(R,S){const N=S>>5;S%=32;const k=R.g.length-N,D=[];for(let O=0;O<k;O++)D[O]=S>0?R.i(O+N)>>>S|R.i(O+N+1)<<32-S:R.i(O+N);return new c(D,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,uS=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,ra=c}).apply(typeof iw<"u"?iw:typeof self<"u"?self:typeof window<"u"?window:{});var Mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dS,iu,hS,Qh,u0,fS,mS,pS;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mh=="object"&&Mh];for(var b=0;b<f.length;++b){var T=f[b];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=n(this);function a(f,b){if(b)e:{var T=i;f=f.split(".");for(var C=0;C<f.length-1;C++){var $=f[C];if(!($ in T))break e;T=T[$]}f=f[f.length-1],C=T[f],b=b(C),b!=C&&b!=null&&e(T,f,{configurable:!0,writable:!0,value:b})}}a("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(f){return f||function(b){var T=[],C;for(C in b)Object.prototype.hasOwnProperty.call(b,C)&&T.push([C,b[C]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(f){var b=typeof f;return b=="object"&&f!=null||b=="function"}function p(f,b,T){return f.call.apply(f.bind,arguments)}function g(f,b,T){return g=p,g.apply(null,arguments)}function v(f,b){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),f.apply(this,C)}}function x(f,b){function T(){}T.prototype=b.prototype,f.Z=b.prototype,f.prototype=new T,f.prototype.constructor=f,f.Ob=function(C,$,ne){for(var ve=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ve[Be-2]=arguments[Be];return b.prototype[$].apply(C,ve)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function E(f){const b=f.length;if(b>0){const T=Array(b);for(let C=0;C<b;C++)T[C]=f[C];return T}return[]}function j(f,b){for(let C=1;C<arguments.length;C++){const $=arguments[C];var T=typeof $;if(T=T!="object"?T:$?Array.isArray($)?"array":T:"null",T=="array"||T=="object"&&typeof $.length=="number"){T=f.length||0;const ne=$.length||0;f.length=T+ne;for(let ve=0;ve<ne;ve++)f[T+ve]=$[ve]}else f.push($)}}class M{constructor(b,T){this.i=b,this.j=T,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function V(f){c.setTimeout(()=>{throw f},0)}function q(){var f=R;let b=null;return f.g&&(b=f.g,f.g=f.g.next,f.g||(f.h=null),b.next=null),b}class B{constructor(){this.h=this.g=null}add(b,T){const C=K.get();C.set(b,T),this.h?this.h.next=C:this.g=C,this.h=C}}var K=new M(()=>new oe,f=>f.reset());class oe{constructor(){this.next=this.g=this.h=null}set(b,T){this.h=b,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let H,Z=!1,R=new B,S=()=>{const f=Promise.resolve(void 0);H=()=>{f.then(N)}};function N(){for(var f;f=q();){try{f.h.call(f.g)}catch(T){V(T)}var b=K;b.j(f),b.h<100&&(b.h++,f.next=b.g,b.g=f)}Z=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(f,b){this.type=f,this.g=this.target=b,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};c.addEventListener("test",T,b),c.removeEventListener("test",T,b)}catch{}return f})();function I(f){return/^[\s\xa0]*$/.test(f)}function te(f,b){D.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,b)}x(te,D),te.prototype.init=function(f,b){const T=this.type=f.type,C=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=b,b=f.relatedTarget,b||(T=="mouseover"?b=f.fromElement:T=="mouseout"&&(b=f.toElement)),this.relatedTarget=b,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&te.Z.h.call(this)},te.prototype.h=function(){te.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Re="closure_listenable_"+(Math.random()*1e6|0),ee=0;function X(f,b,T,C,$){this.listener=f,this.proxy=null,this.src=b,this.type=T,this.capture=!!C,this.ha=$,this.key=++ee,this.da=this.fa=!1}function ue(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function be(f,b,T){for(const C in f)b.call(T,f[C],C,f)}function we(f,b){for(const T in f)b.call(void 0,f[T],T,f)}function L(f){const b={};for(const T in f)b[T]=f[T];return b}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(f,b){let T,C;for(let $=1;$<arguments.length;$++){C=arguments[$];for(T in C)f[T]=C[T];for(let ne=0;ne<re.length;ne++)T=re[ne],Object.prototype.hasOwnProperty.call(C,T)&&(f[T]=C[T])}}function _e(f){this.src=f,this.g={},this.h=0}_e.prototype.add=function(f,b,T,C,$){const ne=f.toString();f=this.g[ne],f||(f=this.g[ne]=[],this.h++);const ve=ke(f,b,C,$);return ve>-1?(b=f[ve],T||(b.fa=!1)):(b=new X(b,this.src,ne,!!C,$),b.fa=T,f.push(b)),b};function De(f,b){const T=b.type;if(T in f.g){var C=f.g[T],$=Array.prototype.indexOf.call(C,b,void 0),ne;(ne=$>=0)&&Array.prototype.splice.call(C,$,1),ne&&(ue(b),f.g[T].length==0&&(delete f.g[T],f.h--))}}function ke(f,b,T,C){for(let $=0;$<f.length;++$){const ne=f[$];if(!ne.da&&ne.listener==b&&ne.capture==!!T&&ne.ha==C)return $}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),lt={};function nt(f,b,T,C,$){if(Array.isArray(b)){for(let ne=0;ne<b.length;ne++)nt(f,b[ne],T,C,$);return null}return T=wa(T),f&&f[Re]?f.J(b,T,h(C)?!!C.capture:!1,$):Is(f,b,T,!1,C,$)}function Is(f,b,T,C,$,ne){if(!b)throw Error("Invalid event type");const ve=h($)?!!$.capture:!!$;let Be=ti(f);if(Be||(f[qe]=Be=new _e(f)),T=Be.add(b,T,C,ve,ne),T.proxy)return T;if(C=ei(),T.proxy=C,C.src=f,C.listener=T,f.addEventListener)O||($=ve),$===void 0&&($=!1),f.addEventListener(b.toString(),C,$);else if(f.attachEvent)f.attachEvent(ds(b.toString()),C);else if(f.addListener&&f.removeListener)f.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ei(){function f(T){return b.call(f.src,f.listener,T)}const b=fr;return f}function hr(f,b,T,C,$){if(Array.isArray(b))for(var ne=0;ne<b.length;ne++)hr(f,b[ne],T,C,$);else C=h(C)?!!C.capture:!!C,T=wa(T),f&&f[Re]?(f=f.i,ne=String(b).toString(),ne in f.g&&(b=f.g[ne],T=ke(b,T,C,$),T>-1&&(ue(b[T]),Array.prototype.splice.call(b,T,1),b.length==0&&(delete f.g[ne],f.h--)))):f&&(f=ti(f))&&(b=f.g[b.toString()],f=-1,b&&(f=ke(b,T,C,$)),(T=f>-1?b[f]:null)&&Mi(T))}function Mi(f){if(typeof f!="number"&&f&&!f.da){var b=f.src;if(b&&b[Re])De(b.i,f);else{var T=f.type,C=f.proxy;b.removeEventListener?b.removeEventListener(T,C,f.capture):b.detachEvent?b.detachEvent(ds(T),C):b.addListener&&b.removeListener&&b.removeListener(C),(T=ti(b))?(De(T,f),T.h==0&&(T.src=null,b[qe]=null)):ue(f)}}}function ds(f){return f in lt?lt[f]:lt[f]="on"+f}function fr(f,b){if(f.da)f=!0;else{b=new te(b,this);const T=f.listener,C=f.ha||f.src;f.fa&&Mi(f),f=T.call(C,b)}return f}function ti(f){return f=f[qe],f instanceof _e?f:null}var _a="__closure_events_fn_"+(Math.random()*1e9>>>0);function wa(f){return typeof f=="function"?f:(f[_a]||(f[_a]=function(b){return f.handleEvent(b)}),f[_a])}function Ot(){k.call(this),this.i=new _e(this),this.M=this,this.G=null}x(Ot,k),Ot.prototype[Re]=!0,Ot.prototype.removeEventListener=function(f,b,T,C){hr(this,f,b,T,C)};function It(f,b){var T,C=f.G;if(C)for(T=[];C;C=C.G)T.push(C);if(f=f.M,C=b.type||b,typeof b=="string")b=new D(b,f);else if(b instanceof D)b.target=b.target||f;else{var $=b;b=new D(C,f),ye(b,$)}$=!0;let ne,ve;if(T)for(ve=T.length-1;ve>=0;ve--)ne=b.g=T[ve],$=U(ne,C,!0,b)&&$;if(ne=b.g=f,$=U(ne,C,!0,b)&&$,$=U(ne,C,!1,b)&&$,T)for(ve=0;ve<T.length;ve++)ne=b.g=T[ve],$=U(ne,C,!1,b)&&$}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var f=this.i;for(const b in f.g){const T=f.g[b];for(let C=0;C<T.length;C++)ue(T[C]);delete f.g[b],f.h--}}this.G=null},Ot.prototype.J=function(f,b,T,C){return this.i.add(String(f),b,!1,T,C)},Ot.prototype.K=function(f,b,T,C){return this.i.add(String(f),b,!0,T,C)};function U(f,b,T,C){if(b=f.i.g[String(b)],!b)return!0;b=b.concat();let $=!0;for(let ne=0;ne<b.length;++ne){const ve=b[ne];if(ve&&!ve.da&&ve.capture==T){const Be=ve.listener,Lt=ve.ha||ve.src;ve.fa&&De(f.i,ve),$=Be.call(Lt,C)!==!1&&$}}return $&&!C.defaultPrevented}function Q(f,b){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:c.setTimeout(f,b||0)}function ie(f){f.g=Q(()=>{f.g=null,f.i&&(f.i=!1,ie(f))},f.l);const b=f.h;f.h=null,f.m.apply(null,b)}class ge extends k{constructor(b,T){super(),this.m=b,this.l=T,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pe(f){k.call(this),this.h=f,this.g={}}x(pe,k);var fe=[];function Ce(f){be(f.g,function(b,T){this.g.hasOwnProperty(T)&&Mi(b)},f),f.g={}}pe.prototype.N=function(){pe.Z.N.call(this),Ce(this)},pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ge=c.JSON.stringify,st=c.JSON.parse,qt=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function hs(){}function Yn(){}var Qn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pt(){D.call(this,"d")}x(Pt,D);function An(){D.call(this,"c")}x(An,D);var Ct={},Ta=null;function mr(){return Ta=Ta||new Ot}Ct.Ia="serverreachability";function Ea(f){D.call(this,Ct.Ia,f)}x(Ea,D);function ni(f){const b=mr();It(b,new Ea(b))}Ct.STAT_EVENT="statevent";function Sa(f,b){D.call(this,Ct.STAT_EVENT,f),this.stat=b}x(Sa,D);function Ht(f){const b=mr();It(b,new Sa(b,f))}Ct.Ja="timingevent";function si(f,b){D.call(this,Ct.Ja,f),this.size=b}x(si,D);function ii(f,b){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},b)}function Ds(){this.g=!0}Ds.prototype.ua=function(){this.g=!1};function gm(f,b,T,C,$,ne){f.info(function(){if(f.g)if(ne){var ve="",Be=ne.split("&");for(let at=0;at<Be.length;at++){var Lt=Be[at].split("=");if(Lt.length>1){const Et=Lt[0];Lt=Lt[1];const gs=Et.split("_");ve=gs.length>=2&&gs[1]=="type"?ve+(Et+"="+Lt+"&"):ve+(Et+"=redacted&")}}}else ve=null;else ve=ne;return"XMLHTTP REQ ("+C+") [attempt "+$+"]: "+b+`
`+T+`
`+ve})}function ud(f,b,T,C,$,ne,ve){f.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+$+"]: "+b+`
`+T+`
`+ne+" "+ve})}function ri(f,b,T,C){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+ym(f,T)+(C?" "+C:"")})}function Aa(f,b){f.info(function(){return"TIMEOUT: "+b})}Ds.prototype.info=function(){};function ym(f,b){if(!f.g)return b;if(!b)return null;try{const ne=JSON.parse(b);if(ne){for(f=0;f<ne.length;f++)if(Array.isArray(ne[f])){var T=ne[f];if(!(T.length<2)){var C=T[1];if(Array.isArray(C)&&!(C.length<1)){var $=C[0];if($!="noop"&&$!="stop"&&$!="close")for(let ve=1;ve<C.length;ve++)C[ve]=""}}}}return Ge(ne)}catch{return b}}var Na={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Jl;function Ca(){}x(Ca,hs),Ca.prototype.g=function(){return new XMLHttpRequest},Jl=new Ca;function ki(f){return encodeURIComponent(String(f))}function dd(f){var b=1;f=f.split(":");const T=[];for(;b>0&&f.length;)T.push(f.shift()),b--;return f.length&&T.push(f.join(":")),T}function Vs(f,b,T,C){this.j=f,this.i=b,this.l=T,this.S=C||1,this.V=new pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ms}function Ms(){this.i=null,this.g="",this.h=!1}var Gt={},cn={};function ai(f,b,T){f.M=1,f.A=Ra($t(b)),f.u=T,f.R=!0,Eo(f,null)}function Eo(f,b){f.F=Date.now(),oi(f),f.B=$t(f.A);var T=f.B,C=f.S;Array.isArray(C)||(C=[String(C)]),Co(T.i,"t",C),f.C=0,T=f.j.L,f.h=new Ms,f.g=Ad(f.j,T?b:null,!f.u),f.P>0&&(f.O=new ge(g(f.Y,f,f.g),f.P)),b=f.V,T=f.g,C=f.ba;var $="readystatechange";Array.isArray($)||($&&(fe[0]=$.toString()),$=fe);for(let ne=0;ne<$.length;ne++){const ve=nt(T,$[ne],C||b.handleEvent,!1,b.h||b);if(!ve)break;b.g[ve.key]=ve}b=f.J?L(f.J):{},f.u?(f.v||(f.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,b)):(f.v="GET",f.g.ea(f.B,f.v,null,b)),ni(),gm(f.i,f.v,f.B,f.l,f.S,f.u)}Vs.prototype.ba=function(f){f=f.target;const b=this.O;b&&Ps(f)==3?b.j():this.Y(f)},Vs.prototype.Y=function(f){try{if(f==this.g)e:{const Be=Ps(this.g),Lt=this.g.ya(),at=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||pn(this.g)))){this.K||Be!=4||Lt==7||(Lt==8||at<=0?ni(3):ni(2)),li(this);var b=this.g.ca();this.X=b;var T=vm(this);if(this.o=b==200,ud(this.i,this.v,this.B,this.l,this.S,Be,b),this.o){if(this.U&&!this.L){t:{if(this.g){var C,$=this.g;if((C=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(C)){var ne=C;break t}}ne=null}if(f=ne)ri(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ci(this,f);else{this.o=!1,this.m=3,Ht(12),Wn(this),fs(this);break e}}if(this.R){f=!0;let Et;for(;!this.K&&this.C<T.length;)if(Et=fd(this,T),Et==cn){Be==4&&(this.m=4,Ht(14),f=!1),ri(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==Gt){this.m=4,Ht(15),ri(this.i,this.l,T,"[Invalid Chunk]"),f=!1;break}else ri(this.i,this.l,Et,null),ci(this,Et);if(hd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||T.length!=0||this.h.h||(this.m=1,Ht(16),f=!1),this.o=this.o&&f,!f)ri(this.i,this.l,T,"[Invalid Chunked Response]"),Wn(this),fs(this);else if(T.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),fc(ve),ve.P=!0,Ht(11))}}else ri(this.i,this.l,T,null),ci(this,T);Be==4&&Wn(this),this.o&&!this.K&&(Be==4?wd(this.j,this):(this.o=!1,oi(this)))}else Pi(this.g),b==400&&T.indexOf("Unknown SID")>0?(this.m=3,Ht(12)):(this.m=0,Ht(13)),Wn(this),fs(this)}}}catch{}finally{}};function vm(f){if(!hd(f))return f.g.la();const b=pn(f.g);if(b==="")return"";let T="";const C=b.length,$=Ps(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Wn(f),fs(f),"";f.h.i=new c.TextDecoder}for(let ne=0;ne<C;ne++)f.h.h=!0,T+=f.h.i.decode(b[ne],{stream:!($&&ne==C-1)});return b.length=0,f.h.g+=T,f.C=0,f.h.g}function hd(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function fd(f,b){var T=f.C,C=b.indexOf(`
`,T);return C==-1?cn:(T=Number(b.substring(T,C)),isNaN(T)?Gt:(C+=1,C+T>b.length?cn:(b=b.slice(C,C+T),f.C=C+T,b)))}Vs.prototype.cancel=function(){this.K=!0,Wn(this)};function oi(f){f.T=Date.now()+f.H,So(f,f.H)}function So(f,b){if(f.D!=null)throw Error("WatchDog timer not null");f.D=ii(g(f.aa,f),b)}function li(f){f.D&&(c.clearTimeout(f.D),f.D=null)}Vs.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Aa(this.i,this.B),this.M!=2&&(ni(),Ht(17)),Wn(this),this.m=2,fs(this)):So(this,this.T-f)};function fs(f){f.j.I==0||f.K||wd(f.j,f)}function Wn(f){li(f);var b=f.O;b&&typeof b.dispose=="function"&&b.dispose(),f.O=null,Ce(f.V),f.g&&(b=f.g,f.g=null,b.abort(),b.dispose())}function ci(f,b){try{var T=f.j;if(T.I!=0&&(T.g==f||di(T.h,f))){if(!f.L&&di(T.h,f)&&T.I==3){try{var C=T.Ba.g.parse(b)}catch{C=null}if(Array.isArray(C)&&C.length==3){var $=C;if($[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<f.F)Vo(T),wr(T);else break e;Oa(T),Ht(18)}}else T.xa=$[1],0<T.xa-T.K&&$[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=ii(g(T.Va,T),6e3));ui(T.h)<=1&&T.ta&&(T.ta=void 0)}else yi(T,11)}else if((f.L||T.g==f)&&Vo(T),!I(b))for($=T.Ba.g.parse(b),b=0;b<$.length;b++){let at=$[b];const Et=at[0];if(!(Et<=T.K))if(T.K=Et,at=at[1],T.I==2)if(at[0]=="c"){T.M=at[1],T.ba=at[2];const gs=at[3];gs!=null&&(T.ka=gs,T.j.info("VER="+T.ka));const vi=at[4];vi!=null&&(T.za=vi,T.j.info("SVER="+T.za));const Ls=at[5];Ls!=null&&typeof Ls=="number"&&Ls>0&&(C=1.5*Ls,T.O=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const Us=f.g;if(Us){const Pa=Us.g?Us.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pa){var ne=C.h;ne.g||Pa.indexOf("spdy")==-1&&Pa.indexOf("quic")==-1&&Pa.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(tc(ne,ne.h),ne.h=null))}if(C.G){const Mo=Us.g?Us.g.getResponseHeader("X-HTTP-Session-Id"):null;Mo&&(C.wa=Mo,ct(C.J,C.G,Mo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-f.F,T.j.info("Handshake RTT: "+T.T+"ms")),C=T;var ve=f;if(C.na=Sd(C,C.L?C.ba:null,C.W),ve.L){nc(C.h,ve);var Be=ve,Lt=C.O;Lt&&(Be.H=Lt),Be.D&&(li(Be),oi(Be)),C.g=ve}else bd(C);T.i.length>0&&gi(T)}else at[0]!="stop"&&at[0]!="close"||yi(T,7);else T.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?yi(T,7):dc(T):at[0]!="noop"&&T.l&&T.l.qa(at),T.A=0)}}ni(4)}catch{}}var Kt=class{constructor(f,b){this.g=f,this.map=b}};function Zl(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ec(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ui(f){return f.h?1:f.g?f.g.size:0}function di(f,b){return f.h?f.h==b:f.g?f.g.has(b):!1}function tc(f,b){f.g?f.g.add(b):f.h=b}function nc(f,b){f.h&&f.h==b?f.h=null:f.g&&f.g.has(b)&&f.g.delete(b)}Zl.prototype.cancel=function(){if(this.i=sc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function sc(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let b=f.i;for(const T of f.g.values())b=b.concat(T.G);return b}return E(f.i)}var md=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ao(f,b){if(f){f=f.split("&");for(let T=0;T<f.length;T++){const C=f[T].indexOf("=");let $,ne=null;C>=0?($=f[T].substring(0,C),ne=f[T].substring(C+1)):$=f[T],b($,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function Xn(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;f instanceof Xn?(this.l=f.l,un(this,f.j),this.o=f.o,this.g=f.g,pr(this,f.u),this.h=f.h,ic(this,vd(f.i)),this.m=f.m):f&&(b=String(f).match(md))?(this.l=!1,un(this,b[1]||"",!0),this.o=hi(b[2]||""),this.g=hi(b[3]||"",!0),pr(this,b[4]),this.h=hi(b[5]||"",!0),ic(this,b[6]||"",!0),this.m=hi(b[7]||"")):(this.l=!1,this.i=new yr(null,this.l))}Xn.prototype.toString=function(){const f=[];var b=this.j;b&&f.push(ja(b,No,!0),":");var T=this.g;return(T||b=="file")&&(f.push("//"),(b=this.o)&&f.push(ja(b,No,!0),"@"),f.push(ki(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&f.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(ja(T,T.charAt(0)=="/"?rc:pd,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",ja(T,gd)),f.join("")},Xn.prototype.resolve=function(f){const b=$t(this);let T=!!f.j;T?un(b,f.j):T=!!f.o,T?b.o=f.o:T=!!f.g,T?b.g=f.g:T=f.u!=null;var C=f.h;if(T)pr(b,f.u);else if(T=!!f.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var $=b.h.lastIndexOf("/");$!=-1&&(C=b.h.slice(0,$+1)+C)}if($=C,$==".."||$==".")C="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){C=$.lastIndexOf("/",0)==0,$=$.split("/");const ne=[];for(let ve=0;ve<$.length;){const Be=$[ve++];Be=="."?C&&ve==$.length&&ne.push(""):Be==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),C&&ve==$.length&&ne.push("")):(ne.push(Be),C=!0)}C=ne.join("/")}else C=$}return T?b.h=C:T=f.i.toString()!=="",T?ic(b,vd(f.i)):T=!!f.m,T&&(b.m=f.m),b};function $t(f){return new Xn(f)}function un(f,b,T){f.j=T?hi(b,!0):b,f.j&&(f.j=f.j.replace(/:$/,""))}function pr(f,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);f.u=b}else f.u=null}function ic(f,b,T){b instanceof yr?(f.i=b,Ro(f.i,f.l)):(T||(b=ja(b,gr)),f.i=new yr(b,f.l))}function ct(f,b,T){f.i.set(b,T)}function Ra(f){return ct(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function hi(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ja(f,b,T){return typeof f=="string"?(f=encodeURI(f).replace(b,Un),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Un(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var No=/[#\/\?@]/g,pd=/[#\?:]/g,rc=/[#\?]/g,gr=/[#\?@]/g,gd=/#/g;function yr(f,b){this.h=this.g=null,this.i=f||null,this.j=!!b}function zn(f){f.g||(f.g=new Map,f.h=0,f.i&&Ao(f.i,function(b,T){f.add(decodeURIComponent(b.replace(/\+/g," ")),T)}))}t=yr.prototype,t.add=function(f,b){zn(this),this.i=null,f=vr(this,f);let T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(b),this.h+=1,this};function yd(f,b){zn(f),b=vr(f,b),f.g.has(b)&&(f.i=null,f.h-=f.g.get(b).length,f.g.delete(b))}function ac(f,b){return zn(f),b=vr(f,b),f.g.has(b)}t.forEach=function(f,b){zn(this),this.g.forEach(function(T,C){T.forEach(function($){f.call(b,$,C,this)},this)},this)};function oc(f,b){zn(f);let T=[];if(typeof b=="string")ac(f,b)&&(T=T.concat(f.g.get(vr(f,b))));else for(f=Array.from(f.g.values()),b=0;b<f.length;b++)T=T.concat(f[b]);return T}t.set=function(f,b){return zn(this),this.i=null,f=vr(this,f),ac(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[b]),this.h+=1,this},t.get=function(f,b){return f?(f=oc(this,f),f.length>0?String(f[0]):b):b};function Co(f,b,T){yd(f,b),T.length>0&&(f.i=null,f.g.set(vr(f,b),E(T)),f.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],b=Array.from(this.g.keys());for(let C=0;C<b.length;C++){var T=b[C];const $=ki(T);T=oc(this,T);for(let ne=0;ne<T.length;ne++){let ve=$;T[ne]!==""&&(ve+="="+ki(T[ne])),f.push(ve)}}return this.i=f.join("&")};function vd(f){const b=new yr;return b.i=f.i,f.g&&(b.g=new Map(f.g),b.h=f.h),b}function vr(f,b){return b=String(b),f.j&&(b=b.toLowerCase()),b}function Ro(f,b){b&&!f.j&&(zn(f),f.i=null,f.g.forEach(function(T,C){const $=C.toLowerCase();C!=$&&(yd(this,C),Co(this,$,T))},f)),f.j=b}function ks(f,b){const T=new Ds;if(c.Image){const C=new Image;C.onload=v(ms,T,"TestLoadImage: loaded",!0,b,C),C.onerror=v(ms,T,"TestLoadImage: error",!1,b,C),C.onabort=v(ms,T,"TestLoadImage: abort",!1,b,C),C.ontimeout=v(ms,T,"TestLoadImage: timeout",!1,b,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=f}else b(!1)}function lc(f,b){const T=new Ds,C=new AbortController,$=setTimeout(()=>{C.abort(),ms(T,"TestPingServer: timeout",!1,b)},1e4);fetch(f,{signal:C.signal}).then(ne=>{clearTimeout($),ne.ok?ms(T,"TestPingServer: ok",!0,b):ms(T,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout($),ms(T,"TestPingServer: error",!1,b)})}function ms(f,b,T,C,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),C(T)}catch{}}function xr(){this.g=new qt}function fi(f){this.i=f.Sb||null,this.h=f.ab||!1}x(fi,hs),fi.prototype.g=function(){return new Ia(this.i,this.h)};function Ia(f,b){Ot.call(this),this.H=f,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Ia,Ot),t=Ia.prototype,t.open=function(f,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=b,this.readyState=1,Os(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(b.body=f),(this.H||c).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,br(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Os(this)),this.g&&(this.readyState=3,Os(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jo(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function jo(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var b=f.value?f.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!f.done}))&&(this.response=this.responseText+=b)}f.done?br(this):Os(this),this.readyState==3&&jo(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,br(this))},t.Na=function(f){this.g&&(this.response=f,br(this))},t.ga=function(){this.g&&br(this)};function br(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Os(f)}t.setRequestHeader=function(f,b){this.A.append(f,b)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],b=this.h.entries();for(var T=b.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=b.next();return f.join(`\r
`)};function Os(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ia.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ps(f){let b="";return be(f,function(T,C){b+=C,b+=":",b+=T,b+=`\r
`}),b}function Da(f,b,T){e:{for(C in T){var C=!1;break e}C=!0}C||(T=ps(T),typeof f=="string"?T!=null&&ki(T):ct(f,b,T))}function ht(f){Ot.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(ht,Ot);var mi=/^https?$/i,cc=["POST","PUT"];t=ht.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,b,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);b=b?b.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Jl.g(),this.g.onreadystatechange=w(g(this.Ca,this));try{this.B=!0,this.g.open(b,String(f),!0),this.B=!1}catch(ne){Va(this,ne);return}if(f=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var $ in C)T.set($,C[$]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const ne of C.keys())T.set(ne,C.get(ne));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(ne=>ne.toLowerCase()=="content-type"),$=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(cc,b,void 0)>=0)||C||$||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ve]of T)this.g.setRequestHeader(ne,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(ne){Va(this,ne)}};function Va(f,b){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=b,f.o=5,uc(f),Oi(f)}function uc(f){f.A||(f.A=!0,It(f,"complete"),It(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,It(this,"complete"),It(this,"abort"),Oi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),ht.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ma(this):this.Xa())},t.Xa=function(){Ma(this)};function Ma(f){if(f.h&&typeof l<"u"){if(f.v&&Ps(f)==4)setTimeout(f.Ca.bind(f),0);else if(It(f,"readystatechange"),Ps(f)==4){f.h=!1;try{const ne=f.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var T;if(!(T=b)){var C;if(C=ne===0){let ve=String(f.D).match(md)[1]||null;!ve&&c.self&&c.self.location&&(ve=c.self.location.protocol.slice(0,-1)),C=!mi.test(ve?ve.toLowerCase():"")}T=C}if(T)It(f,"complete"),It(f,"success");else{f.o=6;try{var $=Ps(f)>2?f.g.statusText:""}catch{$=""}f.l=$+" ["+f.ca()+"]",uc(f)}}finally{Oi(f)}}}}function Oi(f,b){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const T=f.g;f.g=null,b||It(f,"ready");try{T.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ps(f){return f.g?f.g.readyState:0}t.ca=function(){try{return Ps(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var b=this.g.responseText;return f&&b.indexOf(f)==0&&(b=b.substring(f.length)),st(b)}};function pn(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Pi(f){const b={};f=(f.g&&Ps(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<f.length;C++){if(I(f[C]))continue;var T=dd(f[C]);const $=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ne=b[$]||[];b[$]=ne,ne.push(T)}we(b,function(C){return C.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(f,b,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||b}function _r(f){this.za=0,this.i=[],this.j=new Ds,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,f),this.Za=pi("retryDelaySeedMs",1e4,f),this.Ta=pi("forwardChannelMaxRetries",2,f),this.va=pi("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Zl(f&&f.concurrentRequestLimit),this.Ba=new xr,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=_r.prototype,t.ka=8,t.I=1,t.connect=function(f,b,T,C){Ht(0),this.W=f,this.H=b||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.J=Sd(this,null,this.W),gi(this)};function dc(f){if(Io(f),f.I==3){var b=f.V++,T=$t(f.J);if(ct(T,"SID",f.M),ct(T,"RID",b),ct(T,"TYPE","terminate"),ka(f,T),b=new Vs(f,f.j,b),b.M=2,b.A=Ra($t(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(b.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=b.A,T=!0),T||(b.g=Ad(b.j,null),b.g.ea(b.A)),b.F=Date.now(),oi(b)}Ed(f)}function wr(f){f.g&&(fc(f),f.g.cancel(),f.g=null)}function Io(f){wr(f),f.v&&(c.clearTimeout(f.v),f.v=null),Vo(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function gi(f){if(!ec(f.h)&&!f.m){f.m=!0;var b=f.Ea;H||S(),Z||(H(),Z=!0),R.add(b,f),f.D=0}}function Do(f,b){return ui(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=b.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=ii(g(f.Ea,f,b),Td(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const $=new Vs(this,this.j,f);let ne=this.o;if(this.U&&(ne?(ne=L(ne),ye(ne,this.U)):ne=this.U),this.u!==null||this.R||($.J=ne,ne=null),this.S)e:{for(var b=0,T=0;T<this.i.length;T++){t:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(b+=C,b>4096){b=T;break e}if(b===4096||T===this.i.length-1){b=T+1;break e}}b=1e3}else b=1e3;b=xd(this,$,b),T=$t(this.J),ct(T,"RID",f),ct(T,"CVER",22),this.G&&ct(T,"X-HTTP-Session-Id",this.G),ka(this,T),ne&&(this.R?b="headers="+ki(ps(ne))+"&"+b:this.u&&Da(T,this.u,ne)),tc(this.h,$),this.Ra&&ct(T,"TYPE","init"),this.S?(ct(T,"$req",b),ct(T,"SID","null"),$.U=!0,ai($,T,null)):ai($,T,b),this.I=2}}else this.I==3&&(f?hc(this,f):this.i.length==0||ec(this.h)||hc(this))};function hc(f,b){var T;b?T=b.l:T=f.V++;const C=$t(f.J);ct(C,"SID",f.M),ct(C,"RID",T),ct(C,"AID",f.K),ka(f,C),f.u&&f.o&&Da(C,f.u,f.o),T=new Vs(f,f.j,T,f.D+1),f.u===null&&(T.J=f.o),b&&(f.i=b.G.concat(f.i)),b=xd(f,T,1e3),T.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),tc(f.h,T),ai(T,C,b)}function ka(f,b){f.H&&be(f.H,function(T,C){ct(b,C,T)}),f.l&&be({},function(T,C){ct(b,C,T)})}function xd(f,b,T){T=Math.min(f.i.length,T);const C=f.l?g(f.l.Ka,f.l,f):null;e:{var $=f.i;let Be=-1;for(;;){const Lt=["count="+T];Be==-1?T>0?(Be=$[0].g,Lt.push("ofs="+Be)):Be=0:Lt.push("ofs="+Be);let at=!0;for(let Et=0;Et<T;Et++){var ne=$[Et].g;const gs=$[Et].map;if(ne-=Be,ne<0)Be=Math.max(0,$[Et].g-100),at=!1;else try{ne="req"+ne+"_"||"";try{var ve=gs instanceof Map?gs:Object.entries(gs);for(const[vi,Ls]of ve){let Us=Ls;h(Ls)&&(Us=Ge(Ls)),Lt.push(ne+vi+"="+encodeURIComponent(Us))}}catch(vi){throw Lt.push(ne+"type="+encodeURIComponent("_badmap")),vi}}catch{C&&C(gs)}}if(at){ve=Lt.join("&");break e}}ve=void 0}return f=f.i.splice(0,T),b.G=f,ve}function bd(f){if(!f.g&&!f.v){f.Y=1;var b=f.Da;H||S(),Z||(H(),Z=!0),R.add(b,f),f.A=0}}function Oa(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=ii(g(f.Da,f),Td(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,_d(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=ii(g(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ht(10),wr(this),_d(this))};function fc(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function _d(f){f.g=new Vs(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var b=$t(f.na);ct(b,"RID","rpc"),ct(b,"SID",f.M),ct(b,"AID",f.K),ct(b,"CI",f.F?"0":"1"),!f.F&&f.ia&&ct(b,"TO",f.ia),ct(b,"TYPE","xmlhttp"),ka(f,b),f.u&&f.o&&Da(b,f.u,f.o),f.O&&(f.g.H=f.O);var T=f.g;f=f.ba,T.M=1,T.A=Ra($t(b)),T.u=null,T.R=!0,Eo(T,f)}t.Va=function(){this.C!=null&&(this.C=null,wr(this),Oa(this),Ht(19))};function Vo(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function wd(f,b){var T=null;if(f.g==b){Vo(f),fc(f),f.g=null;var C=2}else if(di(f.h,b))T=b.G,nc(f.h,b),C=1;else return;if(f.I!=0){if(b.o)if(C==1){T=b.u?b.u.length:0,b=Date.now()-b.F;var $=f.D;C=mr(),It(C,new si(C,T)),gi(f)}else bd(f);else if($=b.m,$==3||$==0&&b.X>0||!(C==1&&Do(f,b)||C==2&&Oa(f)))switch(T&&T.length>0&&(b=f.h,b.i=b.i.concat(T)),$){case 1:yi(f,5);break;case 4:yi(f,10);break;case 3:yi(f,6);break;default:yi(f,2)}}}function Td(f,b){let T=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(T*=2),T*b}function yi(f,b){if(f.j.info("Error code "+b),b==2){var T=g(f.bb,f),C=f.Ua;const $=!C;C=new Xn(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||un(C,"https"),Ra(C),$?ks(C.toString(),T):lc(C.toString(),T)}else Ht(2);f.I=0,f.l&&f.l.pa(b),Ed(f),Io(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function Ed(f){if(f.I=0,f.ja=[],f.l){const b=sc(f.h);(b.length!=0||f.i.length!=0)&&(j(f.ja,b),j(f.ja,f.i),f.h.i.length=0,E(f.i),f.i.length=0),f.l.oa()}}function Sd(f,b,T){var C=T instanceof Xn?$t(T):new Xn(T);if(C.g!="")b&&(C.g=b+"."+C.g),pr(C,C.u);else{var $=c.location;C=$.protocol,b=b?b+"."+$.hostname:$.hostname,$=+$.port;const ne=new Xn(null);C&&un(ne,C),b&&(ne.g=b),$&&pr(ne,$),T&&(ne.h=T),C=ne}return T=f.G,b=f.wa,T&&b&&ct(C,T,b),ct(C,"VER",f.ka),ka(f,C),C}function Ad(f,b,T){if(b&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=f.Aa&&!f.ma?new ht(new fi({ab:T})):new ht(f.ma),b.Fa(f.L),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nd(){}t=Nd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Tr(){}Tr.prototype.g=function(f,b){return new Dn(f,b)};function Dn(f,b){Ot.call(this),this.g=new _r(b),this.l=f,this.h=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(f?f["X-WebChannel-Client-Profile"]=b.sa:f={"X-WebChannel-Client-Profile":b.sa}),this.g.U=f,(f=b&&b.Qb)&&!I(f)&&(this.g.u=f),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!I(b)&&(this.g.G=b,f=this.h,f!==null&&b in f&&(f=this.h,b in f&&delete f[b])),this.j=new Li(this)}x(Dn,Ot),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){dc(this.g)},Dn.prototype.o=function(f){var b=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.v&&(T={},T.__data__=Ge(f),f=T);b.i.push(new Kt(b.Ya++,f)),b.I==3&&gi(b)},Dn.prototype.N=function(){this.g.l=null,delete this.j,dc(this.g),delete this.g,Dn.Z.N.call(this)};function Cd(f){Pt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var b=f.__sm__;if(b){e:{for(const T in b){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,b=b!==null&&f in b?b[f]:void 0),this.data=b}else this.data=f}x(Cd,Pt);function Rd(){An.call(this),this.status=1}x(Rd,An);function Li(f){this.g=f}x(Li,Nd),Li.prototype.ra=function(){It(this.g,"a")},Li.prototype.qa=function(f){It(this.g,new Cd(f))},Li.prototype.pa=function(f){It(this.g,new Rd)},Li.prototype.oa=function(){It(this.g,"b")},Tr.prototype.createWebChannel=Tr.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,pS=function(){return new Tr},mS=function(){return mr()},fS=Ct,u0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Na.NO_ERROR=0,Na.TIMEOUT=8,Na.HTTP_ERROR=6,Qh=Na,Xl.COMPLETE="complete",hS=Xl,Yn.EventType=Qn,Qn.OPEN="a",Qn.CLOSE="b",Qn.ERROR="c",Qn.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,iu=Yn,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,dS=ht}).apply(typeof Mh<"u"?Mh:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl="12.8.0";function g5(t){Fl=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new Pf("@firebase/firestore");function dl(){return fo.logLevel}function Te(t,...e){if(fo.logLevel<=We.DEBUG){const n=e.map(py);fo.debug(`Firestore (${Fl}): ${t}`,...n)}}function ar(t,...e){if(fo.logLevel<=We.ERROR){const n=e.map(py);fo.error(`Firestore (${Fl}): ${t}`,...n)}}function Rl(t,...e){if(fo.logLevel<=We.WARN){const n=e.map(py);fo.warn(`Firestore (${Fl}): ${t}`,...n)}}function py(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,gS(t,i,n)}function gS(t,e,n){let i=`FIRESTORE (${Fl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ar(i),new Error(i)}function et(t,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,t||gS(e,a,i)}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Zs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class y5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Rn.UNAUTHENTICATED)))}shutdown(){}}class v5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class x5{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){et(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,n(p)):Promise.resolve();let l=new Ys;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ys,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},h=p=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>h(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ys)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(et(typeof i.accessToken=="string",31837,{l:i}),new yS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class b5{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class _5{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new b5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,As(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){et(this.o===void 0,3512);const i=l=>{l.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Te("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new rw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new rw(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=T5(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<n&&(i+=e.charAt(a[l]%62))}return i}}function Xe(t,e){return t<e?-1:t>e?1:0}function d0(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const a=t.charAt(i),l=e.charAt(i);if(a!==l)return Cg(a)===Cg(l)?Xe(a,l):Cg(a)?1:-1}return Xe(t.length,e.length)}const E5=55296,S5=57343;function Cg(t){const e=t.charCodeAt(0);return e>=E5&&e<=S5}function jl(t,e,n){return t.length===e.length&&t.every(((i,a)=>n(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="__name__";class Ti{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ve(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ve(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ti.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const l=Ti.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return Xe(e.length,n.length)}static compareSegments(e,n){const i=Ti.isNumericId(e),a=Ti.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?Ti.extractNumericId(e).compare(Ti.extractNumericId(n)):d0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ra.fromString(e.substring(4,e.length-2))}}class gt extends Ti{construct(e,n,i){return new gt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((a=>a.length>0)))}return new gt(n)}static emptyPath(){return new gt([])}}const A5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends Ti{construct(e,n,i){return new Tn(e,n,i)}static isValidIdentifier(e){return A5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aw}static keyField(){return new Tn([aw])}static fromServerFormat(e){const n=[];let i="",a=0;const l=()=>{if(i.length===0)throw new xe(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new xe(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new xe(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(i+=h,a++):(l(),a++)}if(l(),c)throw new xe(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tn(n)}static emptyPath(){return new Tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(gt.fromString(e))}static fromName(e){return new je(gt.fromString(e).popFirst(5))}static empty(){return new je(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new gt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t,e,n){if(!n)throw new xe(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function N5(t,e,n,i){if(e===!0&&i===!0)throw new xe(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ow(t){if(!je.isDocumentKey(t))throw new xe(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lw(t){if(je.isDocumentKey(t))throw new xe(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function qf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ve(12329,{type:typeof t})}function us(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qf(t);throw new xe(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ku(t,e){if(!xS(t))throw new xe(le.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const c=t[i];if(a&&typeof c!==a){n=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){n=`Expected '${i}' field to equal '${l.value}'`;break}}if(n)throw new xe(le.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=-62135596800,uw=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*uw);return new _t(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<cw)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uw}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ku(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:sn("string",_t._jsonSchemaVersion),seconds:sn("number"),nanoseconds:sn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new _t(0,0))}static max(){return new Oe(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=-1;function C5(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,a=Oe.fromTimestamp(i===1e9?new _t(n+1,0):new _t(n,i));return new ca(a,je.empty(),e)}function R5(t){return new ca(t.readTime,t.key,Au)}class ca{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ca(Oe.min(),je.empty(),Au)}static max(){return new ca(Oe.max(),je.empty(),Au)}}function j5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=je.comparator(t.documentKey,e.documentKey),n!==0?n:Xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class D5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==I5)throw t;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new he(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(i,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof he?n:he.resolve(n)}catch(n){return he.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):he.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):he.reject(n)}static resolve(e){return new he(((n,i)=>{n(e)}))}static reject(e){return new he(((n,i)=>{i(e)}))}static waitFor(e){return new he(((n,i)=>{let a=0,l=0,c=!1;e.forEach((h=>{++a,h.next((()=>{++l,c&&l===a&&n()}),(p=>i(p)))})),c=!0,l===a&&n()}))}static or(e){let n=he.resolve(!1);for(const i of e)n=n.next((a=>a?he.resolve(a):i()));return n}static forEach(e,n){const i=[];return e.forEach(((a,l)=>{i.push(n.call(this,a,l))})),this.waitFor(i)}static mapArray(e,n){return new he(((i,a)=>{const l=e.length,c=new Array(l);let h=0;for(let p=0;p<l;p++){const g=p;n(e[g]).next((v=>{c[g]=v,++h,h===l&&i(c)}),(v=>a(v)))}}))}static doWhile(e,n){return new he(((i,a)=>{const l=()=>{e()===!0?n().next((()=>{l()}),a):i()};l()}))}}function V5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=-1;function $u(t){return t==null}function yf(t){return t===0&&1/t==-1/0}function M5(t){return typeof t=="number"&&Number.isInteger(t)&&!yf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="";function k5(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=dw(e)),e=O5(t.get(n),e);return dw(e)}function O5(t,e){let n=e;const i=t.length;for(let a=0;a<i;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case bS:n+="";break;default:n+=l}}return n}function dw(t){return t+bS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function va(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function P5(t,e){const n=[];for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.push(e(t[i],i,t));return n}function _S(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){this.comparator=e,this.root=n||wn.EMPTY}insert(e,n){return new jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kh(this.root,e,this.comparator,!1)}getReverseIterator(){return new kh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kh(this.root,e,this.comparator,!0)}}class kh{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?i(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wn{constructor(e,n,i,a,l){this.key=e,this.value=n,this.color=i??wn.RED,this.left=a??wn.EMPTY,this.right=l??wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,l){return new wn(e??this.key,n??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,i),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return wn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,n,i,a,l){return this}insert(e,n,i){return new wn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fw(this.data.getIterator())}getIteratorFrom(e){return new fw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ln(this.comparator);return n.data=e,n}}class fw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new os([])}unionWith(e){let n=new ln(Tn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new os(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new wS("Invalid base64 string: "+l):l}})(e);return new Sn(n)}static fromUint8Array(e){const n=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const L5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ua(t){if(et(!!t,39018),typeof t=="string"){let e=0;const n=L5.exec(t);if(et(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Bt(t.seconds),nanos:Bt(t.nanos)}}function Bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function da(t){return typeof t=="string"?Sn.fromBase64String(t):Sn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="server_timestamp",ES="__type__",SS="__previous_value__",AS="__local_write_time__";function vy(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ES])==null?void 0:i.stringValue)===TS}function Gf(t){const e=t.mapValue.fields[SS];return vy(e)?Gf(e):e}function Nu(t){const e=ua(t.mapValue.fields[AS].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,n,i,a,l,c,h,p,g,v,x){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=x}}const vf="(default)";class Cu{constructor(e,n){this.projectId=e,this.database=n||vf}static empty(){return new Cu("","")}get isDefaultDatabase(){return this.database===vf}isEqual(e){return e instanceof Cu&&e.projectId===this.projectId&&e.database===this.database}}function z5(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new xe(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cu(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="__type__",B5="__max__",Oh={mapValue:{}},CS="__vector__",xf="value";function ha(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vy(t)?4:q5(t)?9007199254740991:F5(t)?10:11:Ve(28295,{value:t})}function Di(t,e){if(t===e)return!0;const n=ha(t);if(n!==ha(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nu(t).isEqual(Nu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ua(a.timestampValue),h=ua(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,l){return da(a.bytesValue).isEqual(da(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,l){return Bt(a.geoPointValue.latitude)===Bt(l.geoPointValue.latitude)&&Bt(a.geoPointValue.longitude)===Bt(l.geoPointValue.longitude)})(t,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Bt(a.integerValue)===Bt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Bt(a.doubleValue),h=Bt(l.doubleValue);return c===h?yf(c)===yf(h):isNaN(c)&&isNaN(h)}return!1})(t,e);case 9:return jl(t.arrayValue.values||[],e.arrayValue.values||[],Di);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},h=l.mapValue.fields||{};if(hw(c)!==hw(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!Di(c[p],h[p])))return!1;return!0})(t,e);default:return Ve(52216,{left:t})}}function Ru(t,e){return(t.values||[]).find((n=>Di(n,e)))!==void 0}function Il(t,e){if(t===e)return 0;const n=ha(t),i=ha(e);if(n!==i)return Xe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(t.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=Bt(l.integerValue||l.doubleValue),p=Bt(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1})(t,e);case 3:return mw(t.timestampValue,e.timestampValue);case 4:return mw(Nu(t),Nu(e));case 5:return d0(t.stringValue,e.stringValue);case 6:return(function(l,c){const h=da(l),p=da(c);return h.compareTo(p)})(t.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),p=c.split("/");for(let g=0;g<h.length&&g<p.length;g++){const v=Xe(h[g],p[g]);if(v!==0)return v}return Xe(h.length,p.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=Xe(Bt(l.latitude),Bt(c.latitude));return h!==0?h:Xe(Bt(l.longitude),Bt(c.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return pw(t.arrayValue,e.arrayValue);case 10:return(function(l,c){var w,E,j,M;const h=l.fields||{},p=c.fields||{},g=(w=h[xf])==null?void 0:w.arrayValue,v=(E=p[xf])==null?void 0:E.arrayValue,x=Xe(((j=g==null?void 0:g.values)==null?void 0:j.length)||0,((M=v==null?void 0:v.values)==null?void 0:M.length)||0);return x!==0?x:pw(g,v)})(t.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Oh.mapValue&&c===Oh.mapValue)return 0;if(l===Oh.mapValue)return 1;if(c===Oh.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let x=0;x<p.length&&x<v.length;++x){const w=d0(p[x],v[x]);if(w!==0)return w;const E=Il(h[p[x]],g[v[x]]);if(E!==0)return E}return Xe(p.length,v.length)})(t.mapValue,e.mapValue);default:throw Ve(23264,{he:n})}}function mw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xe(t,e);const n=ua(t),i=ua(e),a=Xe(n.seconds,i.seconds);return a!==0?a:Xe(n.nanos,i.nanos)}function pw(t,e){const n=t.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const l=Il(n[a],i[a]);if(l)return l}return Xe(n.length,i.length)}function Dl(t){return h0(t)}function h0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=ua(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return da(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return je.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",a=!0;for(const l of n.values||[])a?a=!1:i+=",",i+=h0(l);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${h0(n.fields[c])}`;return a+"}"})(t.mapValue):Ve(61005,{value:t})}function Wh(t){switch(ha(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gf(t);return e?16+Wh(e):16;case 5:return 2*t.stringValue.length;case 6:return da(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Wh(l)),0)})(t.arrayValue);case 10:case 11:return(function(i){let a=0;return va(i.fields,((l,c)=>{a+=l.length+Wh(c)})),a})(t.mapValue);default:throw Ve(13486,{value:t})}}function gw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function f0(t){return!!t&&"integerValue"in t}function xy(t){return!!t&&"arrayValue"in t}function yw(t){return!!t&&"nullValue"in t}function vw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xh(t){return!!t&&"mapValue"in t}function F5(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[NS])==null?void 0:i.stringValue)===CS}function hu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return va(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=hu(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hu(t.arrayValue.values[n]);return e}return{...t}}function q5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===B5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Xh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(n)}setAll(e){let n=Tn.emptyPath(),i={},a=[];e.forEach(((c,h)=>{if(!n.isImmediateParentOf(h)){const p=this.getFieldsMap(n);this.applyChanges(p,i,a),i={},a=[],n=h.popLast()}c?i[h.lastSegment()]=hu(c):a.push(h.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,i,a)}delete(e){const n=this.field(e.popLast());Xh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Di(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];Xh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){va(n,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new jn(hu(this.value))}}function RS(t){const e=[];return va(t.fields,((n,i)=>{const a=new Tn([n]);if(Xh(i)){const l=RS(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new os(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n,i,a,l,c,h){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new fn(e,0,Oe.min(),Oe.min(),Oe.min(),jn.empty(),0)}static newFoundDocument(e,n,i,a){return new fn(e,1,n,Oe.min(),i,a,0)}static newNoDocument(e,n){return new fn(e,2,n,Oe.min(),Oe.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new fn(e,3,n,Oe.min(),Oe.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n){this.position=e,this.inclusive=n}}function xw(t,e,n){let i=0;for(let a=0;a<t.position.length;a++){const l=e[a],c=t.position[a];if(l.field.isKeyField()?i=je.comparator(je.fromName(c.referenceValue),n.key):i=Il(c,n.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function bw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Di(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n="asc"){this.field=e,this.dir=n}}function H5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{}class nn extends jS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new K5(e,n,i):n==="array-contains"?new Q5(e,i):n==="in"?new W5(e,i):n==="not-in"?new X5(e,i):n==="array-contains-any"?new J5(e,i):new nn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new $5(e,i):new Y5(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Il(n,this.value)):n!==null&&ha(this.value)===ha(n)&&this.matchesComparison(Il(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Js extends jS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Js(e,n)}matches(e){return IS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function IS(t){return t.op==="and"}function DS(t){return G5(t)&&IS(t)}function G5(t){for(const e of t.filters)if(e instanceof Js)return!1;return!0}function m0(t){if(t instanceof nn)return t.field.canonicalString()+t.op.toString()+Dl(t.value);if(DS(t))return t.filters.map((e=>m0(e))).join(",");{const e=t.filters.map((n=>m0(n))).join(",");return`${t.op}(${e})`}}function VS(t,e){return t instanceof nn?(function(i,a){return a instanceof nn&&i.op===a.op&&i.field.isEqual(a.field)&&Di(i.value,a.value)})(t,e):t instanceof Js?(function(i,a){return a instanceof Js&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,h)=>l&&VS(c,a.filters[h])),!0):!1})(t,e):void Ve(19439)}function MS(t){return t instanceof nn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Dl(n.value)}`})(t):t instanceof Js?(function(n){return n.op.toString()+" {"+n.getFilters().map(MS).join(" ,")+"}"})(t):"Filter"}class K5 extends nn{constructor(e,n,i){super(e,n,i),this.key=je.fromName(i.referenceValue)}matches(e){const n=je.comparator(e.key,this.key);return this.matchesComparison(n)}}class $5 extends nn{constructor(e,n){super(e,"in",n),this.keys=kS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Y5 extends nn{constructor(e,n){super(e,"not-in",n),this.keys=kS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function kS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>je.fromName(i.referenceValue)))}class Q5 extends nn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xy(n)&&Ru(n.arrayValue,this.value)}}class W5 extends nn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ru(this.value.arrayValue,n)}}class X5 extends nn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ru(this.value.arrayValue,n)}}class J5 extends nn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Ru(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e,n=null,i=[],a=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function _w(t,e=null,n=[],i=[],a=null,l=null,c=null){return new Z5(t,e,n,i,a,l,c)}function by(t){const e=Le(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>m0(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),$u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Dl(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Dl(i))).join(",")),e.Te=n}return e.Te}function _y(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!H5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!VS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bw(t.startAt,e.startAt)&&bw(t.endAt,e.endAt)}function p0(t){return je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n=null,i=[],a=[],l=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function eM(t,e,n,i,a,l,c,h){return new Gl(t,e,n,i,a,l,c,h)}function wy(t){return new Gl(t)}function ww(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tM(t){return je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function OS(t){return t.collectionGroup!==null}function fu(t){const e=Le(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new ln(Tn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(h=h.add(g.field))}))})),h})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ju(l,i))})),n.has(Tn.keyField().canonicalString())||e.Ie.push(new ju(Tn.keyField(),i))}return e.Ie}function Ni(t){const e=Le(t);return e.Ee||(e.Ee=PS(e,fu(t))),e.Ee}function nM(t){const e=Le(t);return e.Re||(e.Re=PS(e,t.explicitOrderBy)),e.Re}function PS(t,e){if(t.limitType==="F")return _w(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new ju(a.field,l)}));const n=t.endAt?new bf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new bf(t.startAt.position,t.startAt.inclusive):null;return _w(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function g0(t,e){const n=t.filters.concat([e]);return new Gl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sM(t,e){const n=t.explicitOrderBy.concat([e]);return new Gl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function y0(t,e,n){return new Gl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kf(t,e){return _y(Ni(t),Ni(e))&&t.limitType===e.limitType}function LS(t){return`${by(Ni(t))}|lt:${t.limitType}`}function hl(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((a=>MS(a))).join(", ")}]`),$u(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((a=>Dl(a))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((a=>Dl(a))).join(",")),`Target(${i})`})(Ni(t))}; limitType=${t.limitType})`}function $f(t,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):je.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(t,e)&&(function(i,a){for(const l of fu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(t,e)&&(function(i,a){return!(i.startAt&&!(function(c,h,p){const g=xw(c,h,p);return c.inclusive?g<=0:g<0})(i.startAt,fu(i),a)||i.endAt&&!(function(c,h,p){const g=xw(c,h,p);return c.inclusive?g>=0:g>0})(i.endAt,fu(i),a))})(t,e)}function iM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function US(t){return(e,n)=>{let i=!1;for(const a of fu(t)){const l=rM(a,e,n);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function rM(t,e,n){const i=t.field.isKeyField()?je.comparator(e.key,n.key):(function(l,c,h){const p=c.data.field(l),g=h.data.field(l);return p!==null&&g!==null?Il(p,g):Ve(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,((n,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return _S(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=new jt(je.comparator);function or(){return aM}const zS=new jt(je.comparator);function ru(...t){let e=zS;for(const n of t)e=e.insert(n.key,n);return e}function BS(t){let e=zS;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function so(){return mu()}function FS(){return mu()}function mu(){return new xo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const oM=new jt(je.comparator),lM=new ln(je.comparator);function Je(...t){let e=lM;for(const n of t)e=e.add(n);return e}const cM=new ln(Xe);function uM(){return cM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yf(e)?"-0":e}}function qS(t){return{integerValue:""+t}}function HS(t,e){return M5(e)?qS(e):Ty(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this._=void 0}}function dM(t,e,n){return t instanceof Iu?(function(a,l){const c={fields:{[ES]:{stringValue:TS},[AS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&vy(l)&&(l=Gf(l)),l&&(c.fields[SS]=l),{mapValue:c}})(n,e):t instanceof Du?KS(t,e):t instanceof Vu?$S(t,e):(function(a,l){const c=GS(a,l),h=Tw(c)+Tw(a.Ae);return f0(c)&&f0(a.Ae)?qS(h):Ty(a.serializer,h)})(t,e)}function hM(t,e,n){return t instanceof Du?KS(t,e):t instanceof Vu?$S(t,e):n}function GS(t,e){return t instanceof Mu?(function(i){return f0(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Iu extends Yf{}class Du extends Yf{constructor(e){super(),this.elements=e}}function KS(t,e){const n=YS(e);for(const i of t.elements)n.some((a=>Di(a,i)))||n.push(i);return{arrayValue:{values:n}}}class Vu extends Yf{constructor(e){super(),this.elements=e}}function $S(t,e){let n=YS(e);for(const i of t.elements)n=n.filter((a=>!Di(a,i)));return{arrayValue:{values:n}}}class Mu extends Yf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Tw(t){return Bt(t.integerValue||t.doubleValue)}function YS(t){return xy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n){this.field=e,this.transform=n}}function fM(t,e){return t.field.isEqual(e.field)&&(function(i,a){return i instanceof Du&&a instanceof Du||i instanceof Vu&&a instanceof Vu?jl(i.elements,a.elements,Di):i instanceof Mu&&a instanceof Mu?Di(i.Ae,a.Ae):i instanceof Iu&&a instanceof Iu})(t.transform,e.transform)}class mM{constructor(e,n){this.version=e,this.transformResults=n}}class En{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qf{}function WS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wf(t.key,En.none()):new Yu(t.key,t.data,En.none());{const n=t.data,i=jn.empty();let a=new ln(Tn.comparator);for(let l of e.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new xa(t.key,i,new os(a.toArray()),En.none())}}function pM(t,e,n){t instanceof Yu?(function(a,l,c){const h=a.value.clone(),p=Sw(a.fieldTransforms,l,c.transformResults);h.setAll(p),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(t,e,n):t instanceof xa?(function(a,l,c){if(!Jh(a.precondition,l))return void l.convertToUnknownDocument(c.version);const h=Sw(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(XS(a)),p.setAll(h),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(t,e,n):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,n)}function pu(t,e,n,i){return t instanceof Yu?(function(l,c,h,p){if(!Jh(l.precondition,c))return h;const g=l.value.clone(),v=Aw(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(t,e,n,i):t instanceof xa?(function(l,c,h,p){if(!Jh(l.precondition,c))return h;const g=Aw(l.fieldTransforms,p,c),v=c.data;return v.setAll(XS(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((x=>x.field)))})(t,e,n,i):(function(l,c,h){return Jh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(t,e,n)}function gM(t,e){let n=null;for(const i of t.fieldTransforms){const a=e.data.field(i.field),l=GS(i.transform,a||null);l!=null&&(n===null&&(n=jn.empty()),n.set(i.field,l))}return n||null}function Ew(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&jl(i,a,((l,c)=>fM(l,c)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yu extends Qf{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class xa extends Qf{constructor(e,n,i,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function XS(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function Sw(t,e,n){const i=new Map;et(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let a=0;a<n.length;a++){const l=t[a],c=l.transform,h=e.data.field(l.field);i.set(l.field,hM(c,h,n[a]))}return i}function Aw(t,e,n){const i=new Map;for(const a of t){const l=a.transform,c=n.data.field(a.field);i.set(a.field,dM(l,c,e))}return i}class Wf extends Qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JS extends Qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&pM(l,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=pu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=pu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=FS();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=n.has(a.key)?null:h;const p=WS(c,h);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Oe.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Je())}isEqual(e){return this.batchId===e.batchId&&jl(this.mutations,e.mutations,((n,i)=>Ew(n,i)))&&jl(this.baseMutations,e.baseMutations,((n,i)=>Ew(n,i)))}}class Ey{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){et(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return oM})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Ey(e,n,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,n,i){this.alias=e,this.aggregateType=n,this.fieldPath=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,tt;function ZS(t){switch(t){case le.OK:return Ve(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Ve(15467,{code:t})}}function eA(t){if(t===void 0)return ar("GRPC error has no .code"),le.UNKNOWN;switch(t){case Zt.OK:return le.OK;case Zt.CANCELLED:return le.CANCELLED;case Zt.UNKNOWN:return le.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return le.INTERNAL;case Zt.UNAVAILABLE:return le.UNAVAILABLE;case Zt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Zt.NOT_FOUND:return le.NOT_FOUND;case Zt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Zt.ABORTED:return le.ABORTED;case Zt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Zt.DATA_LOSS:return le.DATA_LOSS;default:return Ve(39323,{code:t})}}(tt=Zt||(Zt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=new ra([4294967295,4294967295],0);function Nw(t){const e=_M().encode(t),n=new uS;return n.update(e),new Uint8Array(n.digest())}function Cw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ra([n,i],0),new ra([a,l],0)]}class Sy{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new au(`Invalid padding: ${n}`);if(i<0)throw new au(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new au(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new au(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ra.fromNumber(this.ge)}ye(e,n,i){let a=e.add(n.multiply(ra.fromNumber(i)));return a.compare(wM)===1&&(a=new ra([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Nw(e),[i,a]=Cw(n);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Sy(l,a,n);return i.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const n=Nw(e),[i,a]=Cw(n);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.be(c)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n,i,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,Qu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Xf(Oe.min(),a,new jt(Xe),or(),Je())}}class Qu{constructor(e,n,i,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Qu(i,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n,i,a){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=a}}class tA{constructor(e,n){this.targetId=e,this.Ce=n}}class nA{constructor(e,n,i=Sn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class Rw{constructor(){this.ve=0,this.Fe=jw(),this.Me=Sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),n=Je(),i=Je();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:Ve(38017,{changeType:l})}})),new Qu(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=jw()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class TM{constructor(e){this.Ge=e,this.ze=new Map,this.je=or(),this.He=Ph(),this.Je=Ph(),this.Ze=new jt(Xe)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,i=e.Ce.count,a=this.ot(n);if(a){const l=a.target;if(p0(l))if(i===0){const c=new je(l.path);this.et(n,c,fn.newNoDocument(c,Oe.min()))}else et(i===1,20013,{expectedCount:i});else{const c=this._t(n);if(c!==i){const h=this.ut(e),p=h?this.ct(h,e,c):1;if(p!==0){this.it(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=n;let c,h;try{c=da(i).toUint8Array()}catch(p){if(p instanceof wS)return Rl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new Sy(c,a,l)}catch(p){return Rl(p instanceof au?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.ge===0?null:h}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(n,l,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&p0(h.target)){const p=new je(h.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,fn.newNoDocument(p,e))}l.Be&&(n.set(c,l.ke()),l.Ke())}}));let i=Je();this.Je.forEach(((l,c)=>{let h=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Xf(e,n,this.Ze,this.je,i);return this.je=or(),this.He=Ph(),this.Je=Ph(),this.Ze=new jt(Xe),a}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.qe(n,1):a.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Rw,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new ln(Xe),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new ln(Xe),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rw),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ph(){return new jt(je.comparator)}function jw(){return new jt(je.comparator)}const EM={asc:"ASCENDING",desc:"DESCENDING"},SM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AM={and:"AND",or:"OR"};class NM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function v0(t,e){return t.useProto3Json||$u(e)?e:{value:e}}function _f(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CM(t,e){return _f(t,e.toTimestamp())}function cs(t){return et(!!t,49232),Oe.fromTimestamp((function(n){const i=ua(n);return new _t(i.seconds,i.nanos)})(t))}function Ay(t,e){return x0(t,e).canonicalString()}function x0(t,e){const n=(function(a){return new gt(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function iA(t){const e=gt.fromString(t);return et(dA(e),10190,{key:e.toString()}),e}function wf(t,e){return Ay(t.databaseId,e.path)}function gu(t,e){const n=iA(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new je(aA(n))}function rA(t,e){return Ay(t.databaseId,e)}function RM(t){const e=iA(t);return e.length===4?gt.emptyPath():aA(e)}function b0(t){return new gt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aA(t){return et(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Iw(t,e,n){return{name:wf(t,e),fields:n.value.mapValue.fields}}function jM(t,e){return"found"in e?(function(i,a){et(!!a.found,43571),a.found.name,a.found.updateTime;const l=gu(i,a.found.name),c=cs(a.found.updateTime),h=a.found.createTime?cs(a.found.createTime):Oe.min(),p=new jn({mapValue:{fields:a.found.fields}});return fn.newFoundDocument(l,c,h,p)})(t,e):"missing"in e?(function(i,a){et(!!a.missing,3894),et(!!a.readTime,22933);const l=gu(i,a.missing),c=cs(a.readTime);return fn.newNoDocument(l,c)})(t,e):Ve(7234,{result:e})}function IM(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ve(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(et(v===void 0||typeof v=="string",58123),Sn.fromBase64String(v||"")):(et(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Sn.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(g){const v=g.code===void 0?le.UNKNOWN:eA(g.code);return new xe(v,g.message||"")})(c);n=new nA(i,a,l,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=gu(t,i.document.name),l=cs(i.document.updateTime),c=i.document.createTime?cs(i.document.createTime):Oe.min(),h=new jn({mapValue:{fields:i.document.fields}}),p=fn.newFoundDocument(a,l,c,h),g=i.targetIds||[],v=i.removedTargetIds||[];n=new Zh(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=gu(t,i.document),l=i.readTime?cs(i.readTime):Oe.min(),c=fn.newNoDocument(a,l),h=i.removedTargetIds||[];n=new Zh([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=gu(t,i.document),l=i.removedTargetIds||[];n=new Zh([],l,a,null)}else{if(!("filter"in e))return Ve(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new bM(a,l),h=i.targetId;n=new tA(h,c)}}return n}function oA(t,e){let n;if(e instanceof Yu)n={update:Iw(t,e.key,e.value)};else if(e instanceof Wf)n={delete:wf(t,e.key)};else if(e instanceof xa)n={update:Iw(t,e.key,e.data),updateMask:zM(e.fieldMask)};else{if(!(e instanceof JS))return Ve(16599,{dt:e.type});n={verify:wf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const h=c.transform;if(h instanceof Iu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Du)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Vu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Mu)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Ve(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:CM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ve(27497)})(t,e.precondition)),n}function DM(t,e){return t&&t.length>0?(et(e!==void 0,14353),t.map((n=>(function(a,l){let c=a.updateTime?cs(a.updateTime):cs(l);return c.isEqual(Oe.min())&&(c=cs(l)),new mM(c,a.transformResults||[])})(n,e)))):[]}function VM(t,e){return{documents:[rA(t,e.path)]}}function lA(t,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=rA(t,a);const l=(function(g){if(g.length!==0)return uA(Js.create(g,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(w){return{field:Jr(w.field),direction:PM(w.dir)}})(v)))})(e.orderBy);c&&(n.structuredQuery.orderBy=c);const h=v0(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:a}}function MM(t,e,n,i){const{ft:a,parent:l}=lA(t,e),c={},h=[];let p=0;return n.forEach((g=>{const v="aggregate_"+p++;c[v]=g.alias,g.aggregateType==="count"?h.push({alias:v,count:{}}):g.aggregateType==="avg"?h.push({alias:v,avg:{field:Jr(g.fieldPath)}}):g.aggregateType==="sum"&&h.push({alias:v,sum:{field:Jr(g.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:h,structuredQuery:a.structuredQuery},parent:a.parent},gt:c,parent:l}}function kM(t){let e=RM(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){et(i===1,65062);const v=n.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];n.where&&(l=(function(x){const w=cA(x);return w instanceof Js&&DS(w)?w.getFilters():[w]})(n.where));let c=[];n.orderBy&&(c=(function(x){return x.map((w=>(function(j){return new ju(fl(j.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(w)))})(n.orderBy));let h=null;n.limit&&(h=(function(x){let w;return w=typeof x=="object"?x.value:x,$u(w)?null:w})(n.limit));let p=null;n.startAt&&(p=(function(x){const w=!!x.before,E=x.values||[];return new bf(E,w)})(n.startAt));let g=null;return n.endAt&&(g=(function(x){const w=!x.before,E=x.values||[];return new bf(E,w)})(n.endAt)),eM(e,a,c,l,h,"F",p,g)}function OM(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cA(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=fl(n.unaryFilter.field);return nn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=fl(n.unaryFilter.field);return nn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=fl(n.unaryFilter.field);return nn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=fl(n.unaryFilter.field);return nn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(t):t.fieldFilter!==void 0?(function(n){return nn.create(fl(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Js.create(n.compositeFilter.filters.map((i=>cA(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(n.compositeFilter.op))})(t):Ve(30097,{filter:t})}function PM(t){return EM[t]}function LM(t){return SM[t]}function UM(t){return AM[t]}function Jr(t){return{fieldPath:t.canonicalString()}}function fl(t){return Tn.fromServerFormat(t.fieldPath)}function uA(t){return t instanceof nn?(function(n){if(n.op==="=="){if(vw(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NAN"}};if(yw(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vw(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NOT_NAN"}};if(yw(n.value))return{unaryFilter:{field:Jr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jr(n.field),op:LM(n.op),value:n.value}}})(t):t instanceof Js?(function(n){const i=n.getFilters().map((a=>uA(a)));return i.length===1?i[0]:{compositeFilter:{op:UM(n.op),filters:i}}})(t):Ve(54877,{filter:t})}function zM(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function dA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function hA(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n,i,a,l=Oe.min(),c=Oe.min(),h=Sn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new ea(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ea(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e){this.yt=e}}function FM(t){const e=kM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?y0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(){this.Sn=new HM}addToCollectionParentIndex(e,n){return this.Sn.add(n),he.resolve()}getCollectionParents(e,n){return he.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return he.resolve()}deleteFieldIndex(e,n){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,n){return he.resolve()}getDocumentsMatchingTarget(e,n){return he.resolve(null)}getIndexType(e,n){return he.resolve(0)}getFieldIndexes(e,n){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,n){return he.resolve(ca.min())}getMinOffsetFromCollectionGroup(e,n){return he.resolve(ca.min())}updateCollectionGroup(e,n,i){return he.resolve()}updateIndexEntries(e,n){return he.resolve()}}class HM{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new ln(gt.comparator),l=!a.has(i);return this.index[n]=a.add(i),l}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new ln(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fA=41943040;class Kn{static withCacheSize(e){return new Kn(e,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(fA,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Vl(0)}static ar(){return new Vl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="LruGarbageCollector",GM=1048576;function Mw([t,e],[n,i]){const a=Xe(t,n);return a===0?Xe(e,i):a}class KM{constructor(e){this.Pr=e,this.buffer=new ln(Mw),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Mw(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $M{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Te(Vw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hl(n)?Te(Vw,"Ignoring IndexedDB error during garbage collection: ",n):await ql(n)}await this.Ar(3e5)}))}}class YM{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return he.resolve(Hf.ce);const i=new KM(n);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(Dw)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dw):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,a,l,c,h,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),a=this.params.maximumSequenceNumbersToCollect):a=x,c=Date.now(),this.nthSequenceNumber(e,a)))).next((x=>(i=x,h=Date.now(),this.removeTargets(e,i,n)))).next((x=>(l=x,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((x=>(g=Date.now(),dl()<=We.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${x} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:x}))))}}function QM(t,e){return new YM(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.changes=new xo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?he.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(i!==null&&pu(i.mutation,a,os.empty(),_t.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Je()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Je()){const a=so();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,i).next((l=>{let c=ru();return l.forEach(((h,p)=>{c=c.insert(h,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,n){const i=so();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Je())))}populateOverlays(e,n,i){const a=[];return i.forEach((l=>{n.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,h)=>{n.set(c,h)}))}))}computeViews(e,n,i,a){let l=or();const c=mu(),h=(function(){return mu()})();return n.forEach(((p,g)=>{const v=i.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof xa)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),pu(v.mutation,g,v.mutation.getFieldMask(),_t.now())):c.set(g.key,os.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),n.forEach(((g,v)=>h.set(g,new XM(v,c.get(g)??null)))),h)))}recalculateAndSaveOverlays(e,n){const i=mu();let a=new jt(((c,h)=>c-h)),l=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((c=>{for(const h of c)h.keys().forEach((p=>{const g=n.get(p);if(g===null)return;let v=i.get(p)||os.empty();v=h.applyToLocalView(g,v),i.set(p,v);const x=(a.get(h.batchId)||Je()).add(p);a=a.insert(h.batchId,x)}))})).next((()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),g=p.key,v=p.value,x=FS();v.forEach((w=>{if(!l.has(w)){const E=WS(n.get(w),i.get(w));E!==null&&x.set(w,E),l=l.add(w)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,x))}return he.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,a){return tM(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):OS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-l.size):he.resolve(so());let h=Au,p=l;return c.next((g=>he.forEach(g,((v,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),l.get(v)?he.resolve():this.remoteDocumentCache.getEntry(e,v).next((w=>{p=p.insert(v,w)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Je()))).next((v=>({batchId:h,changes:BS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new je(n)).next((i=>{let a=ru();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const l=n.collectionGroup;let c=ru();return this.indexManager.getCollectionParents(e,l).next((h=>he.forEach(h,(p=>{const g=(function(x,w){return new Gl(w,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((v=>{v.forEach(((x,w)=>{c=c.insert(x,w)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,n,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,l,a)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,fn.newInvalidDocument(v)))}));let h=ru();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&pu(v.mutation,g,os.empty(),_t.now()),$f(n,g)&&(h=h.insert(p,g))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return he.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:cs(a.createTime)}})(n)),he.resolve()}getNamedQuery(e,n){return he.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(a){return{name:a.name,query:FM(a.bundledQuery),readTime:cs(a.readTime)}})(n)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(){this.overlays=new jt(je.comparator),this.Lr=new Map}getOverlay(e,n){return he.resolve(this.overlays.get(n))}getOverlays(e,n){const i=so();return he.forEach(n,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((a,l)=>{this.bt(e,n,l)})),he.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),he.resolve()}getOverlaysForCollection(e,n,i){const a=so(),l=n.length+1,c=new je(n.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return he.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let l=new jt(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>i){let v=l.get(g.largestBatchId);v===null&&(v=so(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const h=so(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>h.set(g,v))),!(h.size()>=a)););return he.resolve(h)}bt(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new vM(n,i));let l=this.Lr.get(n);l===void 0&&(l=Je(),this.Lr.set(n,l)),this.Lr.set(n,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(){this.kr=new ln(hn.Kr),this.qr=new ln(hn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new hn(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new hn(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new je(new gt([])),i=new hn(n,e),a=new hn(n,e+1),l=[];return this.qr.forEachInRange([i,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new je(new gt([])),i=new hn(n,e),a=new hn(n,e+1);let l=Je();return this.qr.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const n=new hn(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class hn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return je.comparator(e.key,n.key)||Xe(e.Hr,n.Hr)}static Ur(e,n){return Xe(e.Hr,n.Hr)||je.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new ln(hn.Kr)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new yM(l,n,i,a);this.mutationQueue.push(c);for(const h of a)this.Jr=this.Jr.add(new hn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,n){return he.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.Xr(i),l=a<0?0:a;return he.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?yy:this.Yn-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new hn(n,0),a=new hn(n,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(c=>{const h=this.Zr(c.Hr);l.push(h)})),he.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ln(Xe);return n.forEach((a=>{const l=new hn(a,0),c=new hn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(h=>{i=i.add(h.Hr)}))})),he.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let l=i;je.isDocumentKey(l)||(l=l.child(""));const c=new hn(new je(l),0);let h=new ln(Xe);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(h=h.add(p.Hr)),!0)}),c),he.resolve(this.Yr(h))}Yr(e){const n=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){et(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return he.forEach(n.mutations,(a=>{const l=new hn(a.key,n.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new hn(n,0),a=this.Jr.firstAfterOrEqual(i);return he.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.ti=e,this.docs=(function(){return new jt(je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),l=a?a.size:0,c=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return he.resolve(i?i.document.mutableCopy():fn.newInvalidDocument(n))}getEntries(e,n){let i=or();return n.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():fn.newInvalidDocument(a))})),he.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let l=or();const c=n.path,h=new je(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||j5(R5(v),i)<=0||(a.has(v.key)||$f(n,v))&&(l=l.insert(v.key,v.mutableCopy()))}return he.resolve(l)}getAllFromCollectionGroup(e,n,i,a){Ve(9500)}ni(e,n){return he.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new ik(this)}getSize(e){return he.resolve(this.size)}}class ik extends WM{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?n.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),he.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.persistence=e,this.ri=new xo((n=>by(n)),_y),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.ii=0,this.si=new Ny,this.targetCount=0,this.oi=Vl._r()}forEachTarget(e,n){return this.ri.forEach(((i,a)=>n(a))),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),he.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Vl(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,he.resolve()}updateTargetData(e,n){return this.lr(n),he.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,n,i){let a=0;const l=[];return this.ri.forEach(((c,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),he.waitFor(l).next((()=>a))}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return he.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),he.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),he.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),he.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return he.resolve(i)}containsKey(e,n){return he.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n){this._i={},this.overlays={},this.ai=new Hf(0),this.ui=!1,this.ui=!0,this.ci=new tk,this.referenceDelegate=e(this),this.li=new rk(this),this.indexManager=new qM,this.remoteDocumentCache=(function(a){return new sk(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new BM(n),this.Pi=new ZM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ek,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new nk(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){Te("MemoryPersistence","Starting transaction:",e);const a=new ak(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,n){return he.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class ak extends D5{constructor(e){super(),this.currentSequenceNumber=e}}class Cy{constructor(e){this.persistence=e,this.Ri=new Ny,this.Ai=null}static Vi(e){return new Cy(e)}get di(){if(this.Ai)return this.Ai;throw Ve(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),he.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),he.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),he.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.di,(i=>{const a=je.fromPath(i);return this.mi(e,a).next((l=>{l||n.removeEntry(a,Oe.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return he.or([()=>he.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Tf{constructor(e,n){this.persistence=e,this.fi=new xo((i=>k5(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=QM(this,n)}static Vi(e,n){return new Tf(e,n)}Ti(){}Ii(e){return he.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((a=>i+a))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return he.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((l=>l?he.resolve():n(a)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,n).next((h=>{h||(i++,l.removeEntry(c,Oe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),he.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),he.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),he.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Wh(e.data.value)),n}wr(e,n,i){return he.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.fi.get(n);return he.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=a}static Es(e,n){let i=Je(),a=Je();for(const l of n.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Ry(e,n.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return uI()?8:V5(In())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,a){const l={result:null};return this.gs(e,n).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,n,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new ok;return this.ys(e,n,c).next((h=>{if(l.result=h,this.As)return this.ws(e,n,c,h.size)}))})).next((()=>l.result))}ws(e,n,i,a){return i.documentReadCount<this.Vs?(dl()<=We.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",hl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),he.resolve()):(dl()<=We.DEBUG&&Te("QueryEngine","Query:",hl(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(dl()<=We.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",hl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(n))):he.resolve())}gs(e,n){if(ww(n))return he.resolve(null);let i=Ni(n);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=y0(n,null,"F"),i=Ni(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Je(...l);return this.fs.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.bs(n,h);return this.Ss(n,g,c,p.readTime)?this.gs(e,y0(n,null,"F")):this.Ds(e,g,n,p)}))))})))))}ps(e,n,i,a){return ww(n)||a.isEqual(Oe.min())?he.resolve(null):this.fs.getDocuments(e,i).next((l=>{const c=this.bs(n,l);return this.Ss(n,c,i,a)?he.resolve(null):(dl()<=We.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),hl(n)),this.Ds(e,c,n,C5(a,Au)).next((h=>h)))}))}bs(e,n){let i=new ln(US(e));return n.forEach(((a,l)=>{$f(e,l)&&(i=i.add(l))})),i}Ss(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,n,i){return dl()<=We.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",hl(n)),this.fs.getDocumentsMatchingQuery(e,n,ca.min(),i)}Ds(e,n,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((l=>(n.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="LocalStore",ck=3e8;class uk{constructor(e,n,i,a){this.persistence=e,this.Cs=n,this.serializer=a,this.vs=new jt(Xe),this.Fs=new xo((l=>by(l)),_y),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function dk(t,e,n,i){return new uk(t,e,n,i)}async function pA(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],h=[];let p=Je();for(const g of a){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){h.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return n.localDocuments.getDocuments(i,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:h})))}))}))}function hk(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=n.xs.newChangeBuffer({trackRemovals:!0});return(function(h,p,g,v){const x=g.batch,w=x.keys();let E=he.resolve();return w.forEach((j=>{E=E.next((()=>v.getEntry(p,j))).next((M=>{const V=g.docVersions.get(j);et(V!==null,48541),M.version.compareTo(V)<0&&(x.applyToRemoteDocument(M,g),M.isValidDocument()&&(M.setReadTime(g.commitVersion),v.addEntry(M)))}))})),E.next((()=>h.mutationQueue.removeMutationBatch(p,x)))})(n,i,e,l).next((()=>l.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let p=Je();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(p=p.add(h.batch.mutations[g].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(i,a)))}))}function gA(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function fk(t,e){const n=Le(t),i=e.snapshotVersion;let a=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=n.xs.newChangeBuffer({trackRemovals:!0});a=n.vs;const h=[];e.targetChanges.forEach(((v,x)=>{const w=a.get(x);if(!w)return;h.push(n.li.removeMatchingKeys(l,v.removedDocuments,x).next((()=>n.li.addMatchingKeys(l,v.addedDocuments,x))));let E=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(x)!==null?E=E.withResumeToken(Sn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):v.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(v.resumeToken,i)),a=a.insert(x,E),(function(M,V,q){return M.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=ck?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(w,E,v)&&h.push(n.li.updateTargetData(l,E))}));let p=or(),g=Je();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(mk(l,c,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!i.isEqual(Oe.min())){const v=n.li.getLastRemoteSnapshotVersion(l).next((x=>n.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));h.push(v)}return he.waitFor(h).next((()=>c.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(n.vs=a,l)))}function mk(t,e,n){let i=Je(),a=Je();return n.forEach((l=>i=i.add(l))),e.getEntries(t,i).next((l=>{let c=or();return n.forEach(((h,p)=>{const g=l.get(h);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(h)),p.isNoDocument()&&p.version.isEqual(Oe.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):Te(jy,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:a}}))}function pk(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=yy),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function gk(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return n.li.getTargetData(i,e).next((l=>l?(a=l,he.resolve(a)):n.li.allocateTargetId(i).next((c=>(a=new ea(e,c,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=n.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function _0(t,e,n){const i=Le(t),a=i.vs.get(e),l=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Hl(c))throw c;Te(jy,`Failed to update sequence numbers for target ${e}: ${c}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function kw(t,e,n){const i=Le(t);let a=Oe.min(),l=Je();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const x=Le(p),w=x.Fs.get(v);return w!==void 0?he.resolve(x.vs.get(w)):x.li.getTargetData(g,v)})(i,c,Ni(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,h.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,n?a:Oe.min(),n?l:Je()))).next((h=>(yk(i,iM(e),h),{documents:h,ks:l})))))}function yk(t,e,n){let i=t.Ms.get(e)||Oe.min();n.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),t.Ms.set(e,i)}class Ow{constructor(){this.activeTargetIds=uM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vk{constructor(){this.vo=new Ow,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ow,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="ConnectivityMonitor";class Lw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Te(Pw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Te(Pw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lh=null;function w0(){return Lh===null?Lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lh++,"0x"+Lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="RestConnection",bk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class _k{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===vf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,n,i,a,l){const c=w0(),h=this.Qo(e,n.toUriEncodedString());Te(Rg,`Sending RPC '${e}' ${c}:`,h,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,l);const{host:g}=new URL(h),v=Ul(g);return this.zo(e,h,p,i,v).then((x=>(Te(Rg,`Received RPC '${e}' ${c}: `,x),x)),(x=>{throw Rl(Rg,`RPC '${e}' ${c} failed with error: `,x,"url: ",h,"request:",i),x}))}jo(e,n,i,a,l,c){return this.Wo(e,n,i,a,l)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}Qo(e,n){const i=bk[e];let a=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection",Jc=(t,e,n)=>{t.listen(e,(i=>{try{n(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Sl extends _k{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Sl.c_){const e=mS();Jc(e,fS.STAT_EVENT,(n=>{n.stat===u0.PROXY?Te(Cn,"STAT_EVENT: detected buffering proxy"):n.stat===u0.NOPROXY&&Te(Cn,"STAT_EVENT: detected no buffering proxy")})),Sl.c_=!0}}zo(e,n,i,a,l){const c=w0();return new Promise(((h,p)=>{const g=new dS;g.setWithCredentials(!0),g.listenOnce(hS.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Qh.NO_ERROR:const x=g.getResponseJson();Te(Cn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(x)),h(x);break;case Qh.TIMEOUT:Te(Cn,`RPC '${e}' ${c} timed out`),p(new xe(le.DEADLINE_EXCEEDED,"Request time out"));break;case Qh.HTTP_ERROR:const w=g.getStatus();if(Te(Cn,`RPC '${e}' ${c} failed with status:`,w,"response text:",g.getResponseText()),w>0){let E=g.getResponseJson();Array.isArray(E)&&(E=E[0]);const j=E==null?void 0:E.error;if(j&&j.status&&j.message){const M=(function(q){const B=q.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(B)>=0?B:le.UNKNOWN})(j.status);p(new xe(M,j.message))}else p(new xe(le.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new xe(le.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Te(Cn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);Te(Cn,`RPC '${e}' ${c} sending request:`,a),g.send(n,"POST",v,i,15)}))}T_(e,n,i){const a=w0(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Go(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const g=l.join("");Te(Cn,`Creating RPC '${e}' stream ${a}: ${g}`,h);const v=c.createWebChannel(g,h);this.I_(v);let x=!1,w=!1;const E=new wk({Ho:j=>{w?Te(Cn,`Not sending because RPC '${e}' stream ${a} is closed:`,j):(x||(Te(Cn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),x=!0),Te(Cn,`RPC '${e}' stream ${a} sending:`,j),v.send(j))},Jo:()=>v.close()});return Jc(v,iu.EventType.OPEN,(()=>{w||(Te(Cn,`RPC '${e}' stream ${a} transport opened.`),E.i_())})),Jc(v,iu.EventType.CLOSE,(()=>{w||(w=!0,Te(Cn,`RPC '${e}' stream ${a} transport closed`),E.o_(),this.E_(v))})),Jc(v,iu.EventType.ERROR,(j=>{w||(w=!0,Rl(Cn,`RPC '${e}' stream ${a} transport errored. Name:`,j.name,"Message:",j.message),E.o_(new xe(le.UNAVAILABLE,"The operation could not be completed")))})),Jc(v,iu.EventType.MESSAGE,(j=>{var M;if(!w){const V=j.data[0];et(!!V,16349);const q=V,B=(q==null?void 0:q.error)||((M=q[0])==null?void 0:M.error);if(B){Te(Cn,`RPC '${e}' stream ${a} received error:`,B);const K=B.status;let oe=(function(R){const S=Zt[R];if(S!==void 0)return eA(S)})(K),H=B.message;oe===void 0&&(oe=le.INTERNAL,H="Unknown error status: "+K+" with message "+B.message),w=!0,E.o_(new xe(oe,H)),v.close()}else Te(Cn,`RPC '${e}' stream ${a} received:`,V),E.__(V)}})),Sl.u_(),setTimeout((()=>{E.s_()}),0),E}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return pS()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t){return new Sl(t)}function jg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t){return new NM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sl.c_=!1;class Iy{constructor(e,n,i=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-i);a>0&&Te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="PersistentStream";class yA{constructor(e,n,i,a,l,c,h,p){this.Ci=e,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Iy(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(ar(n.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===n&&this.G_(i,a)}),(i=>{e((()=>{const a=new xe(le.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(Uw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Te(Uw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ek extends yA{constructor(e,n,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,c),this.serializer=l}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=IM(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Oe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Oe.min():c.readTime?cs(c.readTime):Oe.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=b0(this.serializer),n.addTarget=(function(l,c){let h;const p=c.target;if(h=p0(p)?{documents:VM(l,p)}:{query:lA(l,p).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=sA(l,c.resumeToken);const g=v0(l,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(Oe.min())>0){h.readTime=_f(l,c.snapshotVersion.toTimestamp());const g=v0(l,c.expectedCount);g!==null&&(h.expectedCount=g)}return h})(this.serializer,e);const i=OM(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=b0(this.serializer),n.removeTarget=e,this.K_(n)}}class Sk extends yA{constructor(e,n,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=DM(e.writeResults,e.commitTime),i=cs(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=b0(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>oA(this.serializer,i)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{}class Nk extends Ak{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,x0(n,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new xe(le.UNKNOWN,l.toString())}))}jo(e,n,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.jo(e,x0(n,i),a,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(le.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Ck(t,e,n,i){return new Nk(t,e,n,i)}class Rk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ar(n),this.aa=!1):Te("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="RemoteStore";class jk{constructor(e,n,i,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{bo(this)&&(Te(mo,"Restarting streams for network reachability change."),await(async function(p){const g=Le(p);g.Ea.add(4),await Wu(g),g.Va.set("Unknown"),g.Ea.delete(4),await Zf(g)})(this))}))})),this.Va=new Rk(i,a)}}async function Zf(t){if(bo(t))for(const e of t.Ra)await e(!0)}async function Wu(t){for(const e of t.Ra)await e(!1)}function vA(t,e){const n=Le(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ky(n)?My(n):Kl(n).O_()&&Vy(n,e))}function Dy(t,e){const n=Le(t),i=Kl(n);n.Ia.delete(e),i.O_()&&xA(n,e),n.Ia.size===0&&(i.O_()?i.L_():bo(n)&&n.Va.set("Unknown"))}function Vy(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Kl(t).Z_(e)}function xA(t,e){t.da.$e(e),Kl(t).X_(e)}function My(t){t.da=new TM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Kl(t).start(),t.Va.ua()}function ky(t){return bo(t)&&!Kl(t).x_()&&t.Ia.size>0}function bo(t){return Le(t).Ea.size===0}function bA(t){t.da=void 0}async function Ik(t){t.Va.set("Online")}async function Dk(t){t.Ia.forEach(((e,n)=>{Vy(t,e)}))}async function Vk(t,e){bA(t),ky(t)?(t.Va.ha(e),My(t)):t.Va.set("Unknown")}async function Mk(t,e,n){if(t.Va.set("Online"),e instanceof nA&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Ia.delete(h),a.da.removeTarget(h))})(t,e)}catch(i){Te(mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ef(t,i)}else if(e instanceof Zh?t.da.Xe(e):e instanceof tA?t.da.st(e):t.da.tt(e),!n.isEqual(Oe.min()))try{const i=await gA(t.localStore);n.compareTo(i)>=0&&await(function(l,c){const h=l.da.Tt(c);return h.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),h.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Sn.EMPTY_BYTE_STRING,v.snapshotVersion)),xA(l,p);const x=new ea(v.target,p,g,v.sequenceNumber);Vy(l,x)})),l.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(i){Te(mo,"Failed to raise snapshot:",i),await Ef(t,i)}}async function Ef(t,e,n){if(!Hl(e))throw e;t.Ea.add(1),await Wu(t),t.Va.set("Offline"),n||(n=()=>gA(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Te(mo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Zf(t)}))}function _A(t,e){return e().catch((n=>Ef(t,n,e)))}async function em(t){const e=Le(t),n=fa(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yy;for(;kk(e);)try{const a=await pk(e.localStore,i);if(a===null){e.Ta.length===0&&n.L_();break}i=a.batchId,Ok(e,a)}catch(a){await Ef(e,a)}wA(e)&&TA(e)}function kk(t){return bo(t)&&t.Ta.length<10}function Ok(t,e){t.Ta.push(e);const n=fa(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function wA(t){return bo(t)&&!fa(t).x_()&&t.Ta.length>0}function TA(t){fa(t).start()}async function Pk(t){fa(t).ra()}async function Lk(t){const e=fa(t);for(const n of t.Ta)e.ea(n.mutations)}async function Uk(t,e,n){const i=t.Ta.shift(),a=Ey.from(i,e,n);await _A(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await em(t)}async function zk(t,e){e&&fa(t).Y_&&await(async function(i,a){if((function(c){return ZS(c)&&c!==le.ABORTED})(a.code)){const l=i.Ta.shift();fa(i).B_(),await _A(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await em(i)}})(t,e),wA(t)&&TA(t)}async function zw(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),Te(mo,"RemoteStore received new credentials");const i=bo(n);n.Ea.add(3),await Wu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Zf(n)}async function Bk(t,e){const n=Le(t);e?(n.Ea.delete(2),await Zf(n)):e||(n.Ea.add(2),await Wu(n),n.Va.set("Unknown"))}function Kl(t){return t.ma||(t.ma=(function(n,i,a){const l=Le(n);return l.sa(),new Ek(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Zo:Ik.bind(null,t),Yo:Dk.bind(null,t),t_:Vk.bind(null,t),J_:Mk.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),ky(t)?My(t):t.Va.set("Unknown")):(await t.ma.stop(),bA(t))}))),t.ma}function fa(t){return t.fa||(t.fa=(function(n,i,a){const l=Le(n);return l.sa(),new Sk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Pk.bind(null,t),t_:zk.bind(null,t),ta:Lk.bind(null,t),na:Uk.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await em(t)):(await t.fa.stop(),t.Ta.length>0&&(Te(mo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,n,i,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,l){const c=Date.now()+i,h=new Oy(e,n,c,a,l);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Py(t,e){if(ar("AsyncQueue",`${e}: ${t}`),Hl(t))return new xe(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{static emptySet(e){return new Al(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||je.comparator(n.key,i.key):(n,i)=>je.comparator(n.key,i.key),this.keyedMap=ru(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Al)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Al;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.ga=new jt(je.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ve(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Ml{constructor(e,n,i,a,l,c,h,p,g){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,i,a,l){const c=[];return n.forEach((h=>{c.push({type:0,doc:h})})),new Ml(e,n,Al.emptySet(n),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class qk{constructor(){this.queries=Fw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const a=Le(n),l=a.queries;a.queries=Fw(),l.forEach(((c,h)=>{for(const p of h.ba)p.onError(i)}))})(this,new xe(le.ABORTED,"Firestore shutting down"))}}function Fw(){return new xo((t=>LS(t)),Kf)}async function EA(t,e){const n=Le(t);let i=3;const a=e.query;let l=n.queries.get(a);l?!l.Sa()&&e.Da()&&(i=2):(l=new Fk,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await n.onListen(a,!0);break;case 1:l.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const h=Py(c,`Initialization of query '${hl(e.query)}' failed`);return void e.onError(h)}n.queries.set(a,l),l.ba.push(e),e.va(n.onlineState),l.wa&&e.Fa(l.wa)&&Ly(n)}async function SA(t,e){const n=Le(t),i=e.query;let a=3;const l=n.queries.get(i);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Hk(t,e){const n=Le(t);let i=!1;for(const a of e){const l=a.query,c=n.queries.get(l);if(c){for(const h of c.ba)h.Fa(a)&&(i=!0);c.wa=a}}i&&Ly(n)}function Gk(t,e,n){const i=Le(t),a=i.queries.get(e);if(a)for(const l of a.ba)l.onError(n);i.queries.delete(e)}function Ly(t){t.Ca.forEach((e=>{e.next()}))}var T0,qw;(qw=T0||(T0={})).Ma="default",qw.Cache="cache";class AA{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Ml(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==T0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.key=e}}class CA{constructor(e){this.key=e}}class Kk{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Je(),this.mutatedKeys=Je(),this.eu=US(e),this.tu=new Al(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new Bw,a=n?n.tu:this.tu;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,h=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,x)=>{const w=a.get(v),E=$f(this.query,x)?x:null,j=!!w&&this.mutatedKeys.has(w.key),M=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let V=!1;w&&E?w.data.isEqual(E.data)?j!==M&&(i.track({type:3,doc:E}),V=!0):this.su(w,E)||(i.track({type:2,doc:E}),V=!0,(p&&this.eu(E,p)>0||g&&this.eu(E,g)<0)&&(h=!0)):!w&&E?(i.track({type:0,doc:E}),V=!0):w&&!E&&(i.track({type:1,doc:w}),V=!0,(p||g)&&(h=!0)),V&&(E?(c=c.add(E),l=M?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:c,iu:i,Ss:h,mutatedKeys:l}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,x)=>(function(E,j){const M=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Vt:V})}};return M(E)-M(j)})(v.type,x.type)||this.eu(v.doc,x.doc))),this.ou(i),a=a??!1;const h=n&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new Ml(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Bw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new CA(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new NA(i))})),n}cu(e){this.Za=e.ks,this.Ya=Je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Uy="SyncEngine";class $k{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Yk{constructor(e){this.key=e,this.hu=!1}}class Qk{constructor(e,n,i,a,l,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new xo((h=>LS(h)),Kf),this.Iu=new Map,this.Eu=new Set,this.Ru=new jt(je.comparator),this.Au=new Map,this.Vu=new Ny,this.du={},this.mu=new Map,this.fu=Vl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Wk(t,e,n=!0){const i=MA(t);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await RA(i,e,n,!0),a}async function Xk(t,e){const n=MA(t);await RA(n,e,!0,!1)}async function RA(t,e,n,i){const a=await gk(t.localStore,Ni(e)),l=a.targetId,c=t.sharedClientState.addLocalQueryTarget(l,n);let h;return i&&(h=await Jk(t,e,l,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&vA(t.remoteStore,a),h}async function Jk(t,e,n,i,a){t.pu=(x,w,E)=>(async function(M,V,q,B){let K=V.view.ru(q);K.Ss&&(K=await kw(M.localStore,V.query,!1).then((({documents:R})=>V.view.ru(R,K))));const oe=B&&B.targetChanges.get(V.targetId),H=B&&B.targetMismatches.get(V.targetId)!=null,Z=V.view.applyChanges(K,M.isPrimaryClient,oe,H);return Gw(M,V.targetId,Z.au),Z.snapshot})(t,x,w,E);const l=await kw(t.localStore,e,!0),c=new Kk(e,l.ks),h=c.ru(l.documents),p=Qu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",a),g=c.applyChanges(h,t.isPrimaryClient,p);Gw(t,n,g.au);const v=new $k(e,n,c);return t.Tu.set(e,v),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),g.snapshot}async function Zk(t,e,n){const i=Le(t),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!Kf(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await _0(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),n&&Dy(i.remoteStore,a.targetId),E0(i,a.targetId)})).catch(ql)):(E0(i,a.targetId),await _0(i.localStore,a.targetId,!0))}async function e6(t,e){const n=Le(t),i=n.Tu.get(e),a=n.Iu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Dy(n.remoteStore,i.targetId))}async function t6(t,e,n){const i=l6(t);try{const a=await(function(c,h){const p=Le(c),g=_t.now(),v=h.reduce(((E,j)=>E.add(j.key)),Je());let x,w;return p.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let j=or(),M=Je();return p.xs.getEntries(E,v).next((V=>{j=V,j.forEach(((q,B)=>{B.isValidDocument()||(M=M.add(q))}))})).next((()=>p.localDocuments.getOverlayedDocuments(E,j))).next((V=>{x=V;const q=[];for(const B of h){const K=gM(B,x.get(B.key).overlayedDocument);K!=null&&q.push(new xa(B.key,K,RS(K.value.mapValue),En.exists(!0)))}return p.mutationQueue.addMutationBatch(E,g,q,h)})).next((V=>{w=V;const q=V.applyToLocalDocumentSet(x,M);return p.documentOverlayCache.saveOverlays(E,V.batchId,q)}))})).then((()=>({batchId:w.batchId,changes:BS(x)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,h,p){let g=c.du[c.currentUser.toKey()];g||(g=new jt(Xe)),g=g.insert(h,p),c.du[c.currentUser.toKey()]=g})(i,a.batchId,n),await Xu(i,a.changes),await em(i.remoteStore)}catch(a){const l=Py(a,"Failed to persist write");n.reject(l)}}async function jA(t,e){const n=Le(t);try{const i=await fk(n.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=n.Au.get(l);c&&(et(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?et(c.hu,14607):a.removedDocuments.size>0&&(et(c.hu,42227),c.hu=!1))})),await Xu(n,i,e)}catch(i){await ql(i)}}function Hw(t,e,n){const i=Le(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(c,h){const p=Le(c);p.onlineState=h;let g=!1;p.queries.forEach(((v,x)=>{for(const w of x.ba)w.va(h)&&(g=!0)})),g&&Ly(p)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function n6(t,e,n){const i=Le(t);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new jt(je.comparator);c=c.insert(l,fn.newNoDocument(l,Oe.min()));const h=Je().add(l),p=new Xf(Oe.min(),new Map,new jt(Xe),c,h);await jA(i,p),i.Ru=i.Ru.remove(l),i.Au.delete(e),zy(i)}else await _0(i.localStore,e,!1).then((()=>E0(i,e,n))).catch(ql)}async function s6(t,e){const n=Le(t),i=e.batch.batchId;try{const a=await hk(n.localStore,e);DA(n,i,null),IA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Xu(n,a)}catch(a){await ql(a)}}async function i6(t,e,n){const i=Le(t);try{const a=await(function(c,h){const p=Le(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,h).next((x=>(et(x!==null,37113),v=x.keys(),p.mutationQueue.removeMutationBatch(g,x)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,h))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(i.localStore,e);DA(i,e,n),IA(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Xu(i,a)}catch(a){await ql(a)}}function IA(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function DA(t,e,n){const i=Le(t);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function E0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((i=>{t.Vu.containsKey(i)||VA(t,i)}))}function VA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Dy(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),zy(t))}function Gw(t,e,n){for(const i of n)i instanceof NA?(t.Vu.addReference(i.key,e),r6(t,i)):i instanceof CA?(Te(Uy,"Document no longer in limbo: "+i.key),t.Vu.removeReference(i.key,e),t.Vu.containsKey(i.key)||VA(t,i.key)):Ve(19791,{wu:i})}function r6(t,e){const n=e.key,i=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(i)||(Te(Uy,"New document in limbo: "+n),t.Eu.add(i),zy(t))}function zy(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new je(gt.fromString(e)),i=t.fu.next();t.Au.set(i,new Yk(n)),t.Ru=t.Ru.insert(n,i),vA(t.remoteStore,new ea(Ni(wy(n.path)),i,"TargetPurposeLimboResolution",Hf.ce))}}async function Xu(t,e,n){const i=Le(t),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,p)=>{c.push(i.pu(p,e,n).then((g=>{var v;if((g||n)&&i.isPrimaryClient){const x=g?!g.fromCache:(v=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,x?"current":"not-current")}if(g){a.push(g);const x=Ry.Es(p.targetId,g);l.push(x)}})))})),await Promise.all(c),i.Pu.J_(a),await(async function(p,g){const v=Le(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>he.forEach(g,(w=>he.forEach(w.Ts,(E=>v.persistence.referenceDelegate.addReference(x,w.targetId,E))).next((()=>he.forEach(w.Is,(E=>v.persistence.referenceDelegate.removeReference(x,w.targetId,E)))))))))}catch(x){if(!Hl(x))throw x;Te(jy,"Failed to update sequence numbers: "+x)}for(const x of g){const w=x.targetId;if(!x.fromCache){const E=v.vs.get(w),j=E.snapshotVersion,M=E.withLastLimboFreeSnapshotVersion(j);v.vs=v.vs.insert(w,M)}}})(i.localStore,l))}async function a6(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){Te(Uy,"User change. New user:",e.toKey());const i=await pA(n.localStore,e);n.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((p=>{p.reject(new xe(le.CANCELLED,c))}))})),l.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Xu(n,i.Ns)}}function o6(t,e){const n=Le(t),i=n.Au.get(e);if(i&&i.hu)return Je().add(i.key);{let a=Je();const l=n.Iu.get(e);if(!l)return a;for(const c of l){const h=n.Tu.get(c);a=a.unionWith(h.view.nu)}return a}}function MA(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n6.bind(null,e),e.Pu.J_=Hk.bind(null,e.eventManager),e.Pu.yu=Gk.bind(null,e.eventManager),e}function l6(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i6.bind(null,e),e}class Sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return dk(this.persistence,new lk,e.initialUser,this.serializer)}Cu(e){return new mA(Cy.Vi,this.serializer)}Du(e){return new vk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sf.provider={build:()=>new Sf};class c6 extends Sf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){et(this.persistence.referenceDelegate instanceof Tf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new $M(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Kn.withCacheSize(this.cacheSizeBytes):Kn.DEFAULT;return new mA((i=>Tf.Vi(i,n)),this.serializer)}}class S0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Hw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=a6.bind(null,this.syncEngine),await Bk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qk})()}createDatastore(e){const n=Jf(e.databaseInfo.databaseId),i=Tk(e.databaseInfo);return Ck(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,a,l,c,h){return new jk(i,a,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>Hw(this.syncEngine,n,0)),(function(){return Lw.v()?new Lw:new xk})())}createSyncEngine(e,n){return(function(a,l,c,h,p,g,v){const x=new Qk(a,l,c,h,p,g);return v&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(a){const l=Le(a);Te(mo,"RemoteStore shutting down."),l.Ea.add(5),await Wu(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}S0.provider={build:()=>new S0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u6=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new xe(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(a,l){const c=Le(a),h={documents:l.map((x=>wf(c.serializer,x)))},p=await c.jo("BatchGetDocuments",c.serializer.databaseId,gt.emptyPath(),h,l.length),g=new Map;p.forEach((x=>{const w=jM(c.serializer,x);g.set(w.key.toString(),w)}));const v=[];return l.forEach((x=>{const w=g.get(x.toString());et(!!w,55234,{key:x}),v.push(w)})),v})(this.datastore,e);return n.forEach((i=>this.recordVersion(i))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,i)=>{const a=je.fromPath(i);this.mutations.push(new JS(a,this.precondition(a)))})),await(async function(i,a){const l=Le(i),c={writes:a.map((h=>oA(l.serializer,h)))};await l.Wo("Commit",l.serializer.databaseId,gt.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ve(50498,{Gu:e.constructor.name});n=Oe.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new xe(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Oe.min())?En.exists(!1):En.updateTime(n):En.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Oe.min()))throw new xe(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return En.updateTime(n)}return En.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e,n,i,a,l){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=a,this.deferred=l,this.zu=i.maxAttempts,this.M_=new Iy(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new u6(this.datastore),n=this.Ju(e);n&&n.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((a=>{this.Zu(a)}))))})).catch((i=>{this.Zu(i)}))}))}Ju(e){try{const n=this.updateFunction(e);return!$u(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!ZS(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="FirestoreClient";class h6{constructor(e,n,i,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=a,this.user=Rn.UNAUTHENTICATED,this.clientId=gy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{Te(ma,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(Te(ma,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Py(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Ig(t,e){t.asyncQueue.verifyOperationInProgress(),Te(ma,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async a=>{i.isEqual(a)||(await pA(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Kw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await f6(t);Te(ma,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>zw(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,a)=>zw(e.remoteStore,a))),t._onlineComponents=e}async function f6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te(ma,"Using user provided OfflineComponentProvider");try{await Ig(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===le.FAILED_PRECONDITION||a.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;Rl("Error using user provided cache. Falling back to memory cache: "+n),await Ig(t,new Sf)}}else Te(ma,"Using default OfflineComponentProvider"),await Ig(t,new c6(void 0));return t._offlineComponents}async function By(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te(ma,"Using user provided OnlineComponentProvider"),await Kw(t,t._uninitializedComponentsProvider._online)):(Te(ma,"Using default OnlineComponentProvider"),await Kw(t,new S0))),t._onlineComponents}function m6(t){return By(t).then((e=>e.syncEngine))}function OA(t){return By(t).then((e=>e.datastore))}async function PA(t){const e=await By(t),n=e.eventManager;return n.onListen=Wk.bind(null,e.syncEngine),n.onUnlisten=Zk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Xk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=e6.bind(null,e.syncEngine),n}function p6(t,e,n={}){const i=new Ys;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,p,g){const v=new kA({next:w=>{v.Nu(),c.enqueueAndForget((()=>SA(l,x)));const E=w.docs.has(h);!E&&w.fromCache?g.reject(new xe(le.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&p&&p.source==="server"?g.reject(new xe(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(w)},error:w=>g.reject(w)}),x=new AA(wy(h.path),v,{includeMetadataChanges:!0,Ka:!0});return EA(l,x)})(await PA(t),t.asyncQueue,e,n,i))),i.promise}function g6(t,e,n={}){const i=new Ys;return t.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,p,g){const v=new kA({next:w=>{v.Nu(),c.enqueueAndForget((()=>SA(l,x))),w.fromCache&&p.source==="server"?g.reject(new xe(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(w)},error:w=>g.reject(w)}),x=new AA(h,v,{includeMetadataChanges:!0,Ka:!0});return EA(l,x)})(await PA(t),t.asyncQueue,e,n,i))),i.promise}function y6(t,e,n){const i=new Ys;return t.asyncQueue.enqueueAndForget((async()=>{try{const a=await OA(t);i.resolve((async function(c,h,p){var M;const g=Le(c),{request:v,gt:x,parent:w}=MM(g.serializer,nM(h),p);g.connection.Ko||delete v.parent;const E=(await g.jo("RunAggregationQuery",g.serializer.databaseId,w,v,1)).filter((V=>!!V.result));et(E.length===1,64727);const j=(M=E[0].result)==null?void 0:M.aggregateFields;return Object.keys(j).reduce(((V,q)=>(V[x[q]]=j[q],V)),{})})(a,e,n))}catch(a){i.reject(a)}})),i.promise}function v6(t,e){const n=new Ys;return t.asyncQueue.enqueueAndForget((async()=>t6(await m6(t),e,n))),n.promise}function x6(t,e,n){const i=new Ys;return t.asyncQueue.enqueueAndForget((async()=>{const a=await OA(t);new d6(t.asyncQueue,a,n,e,i).ju()})),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6="ComponentProvider",$w=new Map;function _6(t,e,n,i,a){return new U5(t,e,n,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,LA(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="firestore.googleapis.com",Yw=!0;class Qw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UA,this.ssl=Yw}else this.host=e.host,this.ssl=e.ssl??Yw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GM)throw new xe(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LA(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new xe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new xe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new xe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tm{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new y5;switch(i.type){case"firstParty":return new _5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new xe(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=$w.get(n);i&&(Te(b6,"Removing Datastore"),$w.delete(n),i.terminate())})(this),Promise.resolve()}}function w6(t,e,n,i={}){var g;t=us(t,tm);const a=Ul(e),l=t._getSettings(),c={...l,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;a&&(WT(`https://${h}`),XT("Firestore",!0)),l.host!==UA&&l.host!==h&&Rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:h,ssl:a,emulatorOptions:i};if(!la(p,c)&&(t._setSettings(p),i.mockUserToken)){let v,x;if(typeof i.mockUserToken=="string")v=i.mockUserToken,x=Rn.MOCK_USER;else{v=nI(i.mockUserToken,(g=t._app)==null?void 0:g.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new xe(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Rn(w)}t._authCredentials=new v5(new yS(v,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new _o(this.firestore,e,this._query)}}class kt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new aa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ku(n,kt._jsonSchema))return new kt(e,i||null,new je(gt.fromString(n.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:sn("string",kt._jsonSchemaVersion),referencePath:sn("string")};class aa extends _o{constructor(e,n,i){super(e,n,wy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new je(e))}withConverter(e){return new aa(this.firestore,e,this._path)}}function Ln(t,e,...n){if(t=Tt(t),vS("collection","path",e),t instanceof tm){const i=gt.fromString(e,...n);return lw(i),new aa(t,null,i)}{if(!(t instanceof kt||t instanceof aa))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(gt.fromString(e,...n));return lw(i),new aa(t.firestore,null,i)}}function vt(t,e,...n){if(t=Tt(t),arguments.length===1&&(e=gy.newId()),vS("doc","path",e),t instanceof tm){const i=gt.fromString(e,...n);return ow(i),new kt(t,null,new je(i))}{if(!(t instanceof kt||t instanceof aa))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(gt.fromString(e,...n));return ow(i),new kt(t.firestore,t instanceof aa?t.converter:null,new je(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="AsyncQueue";class Xw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Iy(this,"async_queue_retry"),this._c=()=>{const i=jg();i&&Te(Ww,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=jg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=jg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ys;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Hl(e))throw e;Te(Ww,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ar("INTERNAL UNHANDLED ERROR: ",Jw(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=Oy.createAndSchedule(this,e,n,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Ve(47125,{Pc:Jw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Jw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class dr extends tm{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new Xw,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xw(e),this._firestoreClient=void 0,await e}}}function T6(t,e){const n=typeof t=="object"?t:Z0(),i=typeof t=="string"?t:vf,a=vo(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=eI("firestore");l&&w6(a,...l)}return a}function Ju(t){if(t._terminated)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||E6(t),t._firestoreClient}function E6(t){var i,a,l,c;const e=t._freezeSettings(),n=_6(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,(a=t._app)==null?void 0:a.options.apiKey,e);t._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new h6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rs(Sn.fromBase64String(e))}catch(n){throw new xe(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rs(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ku(e,rs._jsonSchema))return rs.fromBase64String(e.bytes)}}rs._jsonSchemaVersion="firestore/bytes/1.0",rs._jsonSchema={type:sn("string",rs._jsonSchemaVersion),bytes:sn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ci._jsonSchemaVersion}}static fromJSON(e){if(Ku(e,Ci._jsonSchema))return new Ci(e.latitude,e.longitude)}}Ci._jsonSchemaVersion="firestore/geoPoint/1.0",Ci._jsonSchema={type:sn("string",Ci._jsonSchemaVersion),latitude:sn("number"),longitude:sn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Qs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ku(e,Qs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Qs(e.vectorValues);throw new xe(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qs._jsonSchemaVersion="firestore/vectorValue/1.0",Qs._jsonSchema={type:sn("string",Qs._jsonSchemaVersion),vectorValues:sn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=/^__.*__$/;class A6{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new xa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yu(e,this.data,n,this.fieldTransforms)}}class zA{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new xa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{dataSource:t})}}class Fy{constructor(e,n,i,a,l,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Fy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const n=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var a;const n=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Af(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(BA(this.dataSource)&&S6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class N6{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Jf(e)}createContext(e,n,i,a=!1){return new Fy({dataSource:e,methodName:n,targetDoc:i,path:Tn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ed(t){const e=t._freezeSettings(),n=Jf(t._databaseId);return new N6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qy(t,e,n,i,a,l={}){const c=t.createContext(l.merge||l.mergeFields?2:0,e,n,a);Ky("Data must be an object, but it was:",c,i);const h=HA(i,c);let p,g;if(l.merge)p=new os(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const x of l.mergeFields){const w=po(e,x,n);if(!c.contains(w))throw new xe(le.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);$A(v,w)||v.push(w)}p=new os(v),g=c.fieldTransforms.filter((x=>p.covers(x.field)))}else p=null,g=c.fieldTransforms;return new A6(new jn(h),p,g)}class sm extends Zu{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sm}}class Hy extends Zu{_toFieldTransform(e){return new QS(e.path,new Iu)}isEqual(e){return e instanceof Hy}}class Gy extends Zu{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new Mu(e.serializer,HS(e.serializer,this.Vc));return new QS(e.path,n)}isEqual(e){return e instanceof Gy&&this.Vc===e.Vc}}function FA(t,e,n,i){const a=t.createContext(1,e,n);Ky("Data must be an object, but it was:",a,i);const l=[],c=jn.empty();va(i,((p,g)=>{const v=KA(e,p,n);g=Tt(g);const x=a.childContextForFieldPath(v);if(g instanceof sm)l.push(v);else{const w=td(g,x);w!=null&&(l.push(v),c.set(v,w))}}));const h=new os(l);return new zA(c,h,a.fieldTransforms)}function qA(t,e,n,i,a,l){const c=t.createContext(1,e,n),h=[po(e,i,n)],p=[a];if(l.length%2!=0)throw new xe(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)h.push(po(e,l[w])),p.push(l[w+1]);const g=[],v=jn.empty();for(let w=h.length-1;w>=0;--w)if(!$A(g,h[w])){const E=h[w];let j=p[w];j=Tt(j);const M=c.childContextForFieldPath(E);if(j instanceof sm)g.push(E);else{const V=td(j,M);V!=null&&(g.push(E),v.set(E,V))}}const x=new os(g);return new zA(v,x,c.fieldTransforms)}function C6(t,e,n,i=!1){return td(n,t.createContext(i?4:3,e))}function td(t,e){if(GA(t=Tt(t)))return Ky("Unsupported field value:",e,t),HA(t,e);if(t instanceof Zu)return(function(i,a){if(!BA(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const h of i){let p=td(h,a.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(t,e)}return(function(i,a){if((i=Tt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return HS(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=_t.fromDate(i);return{timestampValue:_f(a.serializer,l)}}if(i instanceof _t){const l=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_f(a.serializer,l)}}if(i instanceof Ci)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof rs)return{bytesValue:sA(a.serializer,i._byteString)};if(i instanceof kt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ay(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Qs)return(function(c,h){const p=c instanceof Qs?c.toArray():c;return{mapValue:{fields:{[NS]:{stringValue:CS},[xf]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw h.createError("VectorValues must only contain numeric values.");return Ty(h.serializer,v)}))}}}}}})(i,a);if(hA(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${qf(i)}`)})(t,e)}function HA(t,e){const n={};return _S(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):va(t,((i,a)=>{const l=td(a,e.childContextForField(i));l!=null&&(n[i]=l)})),{mapValue:{fields:n}}}function GA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Ci||t instanceof rs||t instanceof kt||t instanceof Zu||t instanceof Qs||hA(t))}function Ky(t,e,n){if(!GA(n)||!xS(n)){const i=qf(n);throw i==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+i)}}function po(t,e,n){if((e=Tt(e))instanceof nm)return e._internalPath;if(typeof e=="string")return KA(t,e);throw Af("Field path arguments must be of type string or ",t,!1,void 0,n)}const R6=new RegExp("[~\\*/\\[\\]]");function KA(t,e,n){if(e.search(R6)>=0)throw Af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nm(...e.split("."))._internalPath}catch{throw Af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Af(t,e,n,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new xe(le.INVALID_ARGUMENT,h+t+p)}function $A(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{convertValue(e,n="none"){switch(ha(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(da(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return va(e,((a,l)=>{i[a]=this.convertValue(l,n)})),i}convertVectorValue(e){var i,a,l;const n=(l=(a=(i=e.fields)==null?void 0:i[xf].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>Bt(c.doubleValue)));return new Qs(n)}convertGeoPoint(e){return new Ci(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Gf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Nu(e));default:return null}}convertTimestamp(e){const n=ua(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=gt.fromString(e);et(dA(i),9688,{name:e});const a=new Cu(i.get(1),i.get(3)),l=new je(i.popFirst(5));return a.isEqual(n)||ar(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im extends YA{constructor(e){super(),this.firestore=e}convertBytes(e){return new rs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}function $y(){return new Hy("serverTimestamp")}function ta(t){return new Gy("increment",t)}const Zw="@firebase/firestore",e2="4.10.0";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class I6{constructor(e,n,i){this._userDataWriter=n,this._data=i,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new jn({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,i,a,l){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new D6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(po("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class D6 extends Nf{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yy{}class QA extends Yy{}function go(t,e,...n){let i=[];e instanceof Yy&&i.push(e),i=i.concat(n),(function(l){const c=l.filter((p=>p instanceof Wy)).length,h=l.filter((p=>p instanceof rm)).length;if(c>1||c>0&&h>0)throw new xe(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)t=a._apply(t);return t}class rm extends QA{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new rm(e,n,i)}_apply(e){const n=this._parse(e);return WA(e._query,n),new _o(e.firestore,e.converter,g0(e._query,n))}_parse(e){const n=ed(e.firestore);return(function(l,c,h,p,g,v,x){let w;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new xe(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){n2(x,v);const j=[];for(const M of x)j.push(t2(p,l,M));w={arrayValue:{values:j}}}else w=t2(p,l,x)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||n2(x,v),w=C6(h,c,x,v==="in"||v==="not-in");return nn.create(g,v,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qy(t,e,n){const i=e,a=po("where",t);return rm._create(a,i,n)}class Wy extends Yy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wy(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Js.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,l){let c=a;const h=l.getFlattenedFilters();for(const p of h)WA(c,p),c=g0(c,p)})(e._query,n),new _o(e.firestore,e.converter,g0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xy extends QA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xy(e,n)}_apply(e){const n=(function(a,l,c){if(a.startAt!==null)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ju(l,c)})(e._query,this._field,this._direction);return new _o(e.firestore,e.converter,sM(e._query,n))}}function kl(t,e="asc"){const n=e,i=po("orderBy",t);return Xy._create(i,n)}function t2(t,e,n){if(typeof(n=Tt(n))=="string"){if(n==="")throw new xe(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OS(e)&&n.indexOf("/")!==-1)throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(gt.fromString(n));if(!je.isDocumentKey(i))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return gw(t,new je(i))}if(n instanceof kt)return gw(t,n._key);throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qf(n)}.`)}function n2(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WA(t,e){const n=(function(a,l){for(const c of a)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new xe(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Jy(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class M6 extends YA{constructor(e){super(),this.firestore=e}convertBytes(e){return new rs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}function k6(){return new j6("count")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t){return O6(t,{count:k6()})}function O6(t,e){const n=us(t.firestore,dr),i=Ju(n),a=P5(e,((l,c)=>new xM(c,l.aggregateType,l._internalFieldPath)));return y6(i,t._query,a).then((l=>(function(h,p,g){const v=new im(h);return new I6(p,v,g)})(n,t,l)))}class gl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oa extends Nf{constructor(e,n,i,a,l,c){super(e,n,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(po("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=oa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}oa._jsonSchemaVersion="firestore/documentSnapshot/1.0",oa._jsonSchema={type:sn("string",oa._jsonSchemaVersion),bundleSource:sn("string","DocumentSnapshot"),bundleName:sn("string"),bundle:sn("string")};class ef extends oa{data(e={}){return super.data(e)}}class Nl{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new gl(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new ef(this._firestore,this._userDataWriter,i.key,i,new gl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((h=>{const p=new ef(a._firestore,a._userDataWriter,h.doc.key,h.doc,new gl(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const p=new ef(a._firestore,a._userDataWriter,h.doc.key,h.doc,new gl(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:P6(h.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Nl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function P6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nl._jsonSchemaVersion="firestore/querySnapshot/1.0",Nl._jsonSchema={type:sn("string",Nl._jsonSchemaVersion),bundleSource:sn("string","QuerySnapshot"),bundleName:sn("string"),bundle:sn("string")};const L6={maxAttempts:5};function ou(t,e){if((t=Tt(t)).firestore!==e)throw new xe(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=ed(e)}get(e){const n=ou(e,this._firestore),i=new M6(this._firestore);return this._transaction.lookup([n._key]).then((a=>{if(!a||a.length!==1)return Ve(24041);const l=a[0];if(l.isFoundDocument())return new Nf(this._firestore,i,l.key,l,n.converter);if(l.isNoDocument())return new Nf(this._firestore,i,n._key,null,n.converter);throw Ve(18433,{doc:l})}))}set(e,n,i){const a=ou(e,this._firestore),l=Jy(a.converter,n,i),c=qy(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,i);return this._transaction.set(a._key,c),this}update(e,n,i,...a){const l=ou(e,this._firestore);let c;return c=typeof(n=Tt(n))=="string"||n instanceof nm?qA(this._dataReader,"Transaction.update",l._key,n,i,a):FA(this._dataReader,"Transaction.update",l._key,n),this._transaction.update(l._key,c),this}delete(e){const n=ou(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6 extends U6{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ou(e,this._firestore),i=new im(this._firestore);return super.get(e).then((a=>new oa(this._firestore,i,n._key,a._document,new gl(!1,!1),n.converter)))}}function nd(t,e,n){t=us(t,dr);const i={...L6,...n};(function(c){if(c.maxAttempts<1)throw new xe(le.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i);const a=Ju(t);return x6(a,(l=>e(new z6(t,l))),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t){t=us(t,kt);const e=us(t.firestore,dr),n=Ju(e);return p6(n,t._key).then((i=>B6(e,t,i)))}function wo(t){t=us(t,_o);const e=us(t.firestore,dr),n=Ju(e),i=new im(e);return V6(t._query),g6(n,t._query).then((a=>new Nl(e,i,t,a)))}function XA(t,e,n){t=us(t,kt);const i=us(t.firestore,dr),a=Jy(t.converter,e,n),l=ed(i);return lm(i,[qy(l,"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,En.none())])}function $l(t,e,n,...i){t=us(t,kt);const a=us(t.firestore,dr),l=ed(a);let c;return c=typeof(e=Tt(e))=="string"||e instanceof nm?qA(l,"updateDoc",t._key,e,n,i):FA(l,"updateDoc",t._key,e),lm(a,[c.toMutation(t._key,En.exists(!0))])}function sd(t){return lm(us(t.firestore,dr),[new Wf(t._key,En.none())])}function om(t,e){const n=us(t.firestore,dr),i=vt(t),a=Jy(t.converter,e),l=ed(t.firestore);return lm(n,[qy(l,"addDoc",i._key,a,t.converter!==null,{}).toMutation(i._key,En.exists(!1))]).then((()=>i))}function lm(t,e){const n=Ju(t);return v6(n,e)}function B6(t,e,n){const i=n.docs.get(e._key),a=new im(t);return new oa(t,a,e._key,i,new gl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){g5(zl),Ii(new Ws("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),h=new dr(new x5(i.getProvider("auth-internal")),new w5(c,i.getProvider("app-check-internal")),z5(c,a),c);return l={useFetchStreams:n,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Rs(Zw,e2,e),Rs(Zw,e2,"esm2020")})();const F6={apiKey:"AIzaSyCoGjgyb1HYsIsqDH9xomUMLgJx7ozlJsk",authDomain:"virtual-election-bd-2026.firebaseapp.com",projectId:"virtual-election-bd-2026",storageBucket:"virtual-election-bd-2026.appspot.com",messagingSenderId:"1032136356678",appId:"1:1032136356678:web:272877e5acfa6f30c1ab47",measurementId:"G-VCDHB13GDE"},Zy=iE(F6);Y3(Zy);const Ns=m5(Zy),Ue=T6(Zy),q6=async()=>{const t=await am(vt(Ue,"global_stats","national"));return t.exists()?t.data():{total_voters:0,total_votes_cast:0}},H6=async(t,e)=>{const n=vt(Ue,"users",t),i=vt(Ue,"global_stats","national");await nd(Ue,async a=>{a.set(n,{uid:t,username:e.username,email:e.email,age:e.age,division:e.division,district:e.district,device_fingerprint:e.device_fingerprint||"not_tracked",security:{last_human_verify_ts:null,is_banned:!1},voting_status:{has_voted:!1,voted_at:null},referendum_votes:{}}),a.update(i,{total_voters:ta(1)})})},G6=async t=>{const e=vt(Ue,"users",t),n=await am(e);return n.exists()?n.data():null},K6=async t=>{const e=vt(Ue,"users",t);await nd(Ue,async n=>{n.update(e,{"security.last_human_verify_ts":$y()})})},$6=t=>t>=18&&t<=25?"18-25":t>=26&&t<=40?"26-40":t>=41&&t<=60?"41-60":"61+",Y6=async(t,e)=>{const n=vt(Ue,"users",t.uid),i=vt(Ue,"candidates",e),a=vt(Ue,"districts",t.district),l=vt(Ue,"global_stats","national");await nd(Ue,async c=>{var v;const h=await c.get(n);if(!h.exists()||(v=h.data())!=null&&v.voting_status.has_voted)throw new Error("      ");const g=`age_demographics.${$6(t.age)}`;c.update(n,{"voting_status.has_voted":!0,"voting_status.voted_at":$y(),"voting_status.voted_candidate_id":e}),c.update(i,{vote_count:ta(1),[g]:ta(1)}),c.update(a,{total_votes_cast:ta(1)}),c.update(l,{total_votes_cast:ta(1)})})},Q6=async()=>{const t=vt(Ue,"referendums","daily_topic"),e=await am(t);if(e.exists())return{id:e.id,...e.data()};{const n={question:"        ?",yes_count:0,no_count:0,total_votes:0,active:!0};return await XA(t,n),{id:"daily_topic",...n}}},W6=async(t,e,n)=>{const i=vt(Ue,"referendums",e),a=vt(Ue,"users",t);await nd(Ue,async l=>{const c=await l.get(a);if(!c.exists())throw new Error("  ");const h=c.data();if(h.referendum_votes&&h.referendum_votes[e]===!0)throw new Error("     ");const p=n==="yes"?"yes_count":"no_count";l.update(i,{[p]:ta(1),total_votes:ta(1)}),h.referendum_votes?l.update(a,{[`referendum_votes.${e}`]:!0}):l.set(a,{referendum_votes:{[e]:!0}},{merge:!0})})},ev=async()=>(await wo(Ln(Ue,"candidates"))).docs.map(e=>({id:e.id,...e.data()})),Ol=async t=>{const e=go(Ln(Ue,"candidates"),Qy("district","==",t),kl("vote_count","desc"));return(await wo(e)).docs.map(i=>({id:i.id,...i.data()}))},X6=async t=>{const e={...t,vote_count:0,age_demographics:{"18-25":0,"26-40":0,"41-60":0,"61+":0}};return await om(Ln(Ue,"candidates"),e)},tv=async(t,e)=>await $l(vt(Ue,"candidates",t),e),J6=async t=>await sd(vt(Ue,"candidates",t)),JA=async()=>(await wo(go(Ln(Ue,"polls"),kl("question")))).docs.map(e=>({id:e.id,...e.data()})),Z6=async(t,e)=>{const n=vt(Ue,"polls",t),i=e==="yes"?"yes_count":"no_count";await nd(Ue,async a=>{a.update(n,{[i]:ta(1)})})},eO=async t=>await om(Ln(Ue,"polls"),{...t,yes_count:0,no_count:0}),tO=async(t,e)=>await $l(vt(Ue,"polls",t),e),nO=async t=>await sd(vt(Ue,"polls",t)),ZA=async(t="all")=>{let e;return t==="all"?e=go(Ln(Ue,"fact_checks"),kl("timestamp","desc")):e=go(Ln(Ue,"fact_checks"),Qy("status","==",t),kl("timestamp","desc")),(await wo(e)).docs.map(i=>({id:i.id,...i.data()}))},sO=async t=>await om(Ln(Ue,"fact_checks"),{...t,timestamp:$y()}),iO=async(t,e)=>await $l(vt(Ue,"fact_checks",t),e),rO=async t=>await sd(vt(Ue,"fact_checks",t)),eN=async()=>{const t=await q6(),e=await Dg(Ln(Ue,"parties")),n=await Dg(Ln(Ue,"districts")),i=await Dg(Ln(Ue,"candidates"));return{totalUsers:t.total_voters||0,totalParties:e.data().count,totalDistricts:n.data().count,totalCandidates:i.data().count,totalVotesCast:t.total_votes_cast||0}},nv=async()=>(await wo(go(Ln(Ue,"parties"),kl("name")))).docs.map(e=>({id:e.id,...e.data()})),aO=async t=>await om(Ln(Ue,"parties"),t),oO=async(t,e)=>await $l(vt(Ue,"parties",t),e),lO=async t=>await sd(vt(Ue,"parties",t)),cm=async()=>(await wo(go(Ln(Ue,"districts"),kl("name")))).docs.map(e=>({id:e.id,...e.data()})),cO=async t=>await XA(vt(Ue,"districts",t.name),{...t,total_voters:0,total_votes_cast:0}),uO=async(t,e)=>await $l(vt(Ue,"districts",t),e),dO=async t=>await sd(vt(Ue,"districts",t)),hO=async t=>{try{const e=go(Ln(Ue,"users"),Qy("district","==",t));return(await wo(e)).docs.map(i=>({uid:i.id,...i.data()}))}catch(e){return console.error("Error fetching users by district:",e),[]}},tN=async(t,e)=>{try{const n=vt(Ue,"users",t);return await $l(n,e),!0}catch(n){throw console.error("Error updating user profile:",n),n}},fO=async()=>{try{const t=await am(vt(Ue,"tools","general"));return t.exists()?t.data():null}catch(t){return console.error("Error fetching tools:",t),null}},nN=z.createContext(void 0),mO=({children:t})=>{const[e,n]=z.useState(null),[i,a]=z.useState(null),[l,c]=z.useState(!0),h=async v=>{if(v){const x=await G6(v.uid);a(x)}else a(null)};z.useEffect(()=>{const v=iV(Ns,async x=>{n(x),await h(x),c(!1)});return()=>v()},[]);const p=()=>{e&&h(e)},g=async()=>{try{await l0(Ns)}catch(v){throw console.error("Logout error:",v),v}};return d.jsx(nN.Provider,{value:{user:e,userProfile:i,loading:l,refreshUserProfile:p,logout:g},children:t})},To=()=>{const t=z.useContext(nN);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},sv=z.createContext({});function iv(t){const e=z.useRef(null);return e.current===null&&(e.current=t()),e.current}const sN=typeof window<"u",iN=sN?z.useLayoutEffect:z.useEffect,um=z.createContext(null);function rv(t,e){t.indexOf(e)===-1&&t.push(e)}function dm(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Vi=(t,e,n)=>n>e?e:n<t?t:n;let av=()=>{};const lr={},rN=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function aN(t){return typeof t=="object"&&t!==null}const oN=t=>/^0[^.\s]+$/u.test(t);function ov(t){let e;return()=>(e===void 0&&(e=t()),e)}const js=t=>t,pO=(t,e)=>n=>e(t(n)),id=(...t)=>t.reduce(pO),Pl=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class lv{constructor(){this.subscriptions=[]}add(e){return rv(this.subscriptions,e),()=>dm(this.subscriptions,e)}notify(e,n,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,n,i);else for(let l=0;l<a;l++){const c=this.subscriptions[l];c&&c(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ri=t=>t*1e3,Cs=t=>t/1e3;function lN(t,e){return e?t*(1e3/e):0}const gO=(t,e,n)=>{const i=e-t;return((n-t)%i+i)%i+t},cN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,yO=1e-7,vO=12;function xO(t,e,n,i,a){let l,c,h=0;do c=e+(n-e)/2,l=cN(c,i,a)-t,l>0?n=c:e=c;while(Math.abs(l)>yO&&++h<vO);return c}function rd(t,e,n,i){if(t===e&&n===i)return js;const a=l=>xO(l,0,1,t,n);return l=>l===0||l===1?l:cN(a(l),e,i)}const uN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,dN=t=>e=>1-t(1-e),hN=rd(.33,1.53,.69,.99),cv=dN(hN),fN=uN(cv),mN=t=>(t*=2)<1?.5*cv(t):.5*(2-Math.pow(2,-10*(t-1))),uv=t=>1-Math.sin(Math.acos(t)),pN=dN(uv),gN=uN(uv),bO=rd(.42,0,1,1),_O=rd(0,0,.58,1),yN=rd(.42,0,.58,1),vN=t=>Array.isArray(t)&&typeof t[0]!="number";function xN(t,e){return vN(t)?t[gO(0,t.length,e)]:t}const bN=t=>Array.isArray(t)&&typeof t[0]=="number",wO={linear:js,easeIn:bO,easeInOut:yN,easeOut:_O,circIn:uv,circInOut:gN,circOut:pN,backIn:cv,backInOut:fN,backOut:hN,anticipate:mN},TO=t=>typeof t=="string",s2=t=>{if(bN(t)){av(t.length===4);const[e,n,i,a]=t;return rd(e,n,i,a)}else if(TO(t))return wO[t];return t},Uh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function EO(t,e){let n=new Set,i=new Set,a=!1,l=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function p(v){c.has(v)&&(g.schedule(v),t()),v(h)}const g={schedule:(v,x=!1,w=!1)=>{const j=w&&a?n:i;return x&&c.add(v),j.has(v)||j.add(v),v},cancel:v=>{i.delete(v),c.delete(v)},process:v=>{if(h=v,a){l=!0;return}a=!0,[n,i]=[i,n],n.forEach(p),n.clear(),a=!1,l&&(l=!1,g.process(v))}};return g}const SO=40;function _N(t,e){let n=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,c=Uh.reduce((K,oe)=>(K[oe]=EO(l),K),{}),{setup:h,read:p,resolveKeyframes:g,preUpdate:v,update:x,preRender:w,render:E,postRender:j}=c,M=()=>{const K=lr.useManualTiming?a.timestamp:performance.now();n=!1,lr.useManualTiming||(a.delta=i?1e3/60:Math.max(Math.min(K-a.timestamp,SO),1)),a.timestamp=K,a.isProcessing=!0,h.process(a),p.process(a),g.process(a),v.process(a),x.process(a),w.process(a),E.process(a),j.process(a),a.isProcessing=!1,n&&e&&(i=!1,t(M))},V=()=>{n=!0,i=!0,a.isProcessing||t(M)};return{schedule:Uh.reduce((K,oe)=>{const H=c[oe];return K[oe]=(Z,R=!1,S=!1)=>(n||V(),H.schedule(Z,R,S)),K},{}),cancel:K=>{for(let oe=0;oe<Uh.length;oe++)c[Uh[oe]].cancel(K)},state:a,steps:c}}const{schedule:wt,cancel:pa,state:_n,steps:Vg}=_N(typeof requestAnimationFrame<"u"?requestAnimationFrame:js,!0);let tf;function AO(){tf=void 0}const kn={now:()=>(tf===void 0&&kn.set(_n.isProcessing||lr.useManualTiming?_n.timestamp:performance.now()),tf),set:t=>{tf=t,queueMicrotask(AO)}},wN=t=>e=>typeof e=="string"&&e.startsWith(t),TN=wN("--"),NO=wN("var(--"),dv=t=>NO(t)?CO.test(t.split("/*")[0].trim()):!1,CO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function i2(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Yl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ku={...Yl,transform:t=>Vi(0,1,t)},zh={...Yl,default:1},yu=t=>Math.round(t*1e5)/1e5,hv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function RO(t){return t==null}const jO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fv=(t,e)=>n=>!!(typeof n=="string"&&jO.test(n)&&n.startsWith(t)||e&&!RO(n)&&Object.prototype.hasOwnProperty.call(n,e)),EN=(t,e,n)=>i=>{if(typeof i!="string")return i;const[a,l,c,h]=i.match(hv);return{[t]:parseFloat(a),[e]:parseFloat(l),[n]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},IO=t=>Vi(0,255,t),Mg={...Yl,transform:t=>Math.round(IO(t))},io={test:fv("rgb","red"),parse:EN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Mg.transform(t)+", "+Mg.transform(e)+", "+Mg.transform(n)+", "+yu(ku.transform(i))+")"};function DO(t){let e="",n="",i="",a="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),a=t.substring(4,5),e+=e,n+=n,i+=i,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const A0={test:fv("#"),parse:DO,transform:io.transform},ad=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),$r=ad("deg"),ji=ad("%"),Ee=ad("px"),VO=ad("vh"),MO=ad("vw"),r2={...ji,parse:t=>ji.parse(t)/100,transform:t=>ji.transform(t*100)},yl={test:fv("hsl","hue"),parse:EN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+ji.transform(yu(e))+", "+ji.transform(yu(n))+", "+yu(ku.transform(i))+")"},tn={test:t=>io.test(t)||A0.test(t)||yl.test(t),parse:t=>io.test(t)?io.parse(t):yl.test(t)?yl.parse(t):A0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?io.transform(t):yl.transform(t),getAnimatableNone:t=>{const e=tn.parse(t);return e.alpha=0,tn.transform(e)}},kO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function OO(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(hv))==null?void 0:e.length)||0)+(((n=t.match(kO))==null?void 0:n.length)||0)>0}const SN="number",AN="color",PO="var",LO="var(",a2="${}",UO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ou(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},a=[];let l=0;const h=e.replace(UO,p=>(tn.test(p)?(i.color.push(l),a.push(AN),n.push(tn.parse(p))):p.startsWith(LO)?(i.var.push(l),a.push(PO),n.push(p)):(i.number.push(l),a.push(SN),n.push(parseFloat(p))),++l,a2)).split(a2);return{values:n,split:h,indexes:i,types:a}}function NN(t){return Ou(t).values}function CN(t){const{split:e,types:n}=Ou(t),i=e.length;return a=>{let l="";for(let c=0;c<i;c++)if(l+=e[c],a[c]!==void 0){const h=n[c];h===SN?l+=yu(a[c]):h===AN?l+=tn.transform(a[c]):l+=a[c]}return l}}const zO=t=>typeof t=="number"?0:tn.test(t)?tn.getAnimatableNone(t):t;function BO(t){const e=NN(t);return CN(t)(e.map(zO))}const ga={test:OO,parse:NN,createTransformer:CN,getAnimatableNone:BO};function kg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function FO({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let a=0,l=0,c=0;if(!e)a=l=c=n;else{const h=n<.5?n*(1+e):n+e-n*e,p=2*n-h;a=kg(p,h,t+1/3),l=kg(p,h,t),c=kg(p,h,t-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:i}}function Cf(t,e){return n=>n>0?e:t}const Nt=(t,e,n)=>t+(e-t)*n,Og=(t,e,n)=>{const i=t*t,a=n*(e*e-i)+i;return a<0?0:Math.sqrt(a)},qO=[A0,io,yl],HO=t=>qO.find(e=>e.test(t));function o2(t){const e=HO(t);if(!e)return!1;let n=e.parse(t);return e===yl&&(n=FO(n)),n}const l2=(t,e)=>{const n=o2(t),i=o2(e);if(!n||!i)return Cf(t,e);const a={...n};return l=>(a.red=Og(n.red,i.red,l),a.green=Og(n.green,i.green,l),a.blue=Og(n.blue,i.blue,l),a.alpha=Nt(n.alpha,i.alpha,l),io.transform(a))},N0=new Set(["none","hidden"]);function GO(t,e){return N0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function KO(t,e){return n=>Nt(t,e,n)}function mv(t){return typeof t=="number"?KO:typeof t=="string"?dv(t)?Cf:tn.test(t)?l2:QO:Array.isArray(t)?RN:typeof t=="object"?tn.test(t)?l2:$O:Cf}function RN(t,e){const n=[...t],i=n.length,a=t.map((l,c)=>mv(l)(l,e[c]));return l=>{for(let c=0;c<i;c++)n[c]=a[c](l);return n}}function $O(t,e){const n={...t,...e},i={};for(const a in n)t[a]!==void 0&&e[a]!==void 0&&(i[a]=mv(t[a])(t[a],e[a]));return a=>{for(const l in i)n[l]=i[l](a);return n}}function YO(t,e){const n=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],c=t.indexes[l][i[l]],h=t.values[c]??0;n[a]=h,i[l]++}return n}const QO=(t,e)=>{const n=ga.createTransformer(e),i=Ou(t),a=Ou(e);return i.indexes.var.length===a.indexes.var.length&&i.indexes.color.length===a.indexes.color.length&&i.indexes.number.length>=a.indexes.number.length?N0.has(t)&&!a.values.length||N0.has(e)&&!i.values.length?GO(t,e):id(RN(YO(i,a),a.values),n):Cf(t,e)};function jN(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Nt(t,e,n):mv(t)(t,e)}const WO=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>wt.update(e,n),stop:()=>pa(e),now:()=>_n.isProcessing?_n.timestamp:kn.now()}},IN=(t,e,n=10)=>{let i="";const a=Math.max(Math.round(e/n),2);for(let l=0;l<a;l++)i+=Math.round(t(l/(a-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Rf=2e4;function pv(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Rf;)e+=n,i=t.next(e);return e>=Rf?1/0:e}function DN(t,e=100,n){const i=n({...t,keyframes:[0,e]}),a=Math.min(pv(i),Rf);return{type:"keyframes",ease:l=>i.next(a*l).value/e,duration:Cs(a)}}const XO=5;function VN(t,e,n){const i=Math.max(e-XO,0);return lN(n-t(i),e-i)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Pg=.001;function JO({duration:t=Mt.duration,bounce:e=Mt.bounce,velocity:n=Mt.velocity,mass:i=Mt.mass}){let a,l,c=1-e;c=Vi(Mt.minDamping,Mt.maxDamping,c),t=Vi(Mt.minDuration,Mt.maxDuration,Cs(t)),c<1?(a=g=>{const v=g*c,x=v*t,w=v-n,E=C0(g,c),j=Math.exp(-x);return Pg-w/E*j},l=g=>{const x=g*c*t,w=x*n+n,E=Math.pow(c,2)*Math.pow(g,2)*t,j=Math.exp(-x),M=C0(Math.pow(g,2),c);return(-a(g)+Pg>0?-1:1)*((w-E)*j)/M}):(a=g=>{const v=Math.exp(-g*t),x=(g-n)*t+1;return-Pg+v*x},l=g=>{const v=Math.exp(-g*t),x=(n-g)*(t*t);return v*x});const h=5/t,p=eP(a,l,h);if(t=Ri(t),isNaN(p))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:t};{const g=Math.pow(p,2)*i;return{stiffness:g,damping:c*2*Math.sqrt(i*g),duration:t}}}const ZO=12;function eP(t,e,n){let i=n;for(let a=1;a<ZO;a++)i=i-t(i)/e(i);return i}function C0(t,e){return t*Math.sqrt(1-e*e)}const tP=["duration","bounce"],nP=["stiffness","damping","mass"];function c2(t,e){return e.some(n=>t[n]!==void 0)}function sP(t){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...t};if(!c2(t,nP)&&c2(t,tP))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),a=i*i,l=2*Vi(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:Mt.mass,stiffness:a,damping:l}}else{const n=JO(t);e={...e,...n,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function Pu(t=Mt.visualDuration,e=Mt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:a}=n;const l=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],h={done:!1,value:l},{stiffness:p,damping:g,mass:v,duration:x,velocity:w,isResolvedFromDuration:E}=sP({...n,velocity:-Cs(n.velocity||0)}),j=w||0,M=g/(2*Math.sqrt(p*v)),V=c-l,q=Cs(Math.sqrt(p/v)),B=Math.abs(V)<5;i||(i=B?Mt.restSpeed.granular:Mt.restSpeed.default),a||(a=B?Mt.restDelta.granular:Mt.restDelta.default);let K;if(M<1){const H=C0(q,M);K=Z=>{const R=Math.exp(-M*q*Z);return c-R*((j+M*q*V)/H*Math.sin(H*Z)+V*Math.cos(H*Z))}}else if(M===1)K=H=>c-Math.exp(-q*H)*(V+(j+q*V)*H);else{const H=q*Math.sqrt(M*M-1);K=Z=>{const R=Math.exp(-M*q*Z),S=Math.min(H*Z,300);return c-R*((j+M*q*V)*Math.sinh(S)+H*V*Math.cosh(S))/H}}const oe={calculatedDuration:E&&x||null,next:H=>{const Z=K(H);if(E)h.done=H>=x;else{let R=H===0?j:0;M<1&&(R=H===0?Ri(j):VN(K,H,Z));const S=Math.abs(R)<=i,N=Math.abs(c-Z)<=a;h.done=S&&N}return h.value=h.done?c:Z,h},toString:()=>{const H=Math.min(pv(oe),Rf),Z=IN(R=>oe.next(H*R).value,H,30);return H+"ms "+Z},toTransition:()=>{}};return oe}Pu.applyToOptions=t=>{const e=DN(t,100,Pu);return t.ease=e.ease,t.duration=Ri(e.duration),t.type="keyframes",t};function R0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:c,min:h,max:p,restDelta:g=.5,restSpeed:v}){const x=t[0],w={done:!1,value:x},E=S=>h!==void 0&&S<h||p!==void 0&&S>p,j=S=>h===void 0?p:p===void 0||Math.abs(h-S)<Math.abs(p-S)?h:p;let M=n*e;const V=x+M,q=c===void 0?V:c(V);q!==V&&(M=q-x);const B=S=>-M*Math.exp(-S/i),K=S=>q+B(S),oe=S=>{const N=B(S),k=K(S);w.done=Math.abs(N)<=g,w.value=w.done?q:k};let H,Z;const R=S=>{E(w.value)&&(H=S,Z=Pu({keyframes:[w.value,j(w.value)],velocity:VN(K,S,w.value),damping:a,stiffness:l,restDelta:g,restSpeed:v}))};return R(0),{calculatedDuration:null,next:S=>{let N=!1;return!Z&&H===void 0&&(N=!0,oe(S),R(S)),H!==void 0&&S>=H?Z.next(S-H):(!N&&oe(S),w)}}}function iP(t,e,n){const i=[],a=n||lr.mix||jN,l=t.length-1;for(let c=0;c<l;c++){let h=a(t[c],t[c+1]);if(e){const p=Array.isArray(e)?e[c]||js:e;h=id(p,h)}i.push(h)}return i}function rP(t,e,{clamp:n=!0,ease:i,mixer:a}={}){const l=t.length;if(av(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=iP(e,i,a),p=h.length,g=v=>{if(c&&v<t[0])return e[0];let x=0;if(p>1)for(;x<t.length-2&&!(v<t[x+1]);x++);const w=Pl(t[x],t[x+1],v);return h[x](w)};return n?v=>g(Vi(t[0],t[l-1],v)):g}function MN(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const a=Pl(0,e,i);t.push(Nt(n,1,a))}}function kN(t){const e=[0];return MN(e,t.length-1),e}function aP(t,e){return t.map(n=>n*e)}function oP(t,e){return t.map(()=>e||yN).splice(0,t.length-1)}function vu({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const a=vN(i)?i.map(s2):s2(i),l={done:!1,value:e[0]},c=aP(n&&n.length===e.length?n:kN(e),t),h=rP(c,e,{ease:Array.isArray(a)?a:oP(e,a)});return{calculatedDuration:t,next:p=>(l.value=h(p),l.done=p>=t,l)}}const lP=t=>t!==null;function gv(t,{repeat:e,repeatType:n="loop"},i,a=1){const l=t.filter(lP),h=a<0||e&&n!=="loop"&&e%2===1?0:l.length-1;return!h||i===void 0?l[h]:i}const cP={decay:R0,inertia:R0,tween:vu,keyframes:vu,spring:Pu};function ON(t){typeof t.type=="string"&&(t.type=cP[t.type])}class yv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const uP=t=>t/100;class vv extends yv{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,a;const{motionValue:n}=this.options;n&&n.updatedAt!==kn.now()&&this.tick(kn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(i=this.options).onStop)==null||a.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;ON(e);const{type:n=vu,repeat:i=0,repeatDelay:a=0,repeatType:l,velocity:c=0}=e;let{keyframes:h}=e;const p=n||vu;p!==vu&&typeof h[0]!="number"&&(this.mixKeyframes=id(uP,jN(h[0],h[1])),h=[0,100]);const g=p({...e,keyframes:h});l==="mirror"&&(this.mirroredGenerator=p({...e,keyframes:[...h].reverse(),velocity:-c})),g.calculatedDuration===null&&(g.calculatedDuration=pv(g));const{calculatedDuration:v}=g;this.calculatedDuration=v,this.resolvedDuration=v+a,this.totalDuration=this.resolvedDuration*(i+1)-a,this.generator=g}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:a,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:p}=this;if(this.startTime===null)return i.next(0);const{delay:g=0,keyframes:v,repeat:x,repeatType:w,repeatDelay:E,type:j,onUpdate:M,finalKeyframe:V}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const q=this.currentTime-g*(this.playbackSpeed>=0?1:-1),B=this.playbackSpeed>=0?q<0:q>a;this.currentTime=Math.max(q,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let K=this.currentTime,oe=i;if(x){const S=Math.min(this.currentTime,a)/h;let N=Math.floor(S),k=S%1;!k&&S>=1&&(k=1),k===1&&N--,N=Math.min(N,x+1),!!(N%2)&&(w==="reverse"?(k=1-k,E&&(k-=E/h)):w==="mirror"&&(oe=c)),K=Vi(0,1,k)*h}const H=B?{done:!1,value:v[0]}:oe.next(K);l&&(H.value=l(H.value));let{done:Z}=H;!B&&p!==null&&(Z=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Z);return R&&j!==R0&&(H.value=gv(v,this.options,V,this.speed)),M&&M(H.value),R&&this.finish(),H}then(e,n){return this.finished.then(e,n)}get duration(){return Cs(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Cs(e)}get time(){return Cs(this.currentTime)}set time(e){var n;e=Ri(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(kn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Cs(this.currentTime))}play(){var a,l;if(this.isStopped)return;const{driver:e=WO,startTime:n}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(l=(a=this.options).onPlay)==null||l.call(a);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(kn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function dP(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ro=t=>t*180/Math.PI,j0=t=>{const e=ro(Math.atan2(t[1],t[0]));return I0(e)},hP={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:j0,rotateZ:j0,skewX:t=>ro(Math.atan(t[1])),skewY:t=>ro(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},I0=t=>(t=t%360,t<0&&(t+=360),t),u2=j0,d2=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),h2=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),fP={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:d2,scaleY:h2,scale:t=>(d2(t)+h2(t))/2,rotateX:t=>I0(ro(Math.atan2(t[6],t[5]))),rotateY:t=>I0(ro(Math.atan2(-t[2],t[0]))),rotateZ:u2,rotate:u2,skewX:t=>ro(Math.atan(t[4])),skewY:t=>ro(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function D0(t){return t.includes("scale")?1:0}function V0(t,e){if(!t||t==="none")return D0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,a;if(n)i=fP,a=n;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=hP,a=h}if(!a)return D0(e);const l=i[e],c=a[1].split(",").map(pP);return typeof l=="function"?l(c):c[l]}const mP=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return V0(n,e)};function pP(t){return parseFloat(t.trim())}const Ql=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wl=new Set(Ql),f2=t=>t===Yl||t===Ee,gP=new Set(["x","y","z"]),yP=Ql.filter(t=>!gP.has(t));function vP(t){const e=[];return yP.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const na={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>V0(e,"x"),y:(t,{transform:e})=>V0(e,"y")};na.translateX=na.x;na.translateY=na.y;const oo=new Set;let M0=!1,k0=!1,O0=!1;function PN(){if(k0){const t=Array.from(oo).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const a=vP(i);a.length&&(n.set(i,a),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const a=n.get(i);a&&a.forEach(([l,c])=>{var h;(h=i.getValue(l))==null||h.set(c)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}k0=!1,M0=!1,oo.forEach(t=>t.complete(O0)),oo.clear()}function LN(){oo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(k0=!0)})}function xP(){O0=!0,LN(),PN(),O0=!1}class xv{constructor(e,n,i,a,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=a,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(oo.add(this),M0||(M0=!0,wt.read(LN),wt.resolveKeyframes(PN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:a}=this;if(e[0]===null){const l=a==null?void 0:a.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(i&&n){const h=i.readValue(n,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),a&&l===void 0&&a.set(e[0])}dP(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),oo.delete(this)}cancel(){this.state==="scheduled"&&(oo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const bP=t=>t.startsWith("--");function _P(t,e,n){bP(e)?t.style.setProperty(e,n):t.style[e]=n}const wP=ov(()=>window.ScrollTimeline!==void 0),TP={};function EP(t,e){const n=ov(t);return()=>TP[e]??n()}const UN=EP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),lu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,m2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:lu([0,.65,.55,1]),circOut:lu([.55,0,1,.45]),backIn:lu([.31,.01,.66,-.59]),backOut:lu([.33,1.53,.69,.99])};function zN(t,e){if(t)return typeof t=="function"?UN()?IN(t,e):"ease-out":bN(t)?lu(t):Array.isArray(t)?t.map(n=>zN(n,e)||m2.easeOut):m2[t]}function SP(t,e,n,{delay:i=0,duration:a=300,repeat:l=0,repeatType:c="loop",ease:h="easeOut",times:p}={},g=void 0){const v={[e]:n};p&&(v.offset=p);const x=zN(h,a);Array.isArray(x)&&(v.easing=x);const w={delay:i,duration:a,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return g&&(w.pseudoElement=g),t.animate(v,w)}function bv(t){return typeof t=="function"&&"applyToOptions"in t}function AP({type:t,...e}){return bv(t)&&UN()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NP extends yv{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:i,keyframes:a,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:h,onComplete:p}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,av(typeof e.type!="string");const g=AP(e);this.animation=SP(n,i,a,g,l),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const v=gv(a,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(v):_P(n,i,v),this.animation.cancel()}p==null||p(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,i;const e=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return Cs(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Cs(e)}get time(){return Cs(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Ri(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&wP()?(this.animation.timeline=e,js):n(this)}}const BN={anticipate:mN,backInOut:fN,circInOut:gN};function CP(t){return t in BN}function RP(t){typeof t.ease=="string"&&CP(t.ease)&&(t.ease=BN[t.ease])}const Lg=10;class jP extends NP{constructor(e){RP(e),ON(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:a,element:l,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const h=new vv({...c,autoplay:!1}),p=Math.max(Lg,kn.now()-this.startTime),g=Vi(0,Lg,p-Lg);n.setWithVelocity(h.sample(Math.max(0,p-g)).value,h.sample(p).value,g),h.stop()}}const p2=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ga.test(t)||t==="0")&&!t.startsWith("url("));function IP(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function DP(t,e,n,i){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],c=p2(a,e),h=p2(l,e);return!c||!h?!1:IP(t)||(n==="spring"||bv(n))&&i}function P0(t){t.duration=0,t.type="keyframes"}const VP=new Set(["opacity","clipPath","filter","transform"]),MP=ov(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function kP(t){var v;const{motionValue:e,name:n,repeatDelay:i,repeatType:a,damping:l,type:c}=t;if(!(((v=e==null?void 0:e.owner)==null?void 0:v.current)instanceof HTMLElement))return!1;const{onUpdate:p,transformTemplate:g}=e.owner.getProps();return MP()&&n&&VP.has(n)&&(n!=="transform"||!g)&&!p&&!i&&a!=="mirror"&&l!==0&&c!=="inertia"}const OP=40;class PP extends yv{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:c="loop",keyframes:h,name:p,motionValue:g,element:v,...x}){var j;super(),this.stop=()=>{var M,V;this._animation&&(this._animation.stop(),(M=this.stopTimeline)==null||M.call(this)),(V=this.keyframeResolver)==null||V.cancel()},this.createdAt=kn.now();const w={autoplay:e,delay:n,type:i,repeat:a,repeatDelay:l,repeatType:c,name:p,motionValue:g,element:v,...x},E=(v==null?void 0:v.KeyframeResolver)||xv;this.keyframeResolver=new E(h,(M,V,q)=>this.onKeyframesResolved(M,V,w,!q),p,g,v),(j=this.keyframeResolver)==null||j.scheduleResolve()}onKeyframesResolved(e,n,i,a){var V,q;this.keyframeResolver=void 0;const{name:l,type:c,velocity:h,delay:p,isHandoff:g,onUpdate:v}=i;this.resolvedAt=kn.now(),DP(e,l,c,h)||((lr.instantAnimations||!p)&&(v==null||v(gv(e,i,n))),e[0]=e[e.length-1],P0(i),i.repeat=0);const w={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>OP?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},E=!g&&kP(w),j=(q=(V=w.motionValue)==null?void 0:V.owner)==null?void 0:q.current,M=E?new jP({...w,element:j}):new vv(w);M.finished.then(()=>{this.notifyFinished()}).catch(js),this.pendingTimeline&&(this.stopTimeline=M.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=M}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),xP()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}class LP{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e){const n=this.animations.map(i=>i.attachTimeline(e));return()=>{n.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return g2(this.animations,"duration")}get iterationDuration(){return g2(this.animations,"iterationDuration")}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function g2(t,e){let n=0;for(let i=0;i<t.length;i++){const a=t[i][e];a!==null&&a>n&&(n=a)}return n}class UP extends LP{then(e,n){return this.finished.finally(e).then(()=>{})}}function FN(t,e,n,i=0,a=1){const l=Array.from(t).sort((g,v)=>g.sortNodePosition(v)).indexOf(e),c=t.size,h=(c-1)*i;return typeof n=="function"?n(l,c):a===1?l*i:h-l*i}const zP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function BP(t){const e=zP.exec(t);if(!e)return[,];const[,n,i,a]=e;return[`--${n??i}`,a]}function qN(t,e,n=1){const[i,a]=BP(t);if(!i)return;const l=window.getComputedStyle(e).getPropertyValue(i);if(l){const c=l.trim();return rN(c)?parseFloat(c):c}return dv(a)?qN(a,e,n+1):a}const FP={type:"spring",stiffness:500,damping:25,restSpeed:10},qP=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),HP={type:"keyframes",duration:.8},GP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},KP=(t,{keyframes:e})=>e.length>2?HP:Wl.has(t)?t.startsWith("scale")?qP(e[1]):FP:GP,$P=t=>t!==null;function YP(t,{repeat:e,repeatType:n="loop"},i){const a=t.filter($P),l=e&&n!=="loop"&&e%2===1?0:a.length-1;return a[l]}function _v(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}function QP({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:a,repeat:l,repeatType:c,repeatDelay:h,from:p,elapsed:g,...v}){return!!Object.keys(v).length}const wv=(t,e,n,i={},a,l)=>c=>{const h=_v(i,t)||{},p=h.delay||i.delay||0;let{elapsed:g=0}=i;g=g-Ri(p);const v={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-g,onUpdate:w=>{e.set(w),h.onUpdate&&h.onUpdate(w)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:t,motionValue:e,element:l?void 0:a};QP(h)||Object.assign(v,KP(t,v)),v.duration&&(v.duration=Ri(v.duration)),v.repeatDelay&&(v.repeatDelay=Ri(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let x=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(P0(v),v.delay===0&&(x=!0)),(lr.instantAnimations||lr.skipAnimations)&&(x=!0,P0(v),v.delay=0),v.allowFlatten=!h.type&&!h.ease,x&&!l&&e.get()!==void 0){const w=YP(v.keyframes,h);if(w!==void 0){wt.update(()=>{v.onUpdate(w),v.onComplete()});return}}return h.isSync?new vv(v):new PP(v)};function y2(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function Tv(t,e,n,i){if(typeof e=="function"){const[a,l]=y2(i);e=e(n!==void 0?n:t.custom,a,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,l]=y2(i);e=e(n!==void 0?n:t.custom,a,l)}return e}function Cl(t,e,n){const i=t.getProps();return Tv(i,e,n!==void 0?n:i.custom,t)}const HN=new Set(["width","height","top","left","right","bottom",...Ql]),v2=30,WP=t=>!isNaN(parseFloat(t));class XP{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var l;const a=kn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=kn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=WP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new lv);const i=this.events[e].add(n);return e==="change"?()=>{i(),wt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=kn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>v2)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,v2);return lN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ll(t,e){return new XP(t,e)}const L0=t=>Array.isArray(t);function JP(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ll(n))}function ZP(t){return L0(t)?t[t.length-1]||0:t}function eL(t,e){const n=Cl(t,e);let{transitionEnd:i={},transition:a={},...l}=n||{};l={...l,...i};for(const c in l){const h=ZP(l[c]);JP(t,c,h)}}const mn=t=>!!(t&&t.getVelocity);function tL(t){return!!(mn(t)&&t.add)}function U0(t,e){const n=t.getValue("willChange");if(tL(n))return n.add(e);if(!n&&lr.WillChange){const i=new lr.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function Ev(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const nL="framerAppearId",GN="data-"+Ev(nL);function KN(t){return t.props[GN]}function sL({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function Sv(t,e,{delay:n=0,transitionOverride:i,type:a}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:c,...h}=e;i&&(l=i);const p=[],g=a&&t.animationState&&t.animationState.getState()[a];for(const v in h){const x=t.getValue(v,t.latestValues[v]??null),w=h[v];if(w===void 0||g&&sL(g,v))continue;const E={delay:n,..._v(l||{},v)},j=x.get();if(j!==void 0&&!x.isAnimating&&!Array.isArray(w)&&w===j&&!E.velocity)continue;let M=!1;if(window.MotionHandoffAnimation){const q=KN(t);if(q){const B=window.MotionHandoffAnimation(q,v,wt);B!==null&&(E.startTime=B,M=!0)}}U0(t,v),x.start(wv(v,x,w,t.shouldReduceMotion&&HN.has(v)?{type:!1}:E,t,M));const V=x.animation;V&&p.push(V)}return c&&Promise.all(p).then(()=>{wt.update(()=>{c&&eL(t,c)})}),p}function z0(t,e,n={}){var p;const i=Cl(t,e,n.type==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const l=i?()=>Promise.all(Sv(t,i,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(g=0)=>{const{delayChildren:v=0,staggerChildren:x,staggerDirection:w}=a;return iL(t,e,g,v,x,w,n)}:()=>Promise.resolve(),{when:h}=a;if(h){const[g,v]=h==="beforeChildren"?[l,c]:[c,l];return g().then(()=>v())}else return Promise.all([l(),c(n.delay)])}function iL(t,e,n=0,i=0,a=0,l=1,c){const h=[];for(const p of t.variantChildren)p.notify("AnimationStart",e),h.push(z0(p,e,{...c,delay:n+(typeof i=="function"?0:i)+FN(t.variantChildren,p,i,a,l)}).then(()=>p.notify("AnimationComplete",e)));return Promise.all(h)}function rL(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const a=e.map(l=>z0(t,l,n));i=Promise.all(a)}else if(typeof e=="string")i=z0(t,e,n);else{const a=typeof e=="function"?Cl(t,e,n.custom):e;i=Promise.all(Sv(t,a,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const aL={test:t=>t==="auto",parse:t=>t},$N=t=>e=>e.test(t),YN=[Yl,Ee,ji,$r,MO,VO,aL],x2=t=>YN.find($N(t));function oL(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||oN(t):!0}const lL=new Set(["brightness","contrast","saturate","opacity"]);function cL(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(hv)||[];if(!i)return t;const a=n.replace(i,"");let l=lL.has(e)?1:0;return i!==n&&(l*=100),e+"("+l+a+")"}const uL=/\b([a-z-]*)\(.*?\)/gu,B0={...ga,getAnimatableNone:t=>{const e=t.match(uL);return e?e.map(cL).join(" "):t}},b2={...Yl,transform:Math.round},dL={rotate:$r,rotateX:$r,rotateY:$r,rotateZ:$r,scale:zh,scaleX:zh,scaleY:zh,scaleZ:zh,skew:$r,skewX:$r,skewY:$r,distance:Ee,translateX:Ee,translateY:Ee,translateZ:Ee,x:Ee,y:Ee,z:Ee,perspective:Ee,transformPerspective:Ee,opacity:ku,originX:r2,originY:r2,originZ:Ee},Av={borderWidth:Ee,borderTopWidth:Ee,borderRightWidth:Ee,borderBottomWidth:Ee,borderLeftWidth:Ee,borderRadius:Ee,radius:Ee,borderTopLeftRadius:Ee,borderTopRightRadius:Ee,borderBottomRightRadius:Ee,borderBottomLeftRadius:Ee,width:Ee,maxWidth:Ee,height:Ee,maxHeight:Ee,top:Ee,right:Ee,bottom:Ee,left:Ee,inset:Ee,insetBlock:Ee,insetBlockStart:Ee,insetBlockEnd:Ee,insetInline:Ee,insetInlineStart:Ee,insetInlineEnd:Ee,padding:Ee,paddingTop:Ee,paddingRight:Ee,paddingBottom:Ee,paddingLeft:Ee,paddingBlock:Ee,paddingBlockStart:Ee,paddingBlockEnd:Ee,paddingInline:Ee,paddingInlineStart:Ee,paddingInlineEnd:Ee,margin:Ee,marginTop:Ee,marginRight:Ee,marginBottom:Ee,marginLeft:Ee,marginBlock:Ee,marginBlockStart:Ee,marginBlockEnd:Ee,marginInline:Ee,marginInlineStart:Ee,marginInlineEnd:Ee,backgroundPositionX:Ee,backgroundPositionY:Ee,...dL,zIndex:b2,fillOpacity:ku,strokeOpacity:ku,numOctaves:b2},hL={...Av,color:tn,backgroundColor:tn,outlineColor:tn,fill:tn,stroke:tn,borderColor:tn,borderTopColor:tn,borderRightColor:tn,borderBottomColor:tn,borderLeftColor:tn,filter:B0,WebkitFilter:B0},QN=t=>hL[t];function WN(t,e){let n=QN(t);return n!==B0&&(n=ga),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const fL=new Set(["auto","none","0"]);function mL(t,e,n){let i=0,a;for(;i<t.length&&!a;){const l=t[i];typeof l=="string"&&!fL.has(l)&&Ou(l).values.length&&(a=t[i]),i++}if(a&&n)for(const l of e)t[l]=WN(n,a)}class pL extends xv{constructor(e,n,i,a,l){super(e,n,i,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let v=0;v<e.length;v++){let x=e[v];if(typeof x=="string"&&(x=x.trim(),dv(x))){const w=qN(x,n.current);w!==void 0&&(e[v]=w),v===e.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!HN.has(i)||e.length!==2)return;const[a,l]=e,c=x2(a),h=x2(l),p=i2(a),g=i2(l);if(p!==g&&na[i]){this.needsMeasurement=!0;return}if(c!==h)if(f2(c)&&f2(h))for(let v=0;v<e.length;v++){const x=e[v];typeof x=="string"&&(e[v]=parseFloat(x))}else na[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let a=0;a<e.length;a++)(e[a]===null||oL(e[a]))&&i.push(a);i.length&&mL(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=na[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&e.getValue(i,a).jump(a,!1)}measureEndState(){var h;const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const a=e.getValue(n);a&&a.jump(this.measuredOrigin,!1);const l=i.length-1,c=i[l];i[l]=na[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([p,g])=>{e.getValue(p).set(g)}),this.resolveNoneKeyframes()}}function XN(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const a=(n==null?void 0:n[t])??i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const JN=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function ZN(t){return aN(t)&&"offsetHeight"in t}const{schedule:Nv}=_N(queueMicrotask,!1),Hs={x:!1,y:!1};function eC(){return Hs.x||Hs.y}function gL(t){return t==="x"||t==="y"?Hs[t]?null:(Hs[t]=!0,()=>{Hs[t]=!1}):Hs.x||Hs.y?null:(Hs.x=Hs.y=!0,()=>{Hs.x=Hs.y=!1})}function tC(t,e){const n=XN(t),i=new AbortController,a={passive:!0,...e,signal:i.signal};return[n,a,()=>i.abort()]}function _2(t){return!(t.pointerType==="touch"||eC())}function yL(t,e,n={}){const[i,a,l]=tC(t,n),c=h=>{if(!_2(h))return;const{target:p}=h,g=e(p,h);if(typeof g!="function"||!p)return;const v=x=>{_2(x)&&(g(x),p.removeEventListener("pointerleave",v))};p.addEventListener("pointerleave",v,a)};return i.forEach(h=>{h.addEventListener("pointerenter",c,a)}),l}const nC=(t,e)=>e?t===e?!0:nC(t,e.parentElement):!1,Cv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,vL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function sC(t){return vL.has(t.tagName)||t.isContentEditable===!0}const nf=new WeakSet;function w2(t){return e=>{e.key==="Enter"&&t(e)}}function Ug(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const xL=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=w2(()=>{if(nf.has(n))return;Ug(n,"down");const a=w2(()=>{Ug(n,"up")}),l=()=>Ug(n,"cancel");n.addEventListener("keyup",a,e),n.addEventListener("blur",l,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function T2(t){return Cv(t)&&!eC()}function bL(t,e,n={}){const[i,a,l]=tC(t,n),c=h=>{const p=h.currentTarget;if(!T2(h))return;nf.add(p);const g=e(p,h),v=(E,j)=>{window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",w),nf.has(p)&&nf.delete(p),T2(E)&&typeof g=="function"&&g(E,{success:j})},x=E=>{v(E,p===window||p===document||n.useGlobalTarget||nC(p,E.target))},w=E=>{v(E,!1)};window.addEventListener("pointerup",x,a),window.addEventListener("pointercancel",w,a)};return i.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",c,a),ZN(h)&&(h.addEventListener("focus",g=>xL(g,a)),!sC(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),l}function Rv(t){return aN(t)&&"ownerSVGElement"in t}function iC(t){return Rv(t)&&t.tagName==="svg"}const _L=[...YN,tn,ga],wL=t=>_L.find($N(t)),E2=()=>({translate:0,scale:1,origin:0,originPoint:0}),vl=()=>({x:E2(),y:E2()}),S2=()=>({min:0,max:0}),en=()=>({x:S2(),y:S2()}),F0={current:null},rC={current:!1},TL=typeof window<"u";function EL(){if(rC.current=!0,!!TL)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>F0.current=t.matches;t.addEventListener("change",e),e()}else F0.current=!1}const Lu=new WeakMap;function hm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Uu(t){return typeof t=="string"||Array.isArray(t)}const jv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Iv=["initial",...jv];function fm(t){return hm(t.animate)||Iv.some(e=>Uu(t[e]))}function aC(t){return!!(fm(t)||t.variants)}function SL(t,e,n){for(const i in e){const a=e[i],l=n[i];if(mn(a))t.addValue(i,a);else if(mn(l))t.addValue(i,Ll(a,{owner:t}));else if(l!==a)if(t.hasValue(i)){const c=t.getValue(i);c.liveStyle===!0?c.jump(a):c.hasAnimated||c.set(a)}else{const c=t.getStaticValue(i);t.addValue(i,Ll(c!==void 0?c:a,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const A2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let jf={};function oC(t){jf=t}function AL(){return jf}class lC{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:a,blockInitialAnimation:l,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=kn.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,wt.render(this.render,!1,!0))};const{latestValues:p,renderState:g}=c;this.latestValues=p,this.baseTarget={...p},this.initialValues=n.initial?{...p}:{},this.renderState=g,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=fm(n),this.isVariantNode=aC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...x}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in x){const E=x[w];p[w]!==void 0&&mn(E)&&E.set(p[w])}}mount(e){var n;this.current=e,Lu.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,a)=>this.bindToMotionValue(a,i)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(rC.current||EL(),this.shouldReduceMotion=F0.current),(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),pa(this.notifyUpdate),pa(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const i=this.features[n];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Wl.has(e);i&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&wt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;typeof window<"u"&&window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{a(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in jf){const n=jf[e];if(!n)continue;const{isEnabled:i,Feature:a}=n;if(!this.features[e]&&a&&i(this.props)&&(this.features[e]=new a(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):en()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<A2.length;i++){const a=A2[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,c=e[l];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=SL(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Ll(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(rN(i)||oN(i))?i=parseFloat(i):!wL(i)&&ga.test(n)&&(i=WN(e,n)),this.setBaseTarget(e,mn(i)?i.get():i)),mn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var l;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const c=Tv(this.props,n,(l=this.presenceContext)==null?void 0:l.custom);c&&(i=c[e])}if(n&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!mn(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new lv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Nv.render(this.render)}}class cC extends lC{constructor(){super(...arguments),this.KeyframeResolver=pL}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const i=e.style;return i?i[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class ba{constructor(e){this.isMounted=!1,this.node=e}update(){}}function uC({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function NL({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function CL(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function zg(t){return t===void 0||t===1}function q0({scale:t,scaleX:e,scaleY:n}){return!zg(t)||!zg(e)||!zg(n)}function to(t){return q0(t)||dC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function dC(t){return N2(t.x)||N2(t.y)}function N2(t){return t&&t!=="0%"}function If(t,e,n){const i=t-n,a=e*i;return n+a}function C2(t,e,n,i,a){return a!==void 0&&(t=If(t,a,i)),If(t,n,i)+e}function H0(t,e=0,n=1,i,a){t.min=C2(t.min,e,n,i,a),t.max=C2(t.max,e,n,i,a)}function hC(t,{x:e,y:n}){H0(t.x,e.translate,e.scale,e.originPoint),H0(t.y,n.translate,n.scale,n.originPoint)}const R2=.999999999999,j2=1.0000000000001;function RL(t,e,n,i=!1){const a=n.length;if(!a)return;e.x=e.y=1;let l,c;for(let h=0;h<a;h++){l=n[h],c=l.projectionDelta;const{visualElement:p}=l.options;p&&p.props.style&&p.props.style.display==="contents"||(i&&l.options.layoutScroll&&l.scroll&&l!==l.root&&bl(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,hC(t,c)),i&&to(l.latestValues)&&bl(t,l.latestValues))}e.x<j2&&e.x>R2&&(e.x=1),e.y<j2&&e.y>R2&&(e.y=1)}function xl(t,e){t.min=t.min+e,t.max=t.max+e}function I2(t,e,n,i,a=.5){const l=Nt(t.min,t.max,a);H0(t,e,n,l,i)}function bl(t,e){I2(t.x,e.x,e.scaleX,e.scale,e.originX),I2(t.y,e.y,e.scaleY,e.scale,e.originY)}function fC(t,e){return uC(CL(t.getBoundingClientRect(),e))}function jL(t,e,n){const i=fC(t,n),{scroll:a}=e;return a&&(xl(i.x,a.offset.x),xl(i.y,a.offset.y)),i}const IL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},DL=Ql.length;function VL(t,e,n){let i="",a=!0;for(let l=0;l<DL;l++){const c=Ql[l],h=t[c];if(h===void 0)continue;let p=!0;if(typeof h=="number"?p=h===(c.startsWith("scale")?1:0):p=parseFloat(h)===0,!p||n){const g=JN(h,Av[c]);if(!p){a=!1;const v=IL[c]||c;i+=`${v}(${g}) `}n&&(e[c]=g)}}return i=i.trim(),n?i=n(e,a?"":i):a&&(i="none"),i}function Dv(t,e,n){const{style:i,vars:a,transformOrigin:l}=t;let c=!1,h=!1;for(const p in e){const g=e[p];if(Wl.has(p)){c=!0;continue}else if(TN(p)){a[p]=g;continue}else{const v=JN(g,Av[p]);p.startsWith("origin")?(h=!0,l[p]=v):i[p]=v}}if(e.transform||(c||n?i.transform=VL(e,t.transform,n):i.transform&&(i.transform="none")),h){const{originX:p="50%",originY:g="50%",originZ:v=0}=l;i.transformOrigin=`${p} ${g} ${v}`}}function mC(t,{style:e,vars:n},i,a){const l=t.style;let c;for(c in e)l[c]=e[c];a==null||a.applyProjectionStyles(l,i);for(c in n)l.setProperty(c,n[c])}function D2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Zc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ee.test(t))t=parseFloat(t);else return t;const n=D2(t,e.target.x),i=D2(t,e.target.y);return`${n}% ${i}%`}},ML={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,a=ga.parse(t);if(a.length>5)return i;const l=ga.createTransformer(t),c=typeof a[0]!="number"?1:0,h=n.x.scale*e.x,p=n.y.scale*e.y;a[0+c]/=h,a[1+c]/=p;const g=Nt(h,p,.5);return typeof a[2+c]=="number"&&(a[2+c]/=g),typeof a[3+c]=="number"&&(a[3+c]/=g),l(a)}},G0={borderRadius:{...Zc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zc,borderTopRightRadius:Zc,borderBottomLeftRadius:Zc,borderBottomRightRadius:Zc,boxShadow:ML};function pC(t,{layout:e,layoutId:n}){return Wl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!G0[t]||t==="opacity")}function Vv(t,e,n){var c;const i=t.style,a=e==null?void 0:e.style,l={};if(!i)return l;for(const h in i)(mn(i[h])||a&&mn(a[h])||pC(h,t)||((c=n==null?void 0:n.getValue(h))==null?void 0:c.liveStyle)!==void 0)&&(l[h]=i[h]);return l}function kL(t){return window.getComputedStyle(t)}class gC extends cC{constructor(){super(...arguments),this.type="html",this.renderInstance=mC}readValueFromInstance(e,n){var i;if(Wl.has(n))return(i=this.projection)!=null&&i.isProjecting?D0(n):mP(e,n);{const a=kL(e),l=(TN(n)?a.getPropertyValue(n):a[n])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(e,{transformPagePoint:n}){return fC(e,n)}build(e,n,i){Dv(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return Vv(e,n,i)}}function OL(t,e){return t in e}class PL extends lC{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,n){if(OL(n,e)){const i=e[n];if(typeof i=="string"||typeof i=="number")return i}}getBaseTargetFromProps(){}removeValueFromRenderState(e,n){delete n.output[e]}measureInstanceViewportBox(){return en()}build(e,n){Object.assign(e.output,n)}renderInstance(e,{output:n}){Object.assign(e,n)}sortInstanceNodePosition(){return 0}}const LL={offset:"stroke-dashoffset",array:"stroke-dasharray"},UL={offset:"strokeDashoffset",array:"strokeDasharray"};function zL(t,e,n=1,i=0,a=!0){t.pathLength=1;const l=a?LL:UL;t[l.offset]=Ee.transform(-i);const c=Ee.transform(e),h=Ee.transform(n);t[l.array]=`${c} ${h}`}const BL=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function yC(t,{attrX:e,attrY:n,attrScale:i,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...h},p,g,v){if(Dv(t,h,g),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:w}=t;x.transform&&(w.transform=x.transform,delete x.transform),(w.transform||x.transformOrigin)&&(w.transformOrigin=x.transformOrigin??"50% 50%",delete x.transformOrigin),w.transform&&(w.transformBox=(v==null?void 0:v.transformBox)??"fill-box",delete x.transformBox);for(const E of BL)x[E]!==void 0&&(w[E]=x[E],delete x[E]);e!==void 0&&(x.x=e),n!==void 0&&(x.y=n),i!==void 0&&(x.scale=i),a!==void 0&&zL(x,a,l,c,!1)}const vC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),xC=t=>typeof t=="string"&&t.toLowerCase()==="svg";function FL(t,e,n,i){mC(t,e,void 0,i);for(const a in e.attrs)t.setAttribute(vC.has(a)?a:Ev(a),e.attrs[a])}function bC(t,e,n){const i=Vv(t,e,n);for(const a in t)if(mn(t[a])||mn(e[a])){const l=Ql.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;i[l]=t[a]}return i}class _C extends cC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=en}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Wl.has(n)){const i=QN(n);return i&&i.default||0}return n=vC.has(n)?n:Ev(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return bC(e,n,i)}build(e,n,i){yC(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,a){FL(e,n,i,a)}mount(e){this.isSVGTag=xC(e.tagName),super.mount(e)}}const qL=Iv.length;function wC(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?wC(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<qL;n++){const i=Iv[n],a=t.props[i];(Uu(a)||a===!1)&&(e[i]=a)}return e}function TC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const HL=[...jv].reverse(),GL=jv.length;function KL(t){return e=>Promise.all(e.map(({animation:n,options:i})=>rL(t,n,i)))}function $L(t){let e=KL(t),n=V2(),i=!0;const a=p=>(g,v)=>{var w;const x=Cl(t,v,p==="exit"?(w=t.presenceContext)==null?void 0:w.custom:void 0);if(x){const{transition:E,transitionEnd:j,...M}=x;g={...g,...M,...j}}return g};function l(p){e=p(t)}function c(p){const{props:g}=t,v=wC(t.parent)||{},x=[],w=new Set;let E={},j=1/0;for(let V=0;V<GL;V++){const q=HL[V],B=n[q],K=g[q]!==void 0?g[q]:v[q],oe=Uu(K),H=q===p?B.isActive:null;H===!1&&(j=V);let Z=K===v[q]&&K!==g[q]&&oe;if(Z&&i&&t.manuallyAnimateOnMount&&(Z=!1),B.protectedKeys={...E},!B.isActive&&H===null||!K&&!B.prevProp||hm(K)||typeof K=="boolean")continue;const R=YL(B.prevProp,K);let S=R||q===p&&B.isActive&&!Z&&oe||V>j&&oe,N=!1;const k=Array.isArray(K)?K:[K];let D=k.reduce(a(q),{});H===!1&&(D={});const{prevResolvedValues:O={}}=B,I={...O,...D},te=X=>{S=!0,w.has(X)&&(N=!0,w.delete(X)),B.needsAnimating[X]=!0;const ue=t.getValue(X);ue&&(ue.liveStyle=!1)};for(const X in I){const ue=D[X],be=O[X];if(E.hasOwnProperty(X))continue;let we=!1;L0(ue)&&L0(be)?we=!TC(ue,be):we=ue!==be,we?ue!=null?te(X):w.add(X):ue!==void 0&&w.has(X)?te(X):B.protectedKeys[X]=!0}B.prevProp=K,B.prevResolvedValues=D,B.isActive&&(E={...E,...D}),i&&t.blockInitialAnimation&&(S=!1);const Re=Z&&R;S&&(!Re||N)&&x.push(...k.map(X=>{const ue={type:q};if(typeof X=="string"&&i&&!Re&&t.manuallyAnimateOnMount&&t.parent){const{parent:be}=t,we=Cl(be,X);if(be.enteringChildren&&we){const{delayChildren:L}=we.transition||{};ue.delay=FN(be.enteringChildren,t,L)}}return{animation:X,options:ue}}))}if(w.size){const V={};if(typeof g.initial!="boolean"){const q=Cl(t,Array.isArray(g.initial)?g.initial[0]:g.initial);q&&q.transition&&(V.transition=q.transition)}w.forEach(q=>{const B=t.getBaseTarget(q),K=t.getValue(q);K&&(K.liveStyle=!0),V[q]=B??null}),x.push({animation:V})}let M=!!x.length;return i&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(M=!1),i=!1,M?e(x):Promise.resolve()}function h(p,g){var x;if(n[p].isActive===g)return Promise.resolve();(x=t.variantChildren)==null||x.forEach(w=>{var E;return(E=w.animationState)==null?void 0:E.setActive(p,g)}),n[p].isActive=g;const v=c(p);for(const w in n)n[w].protectedKeys={};return v}return{animateChanges:c,setActive:h,setAnimateFunction:l,getState:()=>n,reset:()=>{n=V2()}}}function YL(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!TC(e,t):!1}function Za(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function V2(){return{animate:Za(!0),whileInView:Za(),whileHover:Za(),whileTap:Za(),whileDrag:Za(),whileFocus:Za(),exit:Za()}}function M2(t,e){t.min=e.min,t.max=e.max}function qs(t,e){M2(t.x,e.x),M2(t.y,e.y)}function k2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const EC=1e-4,QL=1-EC,WL=1+EC,SC=.01,XL=0-SC,JL=0+SC;function On(t){return t.max-t.min}function ZL(t,e,n){return Math.abs(t-e)<=n}function O2(t,e,n,i=.5){t.origin=i,t.originPoint=Nt(e.min,e.max,t.origin),t.scale=On(n)/On(e),t.translate=Nt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=QL&&t.scale<=WL||isNaN(t.scale))&&(t.scale=1),(t.translate>=XL&&t.translate<=JL||isNaN(t.translate))&&(t.translate=0)}function xu(t,e,n,i){O2(t.x,e.x,n.x,i?i.originX:void 0),O2(t.y,e.y,n.y,i?i.originY:void 0)}function P2(t,e,n){t.min=n.min+e.min,t.max=t.min+On(e)}function e9(t,e,n){P2(t.x,e.x,n.x),P2(t.y,e.y,n.y)}function L2(t,e,n){t.min=e.min-n.min,t.max=t.min+On(e)}function Df(t,e,n){L2(t.x,e.x,n.x),L2(t.y,e.y,n.y)}function U2(t,e,n,i,a){return t-=e,t=If(t,1/n,i),a!==void 0&&(t=If(t,1/a,i)),t}function t9(t,e=0,n=1,i=.5,a,l=t,c=t){if(ji.test(e)&&(e=parseFloat(e),e=Nt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=Nt(l.min,l.max,i);t===l&&(h-=e),t.min=U2(t.min,e,n,h,a),t.max=U2(t.max,e,n,h,a)}function z2(t,e,[n,i,a],l,c){t9(t,e[n],e[i],e[a],e.scale,l,c)}const n9=["x","scaleX","originX"],s9=["y","scaleY","originY"];function B2(t,e,n,i){z2(t.x,e,n9,n?n.x:void 0,i?i.x:void 0),z2(t.y,e,s9,n?n.y:void 0,i?i.y:void 0)}function F2(t){return t.translate===0&&t.scale===1}function AC(t){return F2(t.x)&&F2(t.y)}function q2(t,e){return t.min===e.min&&t.max===e.max}function i9(t,e){return q2(t.x,e.x)&&q2(t.y,e.y)}function H2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function NC(t,e){return H2(t.x,e.x)&&H2(t.y,e.y)}function G2(t){return On(t.x)/On(t.y)}function K2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function Ss(t){return[t("x"),t("y")]}function r9(t,e,n){let i="";const a=t.x.translate/e.x,l=t.y.translate/e.y,c=(n==null?void 0:n.z)||0;if((a||l||c)&&(i=`translate3d(${a}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:g,rotate:v,rotateX:x,rotateY:w,skewX:E,skewY:j}=n;g&&(i=`perspective(${g}px) ${i}`),v&&(i+=`rotate(${v}deg) `),x&&(i+=`rotateX(${x}deg) `),w&&(i+=`rotateY(${w}deg) `),E&&(i+=`skewX(${E}deg) `),j&&(i+=`skewY(${j}deg) `)}const h=t.x.scale*e.x,p=t.y.scale*e.y;return(h!==1||p!==1)&&(i+=`scale(${h}, ${p})`),i||"none"}const CC=["TopLeft","TopRight","BottomLeft","BottomRight"],a9=CC.length,$2=t=>typeof t=="string"?parseFloat(t):t,Y2=t=>typeof t=="number"||Ee.test(t);function o9(t,e,n,i,a,l){a?(t.opacity=Nt(0,n.opacity??1,l9(i)),t.opacityExit=Nt(e.opacity??1,0,c9(i))):l&&(t.opacity=Nt(e.opacity??1,n.opacity??1,i));for(let c=0;c<a9;c++){const h=`border${CC[c]}Radius`;let p=Q2(e,h),g=Q2(n,h);if(p===void 0&&g===void 0)continue;p||(p=0),g||(g=0),p===0||g===0||Y2(p)===Y2(g)?(t[h]=Math.max(Nt($2(p),$2(g),i),0),(ji.test(g)||ji.test(p))&&(t[h]+="%")):t[h]=g}(e.rotate||n.rotate)&&(t.rotate=Nt(e.rotate||0,n.rotate||0,i))}function Q2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const l9=RC(0,.5,pN),c9=RC(.5,.95,js);function RC(t,e,n){return i=>i<t?0:i>e?1:n(Pl(t,e,i))}function jC(t,e,n){const i=mn(t)?t:Ll(t);return i.start(wv("",i,e,n)),i.animation}function zu(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const u9=(t,e)=>t.depth-e.depth;class d9{constructor(){this.children=[],this.isDirty=!1}add(e){rv(this.children,e),this.isDirty=!0}remove(e){dm(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(u9),this.isDirty=!1,this.children.forEach(e)}}function h9(t,e){const n=kn.now(),i=({timestamp:a})=>{const l=a-n;l>=e&&(pa(i),t(l-e))};return wt.setup(i,!0),()=>pa(i)}function sf(t){return mn(t)?t.get():t}class f9{constructor(){this.members=[]}add(e){rv(this.members,e),e.scheduleRender()}remove(e){if(dm(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(a=>e===a);if(n===0)return!1;let i;for(let a=n;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){i=l;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const rf={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Bg=["","X","Y","Z"],m9=1e3;let p9=0;function Fg(t,e,n,i){const{latestValues:a}=e;a[t]&&(n[t]=a[t],e.setStaticValue(t,0),i&&(i[t]=0))}function IC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=KN(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",wt,!(a||l))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&IC(i)}function DC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(c={},h=e==null?void 0:e()){this.id=p9++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(v9),this.nodes.forEach(w9),this.nodes.forEach(T9),this.nodes.forEach(x9)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new d9)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new lv),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const p=this.eventHandlers.get(c);p&&p.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=Rv(c)&&!iC(c),this.instance=c;const{layoutId:h,layout:p,visualElement:g}=this.options;if(g&&!g.current&&g.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(p||h)&&(this.isLayoutDirty=!0),t){let v,x=0;const w=()=>this.root.updateBlockedByResize=!1;wt.read(()=>{x=window.innerWidth}),t(c,()=>{const E=window.innerWidth;E!==x&&(x=E,this.root.updateBlockedByResize=!0,v&&v(),v=h9(w,250),rf.hasAnimatedSinceResize&&(rf.hasAnimatedSinceResize=!1,this.nodes.forEach(J2)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||p)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:x,hasRelativeLayoutChanged:w,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||g.getDefaultTransition()||C9,{onLayoutAnimationStart:M,onLayoutAnimationComplete:V}=g.getProps(),q=!this.targetLayout||!NC(this.targetLayout,E),B=!x&&w;if(this.options.layoutRoot||this.resumeFrom||B||x&&(q||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const K={..._v(j,"layout"),onPlay:M,onComplete:V};(g.shouldReduceMotion||this.options.layoutRoot)&&(K.delay=0,K.type=!1),this.startAnimation(K),this.setAnimationOrigin(v,B)}else x||J2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),pa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(E9),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&IC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const x=this.path[v];x.shouldResetTransform=!0,x.updateScroll("snapshot"),x.options.layoutRoot&&x.willUpdate(!1)}const{layoutId:h,layout:p}=this.options;if(h===void 0&&!p)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(W2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(X2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(_9),this.nodes.forEach(g9),this.nodes.forEach(y9)):this.nodes.forEach(X2),this.clearAllSnapshots();const h=kn.now();_n.delta=Vi(0,1e3/60,h-_n.timestamp),_n.timestamp=h,_n.isProcessing=!0,Vg.update.process(_n),Vg.preRender.process(_n),Vg.render.process(_n),_n.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Nv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(b9),this.sharedNodes.forEach(S9)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!On(this.snapshot.measuredBox.x)&&!On(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=en(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const p=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:p,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!AC(this.projectionDelta),p=this.getTransformTemplate(),g=p?p(this.latestValues,""):void 0,v=g!==this.prevTransformTemplateValue;c&&this.instance&&(h||to(this.latestValues)||v)&&(a(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let p=this.removeElementScroll(h);return c&&(p=this.removeTransform(p)),R9(p),{animationId:this.root.animationId,measuredBox:h,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){var g;const{visualElement:c}=this.options;if(!c)return en();const h=c.measureViewportBox();if(!(((g=this.scroll)==null?void 0:g.wasRoot)||this.path.some(j9))){const{scroll:v}=this.root;v&&(xl(h.x,v.offset.x),xl(h.y,v.offset.y))}return h}removeElementScroll(c){var p;const h=en();if(qs(h,c),(p=this.scroll)!=null&&p.wasRoot)return h;for(let g=0;g<this.path.length;g++){const v=this.path[g],{scroll:x,options:w}=v;v!==this.root&&x&&w.layoutScroll&&(x.wasRoot&&qs(h,c),xl(h.x,x.offset.x),xl(h.y,x.offset.y))}return h}applyTransform(c,h=!1){const p=en();qs(p,c);for(let g=0;g<this.path.length;g++){const v=this.path[g];!h&&v.options.layoutScroll&&v.scroll&&v!==v.root&&bl(p,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),to(v.latestValues)&&bl(p,v.latestValues)}return to(this.latestValues)&&bl(p,this.latestValues),p}removeTransform(c){const h=en();qs(h,c);for(let p=0;p<this.path.length;p++){const g=this.path[p];if(!g.instance||!to(g.latestValues))continue;q0(g.latestValues)&&g.updateSnapshot();const v=en(),x=g.measurePageBox();qs(v,x),B2(h,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,v)}return to(this.latestValues)&&B2(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_n.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var E;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==h;if(!(c||p&&this.isSharedProjectionDirty||this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:x}=this.options;if(!this.layout||!(v||x))return;this.resolvedRelativeTargetAt=_n.timestamp;const w=this.getClosestProjectingParent();w&&this.linkedParentVersion!==w.layoutVersion&&!w.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(w&&w.layout?this.createRelativeTarget(w,this.layout.layoutBox,w.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=en(),this.targetWithTransforms=en()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),e9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qs(this.target,this.layout.layoutBox),hC(this.target,this.targetDelta)):qs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?this.createRelativeTarget(w,this.target,w.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||q0(this.parent.latestValues)||dC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,h,p){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=en(),this.relativeTargetOrigin=en(),Df(this.relativeTargetOrigin,h,p),qs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var j;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let p=!0;if((this.isProjectionDirty||(j=this.parent)!=null&&j.isProjectionDirty)&&(p=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===_n.timestamp&&(p=!1),p)return;const{layout:g,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||v))return;qs(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,w=this.treeScale.y;RL(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=en());const{target:E}=c;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(k2(this.prevProjectionDelta.x,this.projectionDelta.x),k2(this.prevProjectionDelta.y,this.projectionDelta.y)),xu(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==w||!K2(this.projectionDelta.x,this.prevProjectionDelta.x)||!K2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),c){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vl(),this.projectionDelta=vl(),this.projectionDeltaWithTransform=vl()}setAnimationOrigin(c,h=!1){const p=this.snapshot,g=p?p.latestValues:{},v={...this.latestValues},x=vl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const w=en(),E=p?p.source:void 0,j=this.layout?this.layout.source:void 0,M=E!==j,V=this.getStack(),q=!V||V.members.length<=1,B=!!(M&&!q&&this.options.crossfade===!0&&!this.path.some(N9));this.animationProgress=0;let K;this.mixTargetDelta=oe=>{const H=oe/1e3;Z2(x.x,c.x,H),Z2(x.y,c.y,H),this.setTargetDelta(x),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Df(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),A9(this.relativeTarget,this.relativeTargetOrigin,w,H),K&&i9(this.relativeTarget,K)&&(this.isProjectionDirty=!1),K||(K=en()),qs(K,this.relativeTarget)),M&&(this.animationValues=v,o9(v,g,this.latestValues,H,B,q)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var h,p,g;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(g=(p=this.resumingFrom)==null?void 0:p.currentAnimation)==null||g.stop(),this.pendingAnimation&&(pa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wt.update(()=>{rf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ll(0)),this.currentAnimation=jC(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:v=>{this.mixTargetDelta(v),c.onUpdate&&c.onUpdate(v)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(m9),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:p,layout:g,latestValues:v}=c;if(!(!h||!p||!g)){if(this!==c&&this.layout&&g&&VC(this.options.animationType,this.layout.layoutBox,g.layoutBox)){p=this.target||en();const x=On(this.layout.layoutBox.x);p.x.min=c.target.x.min,p.x.max=p.x.min+x;const w=On(this.layout.layoutBox.y);p.y.min=c.target.y.min,p.y.max=p.y.min+w}qs(h,p),bl(h,v),xu(this.projectionDeltaWithTransform,this.layoutCorrected,h,v)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new f9),this.sharedNodes.get(c).add(h);const g=h.options.initialPromotionConfig;h.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var h;const{layoutId:c}=this.options;return c?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:c}=this.options;return c?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:p}={}){const g=this.getStack();g&&g.promote(this,p),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:p}=c;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(h=!0),!h)return;const g={};p.z&&Fg("z",c,g,this.animationValues);for(let v=0;v<Bg.length;v++)Fg(`rotate${Bg[v]}`,c,g,this.animationValues),Fg(`skew${Bg[v]}`,c,g,this.animationValues);c.render();for(const v in g)c.setStaticValue(v,g[v]),this.animationValues&&(this.animationValues[v]=g[v]);c.scheduleRender()}applyProjectionStyles(c,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const p=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=sf(h==null?void 0:h.pointerEvents)||"",c.transform=p?p(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=sf(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!to(this.latestValues)&&(c.transform=p?p({},""):"none",this.hasProjected=!1);return}c.visibility="";const v=g.animationValues||g.latestValues;this.applyTransformsToTarget();let x=r9(this.projectionDeltaWithTransform,this.treeScale,v);p&&(x=p(v,x)),c.transform=x;const{x:w,y:E}=this.projectionDelta;c.transformOrigin=`${w.origin*100}% ${E.origin*100}% 0`,g.animationValues?c.opacity=g===this?v.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:c.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const j in G0){if(v[j]===void 0)continue;const{correct:M,applyTo:V,isCSSVariable:q}=G0[j],B=x==="none"?v[j]:M(v[j],g);if(V){const K=V.length;for(let oe=0;oe<K;oe++)c[V[oe]]=B}else q?this.options.visualElement.renderState.vars[j]=B:c[j]=B}this.options.layoutId&&(c.pointerEvents=g===this?sf(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(W2),this.root.sharedNodes.clear()}}}function g9(t){t.updateLayout()}function y9(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:a}=t.layout,{animationType:l}=t.options,c=e.source!==t.layout.source;l==="size"?Ss(x=>{const w=c?e.measuredBox[x]:e.layoutBox[x],E=On(w);w.min=i[x].min,w.max=w.min+E}):VC(l,e.layoutBox,i)&&Ss(x=>{const w=c?e.measuredBox[x]:e.layoutBox[x],E=On(i[x]);w.max=w.min+E,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[x].max=t.relativeTarget[x].min+E)});const h=vl();xu(h,i,e.layoutBox);const p=vl();c?xu(p,t.applyTransform(a,!0),e.measuredBox):xu(p,i,e.layoutBox);const g=!AC(h);let v=!1;if(!t.resumeFrom){const x=t.getClosestProjectingParent();if(x&&!x.resumeFrom){const{snapshot:w,layout:E}=x;if(w&&E){const j=en();Df(j,e.layoutBox,w.layoutBox);const M=en();Df(M,i,E.layoutBox),NC(j,M)||(v=!0),x.options.layoutRoot&&(t.relativeTarget=M,t.relativeTargetOrigin=j,t.relativeParent=x)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:p,layoutDelta:h,hasLayoutChanged:g,hasRelativeLayoutChanged:v})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function v9(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function x9(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function b9(t){t.clearSnapshot()}function W2(t){t.clearMeasurements()}function X2(t){t.isLayoutDirty=!1}function _9(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function J2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function w9(t){t.resolveTargetDelta()}function T9(t){t.calcProjection()}function E9(t){t.resetSkewAndRotation()}function S9(t){t.removeLeadSnapshot()}function Z2(t,e,n){t.translate=Nt(e.translate,0,n),t.scale=Nt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function eT(t,e,n,i){t.min=Nt(e.min,n.min,i),t.max=Nt(e.max,n.max,i)}function A9(t,e,n,i){eT(t.x,e.x,n.x,i),eT(t.y,e.y,n.y,i)}function N9(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const C9={duration:.45,ease:[.4,0,.1,1]},tT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),nT=tT("applewebkit/")&&!tT("chrome/")?Math.round:js;function sT(t){t.min=nT(t.min),t.max=nT(t.max)}function R9(t){sT(t.x),sT(t.y)}function VC(t,e,n){return t==="position"||t==="preserve-aspect"&&!ZL(G2(e),G2(n),.2)}function j9(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const I9=DC({attachResizeListener:(t,e)=>zu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),qg={current:void 0},MC=DC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!qg.current){const t=new I9({});t.mount(window),t.setOptions({layoutScroll:!0}),qg.current=t}return qg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Mv=z.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function iT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function D9(...t){return e=>{let n=!1;const i=t.map(a=>{const l=iT(a,e);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let a=0;a<i.length;a++){const l=i[a];typeof l=="function"?l():iT(t[a],null)}}}}function V9(...t){return z.useCallback(D9(...t),t)}class M9 extends z.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,a=ZN(i)&&i.offsetWidth||0,l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft,l.right=a-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function k9({children:t,isPresent:e,anchorX:n,root:i}){var v;const a=z.useId(),l=z.useRef(null),c=z.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=z.useContext(Mv),p=((v=t.props)==null?void 0:v.ref)??(t==null?void 0:t.ref),g=V9(l,p);return z.useInsertionEffect(()=>{const{width:x,height:w,top:E,left:j,right:M}=c.current;if(e||!l.current||!x||!w)return;const V=n==="left"?`left: ${j}`:`right: ${M}`;l.current.dataset.motionPopId=a;const q=document.createElement("style");h&&(q.nonce=h);const B=i??document.head;return B.appendChild(q),q.sheet&&q.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${x}px !important;
            height: ${w}px !important;
            ${V}px !important;
            top: ${E}px !important;
          }
        `),()=>{B.contains(q)&&B.removeChild(q)}},[e]),d.jsx(M9,{isPresent:e,childRef:l,sizeRef:c,children:z.cloneElement(t,{ref:g})})}const O9=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:a,presenceAffectsLayout:l,mode:c,anchorX:h,root:p})=>{const g=iv(P9),v=z.useId();let x=!0,w=z.useMemo(()=>(x=!1,{id:v,initial:e,isPresent:n,custom:a,onExitComplete:E=>{g.set(E,!0);for(const j of g.values())if(!j)return;i&&i()},register:E=>(g.set(E,!1),()=>g.delete(E))}),[n,g,i]);return l&&x&&(w={...w}),z.useMemo(()=>{g.forEach((E,j)=>g.set(j,!1))},[n]),z.useEffect(()=>{!n&&!g.size&&i&&i()},[n]),c==="popLayout"&&(t=d.jsx(k9,{isPresent:n,anchorX:h,root:p,children:t})),d.jsx(um.Provider,{value:w,children:t})};function P9(){return new Map}function kC(t=!0){const e=z.useContext(um);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:a}=e,l=z.useId();z.useEffect(()=>{if(t)return a(l)},[t]);const c=z.useCallback(()=>t&&i&&i(l),[l,i,t]);return!n&&i?[!1,c]:[!0]}const Bh=t=>t.key||"";function rT(t){const e=[];return z.Children.forEach(t,n=>{z.isValidElement(n)&&e.push(n)}),e}const Ft=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:l="sync",propagate:c=!1,anchorX:h="left",root:p})=>{const[g,v]=kC(c),x=z.useMemo(()=>rT(t),[t]),w=c&&!g?[]:x.map(Bh),E=z.useRef(!0),j=z.useRef(x),M=iv(()=>new Map),V=z.useRef(new Set),[q,B]=z.useState(x),[K,oe]=z.useState(x);iN(()=>{E.current=!1,j.current=x;for(let R=0;R<K.length;R++){const S=Bh(K[R]);w.includes(S)?(M.delete(S),V.current.delete(S)):M.get(S)!==!0&&M.set(S,!1)}},[K,w.length,w.join("-")]);const H=[];if(x!==q){let R=[...x];for(let S=0;S<K.length;S++){const N=K[S],k=Bh(N);w.includes(k)||(R.splice(S,0,N),H.push(N))}return l==="wait"&&H.length&&(R=H),oe(rT(R)),B(x),null}const{forceRender:Z}=z.useContext(sv);return d.jsx(d.Fragment,{children:K.map(R=>{const S=Bh(R),N=c&&!g?!1:x===K||w.includes(S),k=()=>{if(V.current.has(S))return;if(V.current.add(S),M.has(S))M.set(S,!0);else return;let D=!0;M.forEach(O=>{O||(D=!1)}),D&&(Z==null||Z(),oe(j.current),c&&(v==null||v()),i&&i())};return d.jsx(O9,{isPresent:N,initial:!E.current||n?void 0:!1,custom:e,presenceAffectsLayout:a,mode:l,root:p,onExitComplete:N?void 0:k,anchorX:h,children:R},S)})})},OC=z.createContext({strict:!1}),aT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let oT=!1;function L9(){if(oT)return;const t={};for(const e in aT)t[e]={isEnabled:n=>aT[e].some(i=>!!n[i])};oC(t),oT=!0}function PC(){return L9(),AL()}function U9(t){const e=PC();for(const n in t)e[n]={...e[n],...t[n]};oC(e)}const z9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||z9.has(t)}let LC=t=>!Vf(t);function B9(t){typeof t=="function"&&(LC=e=>e.startsWith("on")?!Vf(e):t(e))}try{B9(require("@emotion/is-prop-valid").default)}catch{}function F9(t,e,n){const i={};for(const a in t)a==="values"&&typeof t.values=="object"||(LC(a)||n===!0&&Vf(a)||!e&&!Vf(a)||t.draggable&&a.startsWith("onDrag"))&&(i[a]=t[a]);return i}const mm=z.createContext({});function q9(t,e){if(fm(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Uu(n)?n:void 0,animate:Uu(i)?i:void 0}}return t.inherit!==!1?e:{}}function H9(t){const{initial:e,animate:n}=q9(t,z.useContext(mm));return z.useMemo(()=>({initial:e,animate:n}),[lT(e),lT(n)])}function lT(t){return Array.isArray(t)?t.join(" "):t}const kv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function UC(t,e,n){for(const i in e)!mn(e[i])&&!pC(i,n)&&(t[i]=e[i])}function G9({transformTemplate:t},e){return z.useMemo(()=>{const n=kv();return Dv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function K9(t,e){const n=t.style||{},i={};return UC(i,n,t),Object.assign(i,G9(t,e)),i}function $9(t,e){const n={},i=K9(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const zC=()=>({...kv(),attrs:{}});function Y9(t,e,n,i){const a=z.useMemo(()=>{const l=zC();return yC(l,e,xC(i),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};UC(l,t.style,t),a.style={...l,...a.style}}return a}const Q9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ov(t){return typeof t!="string"||t.includes("-")?!1:!!(Q9.indexOf(t)>-1||/[A-Z]/u.test(t))}function W9(t,e,n,{latestValues:i},a,l=!1,c){const p=(c??Ov(t)?Y9:$9)(e,i,a,t),g=F9(e,typeof t=="string",l),v=t!==z.Fragment?{...g,...p,ref:n}:{},{children:x}=e,w=z.useMemo(()=>mn(x)?x.get():x,[x]);return z.createElement(t,{...v,children:w})}function X9({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,a){return{latestValues:J9(n,i,a,t),renderState:e()}}function J9(t,e,n,i){const a={},l=i(t,{});for(const w in l)a[w]=sf(l[w]);let{initial:c,animate:h}=t;const p=fm(t),g=aC(t);e&&g&&!p&&t.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let v=n?n.initial===!1:!1;v=v||c===!1;const x=v?h:c;if(x&&typeof x!="boolean"&&!hm(x)){const w=Array.isArray(x)?x:[x];for(let E=0;E<w.length;E++){const j=Tv(t,w[E]);if(j){const{transitionEnd:M,transition:V,...q}=j;for(const B in q){let K=q[B];if(Array.isArray(K)){const oe=v?K.length-1:0;K=K[oe]}K!==null&&(a[B]=K)}for(const B in M)a[B]=M[B]}}}return a}const BC=t=>(e,n)=>{const i=z.useContext(mm),a=z.useContext(um),l=()=>X9(t,e,i,a);return n?l():iv(l)},Z9=BC({scrapeMotionValuesFromProps:Vv,createRenderState:kv}),e8=BC({scrapeMotionValuesFromProps:bC,createRenderState:zC}),t8=Symbol.for("motionComponentSymbol");function n8(t,e,n){const i=z.useRef(n);z.useInsertionEffect(()=>{i.current=n});const a=z.useRef(null);return z.useCallback(l=>{var h;l&&((h=t.onMount)==null||h.call(t,l)),e&&(l?e.mount(l):e.unmount());const c=i.current;if(typeof c=="function")if(l){const p=c(l);typeof p=="function"&&(a.current=p)}else a.current?(a.current(),a.current=null):c(l);else c&&(c.current=l)},[e])}const FC=z.createContext({});function cu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function s8(t,e,n,i,a,l){var V,q;const{visualElement:c}=z.useContext(mm),h=z.useContext(OC),p=z.useContext(um),g=z.useContext(Mv).reducedMotion,v=z.useRef(null);i=i||h.renderer,!v.current&&i&&(v.current=i(t,{visualState:e,parent:c,props:n,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:g,isSVG:l}));const x=v.current,w=z.useContext(FC);x&&!x.projection&&a&&(x.type==="html"||x.type==="svg")&&i8(v.current,n,a,w);const E=z.useRef(!1);z.useInsertionEffect(()=>{x&&E.current&&x.update(n,p)});const j=n[GN],M=z.useRef(!!j&&!((V=window.MotionHandoffIsComplete)!=null&&V.call(window,j))&&((q=window.MotionHasOptimisedAnimation)==null?void 0:q.call(window,j)));return iN(()=>{x&&(E.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),x.scheduleRenderMicrotask(),M.current&&x.animationState&&x.animationState.animateChanges())}),z.useEffect(()=>{x&&(!M.current&&x.animationState&&x.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var B;(B=window.MotionHandoffMarkAsComplete)==null||B.call(window,j)}),M.current=!1),x.enteringChildren=void 0)}),x}function i8(t,e,n,i){const{layoutId:a,layout:l,drag:c,dragConstraints:h,layoutScroll:p,layoutRoot:g,layoutCrossfade:v}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:qC(t.parent)),t.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!c||h&&cu(h),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:i,crossfade:v,layoutScroll:p,layoutRoot:g})}function qC(t){if(t)return t.options.allowProjection!==!1?t.projection:qC(t.parent)}function Hg(t,{forwardMotionProps:e=!1,type:n}={},i,a){i&&U9(i);const l=n?n==="svg":Ov(t),c=l?e8:Z9;function h(g,v){let x;const w={...z.useContext(Mv),...g,layoutId:r8(g)},{isStatic:E}=w,j=H9(g),M=c(g,E);if(!E&&sN){a8();const V=o8(w);x=V.MeasureLayout,j.visualElement=s8(t,M,w,a,V.ProjectionNode,l)}return d.jsxs(mm.Provider,{value:j,children:[x&&j.visualElement?d.jsx(x,{visualElement:j.visualElement,...w}):null,W9(t,g,n8(M,j.visualElement,v),M,E,e,l)]})}h.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const p=z.forwardRef(h);return p[t8]=t,p}function r8({layoutId:t}){const e=z.useContext(sv).id;return e&&t!==void 0?e+"-"+t:t}function a8(t,e){z.useContext(OC).strict}function o8(t){const e=PC(),{drag:n,layout:i}=e;if(!n&&!i)return{};const a={...n,...i};return{MeasureLayout:n!=null&&n.isEnabled(t)||i!=null&&i.isEnabled(t)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function l8(t,e){if(typeof Proxy>"u")return Hg;const n=new Map,i=(l,c)=>Hg(l,c,t,e),a=(l,c)=>i(l,c);return new Proxy(a,{get:(l,c)=>c==="create"?i:(n.has(c)||n.set(c,Hg(c,void 0,t,e)),n.get(c))})}const c8=(t,e)=>e.isSVG??Ov(t)?new _C(e):new gC(e,{allowProjection:t!==z.Fragment});class u8 extends ba{constructor(e){super(e),e.animationState||(e.animationState=$L(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();hm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let d8=0;class h8 extends ba{constructor(){super(...arguments),this.id=d8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const a=this.node.animationState.setActive("exit",!e);n&&!e&&a.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const f8={animation:{Feature:u8},exit:{Feature:h8}};function od(t){return{point:{x:t.pageX,y:t.pageY}}}const m8=t=>e=>Cv(e)&&t(e,od(e));function bu(t,e,n,i){return zu(t,e,m8(n),i)}const HC=({current:t})=>t?t.ownerDocument.defaultView:null,cT=(t,e)=>Math.abs(t-e);function p8(t,e){const n=cT(t.x,e.x),i=cT(t.y,e.y);return Math.sqrt(n**2+i**2)}const uT=new Set(["auto","scroll"]);class GC{constructor(e,n,{transformPagePoint:i,contextWindow:a=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3,element:h}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=E=>{this.handleScroll(E.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Kg(this.lastMoveEventInfo,this.history),j=this.startEvent!==null,M=p8(E.offset,{x:0,y:0})>=this.distanceThreshold;if(!j&&!M)return;const{point:V}=E,{timestamp:q}=_n;this.history.push({...V,timestamp:q});const{onStart:B,onMove:K}=this.handlers;j||(B&&B(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),K&&K(this.lastMoveEvent,E)},this.handlePointerMove=(E,j)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=Gg(j,this.transformPagePoint),wt.update(this.updatePoint,!0)},this.handlePointerUp=(E,j)=>{this.end();const{onEnd:M,onSessionEnd:V,resumeAnimation:q}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&q&&q(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=Kg(E.type==="pointercancel"?this.lastMoveEventInfo:Gg(j,this.transformPagePoint),this.history);this.startEvent&&M&&M(E,B),V&&V(E,B)},!Cv(e))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=a||window;const p=od(e),g=Gg(p,this.transformPagePoint),{point:v}=g,{timestamp:x}=_n;this.history=[{...v,timestamp:x}];const{onSessionStart:w}=n;w&&w(e,Kg(g,this.history)),this.removeListeners=id(bu(this.contextWindow,"pointermove",this.handlePointerMove),bu(this.contextWindow,"pointerup",this.handlePointerUp),bu(this.contextWindow,"pointercancel",this.handlePointerUp)),h&&this.startScrollTracking(h)}startScrollTracking(e){let n=e.parentElement;for(;n;){const i=getComputedStyle(n);(uT.has(i.overflowX)||uT.has(i.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const i=e===window,a=i?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},l={x:a.x-n.x,y:a.y-n.y};l.x===0&&l.y===0||(i?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=l.x,this.lastMoveEventInfo.point.y+=l.y):this.history.length>0&&(this.history[0].x-=l.x,this.history[0].y-=l.y),this.scrollPositions.set(e,a),wt.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),pa(this.updatePoint)}}function Gg(t,e){return e?{point:e(t.point)}:t}function dT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Kg({point:t},e){return{point:t,delta:dT(t,KC(e)),offset:dT(t,g8(e)),velocity:y8(e,.1)}}function g8(t){return t[0]}function KC(t){return t[t.length-1]}function y8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const a=KC(t);for(;n>=0&&(i=t[n],!(a.timestamp-i.timestamp>Ri(e)));)n--;if(!i)return{x:0,y:0};const l=Cs(a.timestamp-i.timestamp);if(l===0)return{x:0,y:0};const c={x:(a.x-i.x)/l,y:(a.y-i.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function v8(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Nt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Nt(n,t,i.max):Math.min(t,n)),t}function hT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function x8(t,{top:e,left:n,bottom:i,right:a}){return{x:hT(t.x,n,a),y:hT(t.y,e,i)}}function fT(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function b8(t,e){return{x:fT(t.x,e.x),y:fT(t.y,e.y)}}function _8(t,e){let n=.5;const i=On(t),a=On(e);return a>i?n=Pl(e.min,e.max-i,t.min):i>a&&(n=Pl(t.min,t.max-a,e.min)),Vi(0,1,n)}function w8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const K0=.35;function T8(t=K0){return t===!1?t=0:t===!0&&(t=K0),{x:mT(t,"left","right"),y:mT(t,"top","bottom")}}function mT(t,e,n){return{min:pT(t,e),max:pT(t,n)}}function pT(t,e){return typeof t=="number"?t:t[e]||0}const E8=new WeakMap;class S8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=en(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const l=x=>{n?(this.stopAnimation(),this.snapToCursor(od(x).point)):this.pauseAnimation()},c=(x,w)=>{this.stopAnimation();const{drag:E,dragPropagation:j,onDragStart:M}=this.getProps();if(E&&!j&&(this.openDragLock&&this.openDragLock(),this.openDragLock=gL(E),!this.openDragLock))return;this.latestPointerEvent=x,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ss(q=>{let B=this.getAxisMotionValue(q).get()||0;if(ji.test(B)){const{projection:K}=this.visualElement;if(K&&K.layout){const oe=K.layout.layoutBox[q];oe&&(B=On(oe)*(parseFloat(B)/100))}}this.originPoint[q]=B}),M&&wt.postRender(()=>M(x,w)),U0(this.visualElement,"transform");const{animationState:V}=this.visualElement;V&&V.setActive("whileDrag",!0)},h=(x,w)=>{this.latestPointerEvent=x,this.latestPanInfo=w;const{dragPropagation:E,dragDirectionLock:j,onDirectionLock:M,onDrag:V}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:q}=w;if(j&&this.currentDirection===null){this.currentDirection=A8(q),this.currentDirection!==null&&M&&M(this.currentDirection);return}this.updateAxis("x",w.point,q),this.updateAxis("y",w.point,q),this.visualElement.render(),V&&V(x,w)},p=(x,w)=>{this.latestPointerEvent=x,this.latestPanInfo=w,this.stop(x,w),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>Ss(x=>{var w;return this.getAnimationState(x)==="paused"&&((w=this.getAxisMotionValue(x).animation)==null?void 0:w.play())}),{dragSnapToOrigin:v}=this.getProps();this.panSession=new GC(e,{onSessionStart:l,onStart:c,onMove:h,onSessionEnd:p,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:v,distanceThreshold:i,contextWindow:HC(this.visualElement),element:this.visualElement.current})}stop(e,n){const i=e||this.latestPointerEvent,a=n||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!a||!i)return;const{velocity:c}=a;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&wt.postRender(()=>h(i,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:a}=this.getProps();if(!i||!Fh(e,a,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(c=v8(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var l;const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,a=this.constraints;e&&cu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=x8(i.layoutBox,e):this.constraints=!1,this.elastic=T8(n),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ss(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=w8(i.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!cu(e))return!1;const i=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=jL(i,a.root,this.visualElement.getTransformPagePoint());let c=b8(a.layout.layoutBox,l);if(n){const h=n(NL(c));this.hasMutatedConstraints=!!h,h&&(c=uC(h))}return c}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:a,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),p=this.constraints||{},g=Ss(v=>{if(!Fh(v,n,this.currentDirection))return;let x=p&&p[v]||{};c&&(x={min:0,max:0});const w=a?200:1e6,E=a?40:1e7,j={type:"inertia",velocity:i?e[v]:0,bounceStiffness:w,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...l,...x};return this.startAxisValueAnimation(v,j)});return Promise.all(g).then(h)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return U0(this.visualElement,e),i.start(wv(e,i,0,n,this.visualElement,!1))}stopAnimation(){Ss(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ss(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),a=i[n];return a||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Ss(n=>{const{drag:i}=this.getProps();if(!Fh(n,i,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(n);if(a&&a.layout){const{min:c,max:h}=a.layout.layoutBox[n],p=l.get()||0;l.set(e[n]-Nt(c,h,.5)+p)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!cu(n)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Ss(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const p=h.get();a[c]=_8({min:p,max:p},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ss(c=>{if(!Fh(c,e,null))return;const h=this.getAxisMotionValue(c),{min:p,max:g}=this.constraints[c];h.set(Nt(p,g,a[c]))})}addListeners(){if(!this.visualElement.current)return;E8.set(this.visualElement,this);const e=this.visualElement.current,n=bu(e,"pointerdown",p=>{const{drag:g,dragListener:v=!0}=this.getProps();g&&v&&!sC(p.target)&&this.start(p)}),i=()=>{const{dragConstraints:p}=this.getProps();cu(p)&&p.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),wt.read(i);const c=zu(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",(({delta:p,hasLayoutChanged:g})=>{this.isDragging&&g&&(Ss(v=>{const x=this.getAxisMotionValue(v);x&&(this.originPoint[v]+=p[v].translate,x.set(x.get()+p[v].translate))}),this.visualElement.render())}));return()=>{c(),n(),l(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:c=K0,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:a,dragConstraints:l,dragElastic:c,dragMomentum:h}}}function Fh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function A8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class N8 extends ba{constructor(e){super(e),this.removeGroupControls=js,this.removeListeners=js,this.controls=new S8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||js}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const gT=t=>(e,n)=>{t&&wt.postRender(()=>t(e,n))};class C8 extends ba{constructor(){super(...arguments),this.removePointerDownListener=js}onPointerDown(e){this.session=new GC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:HC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:gT(e),onStart:gT(n),onMove:i,onEnd:(l,c)=>{delete this.session,a&&wt.postRender(()=>a(l,c))}}}mount(){this.removePointerDownListener=bu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let $g=!1;class R8 extends z.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:a}=this.props,{projection:l}=e;l&&(n.group&&n.group.add(l),i&&i.register&&a&&i.register(l),$g&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),rf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:a,isPresent:l}=this.props,{projection:c}=i;return c&&(c.isPresent=l,$g=!0,a||e.layoutDependency!==n||n===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||wt.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Nv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:a}=e;$g=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function $C(t){const[e,n]=kC(),i=z.useContext(sv);return d.jsx(R8,{...t,layoutGroup:i,switchLayoutGroup:z.useContext(FC),isPresent:e,safeToRemove:n})}const j8={pan:{Feature:C8},drag:{Feature:N8,ProjectionNode:MC,MeasureLayout:$C}};function yT(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,l=i[a];l&&wt.postRender(()=>l(e,od(e)))}class I8 extends ba{mount(){const{current:e}=this.node;e&&(this.unmount=yL(e,(n,i)=>(yT(this.node,i,"Start"),a=>yT(this.node,a,"End"))))}unmount(){}}class D8 extends ba{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=id(zu(this.node.current,"focus",()=>this.onFocus()),zu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function vT(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),l=i[a];l&&wt.postRender(()=>l(e,od(e)))}class V8 extends ba{mount(){const{current:e}=this.node;e&&(this.unmount=bL(e,(n,i)=>(vT(this.node,i,"Start"),(a,{success:l})=>vT(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const $0=new WeakMap,Yg=new WeakMap,M8=t=>{const e=$0.get(t.target);e&&e(t)},k8=t=>{t.forEach(M8)};function O8({root:t,...e}){const n=t||document;Yg.has(n)||Yg.set(n,{});const i=Yg.get(n),a=JSON.stringify(e);return i[a]||(i[a]=new IntersectionObserver(k8,{root:t,...e})),i[a]}function P8(t,e,n){const i=O8(e);return $0.set(t,n),i.observe(t),()=>{$0.delete(t),i.unobserve(t)}}const L8={some:0,all:1};class U8 extends ba{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:a="some",once:l}=e,c={root:n?n.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:L8[a]},h=p=>{const{isIntersecting:g}=p;if(this.isInView===g||(this.isInView=g,l&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:v,onViewportLeave:x}=this.node.getProps(),w=g?v:x;w&&w(p)};return P8(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(z8(e,n))&&this.startObserver()}unmount(){}}function z8({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const B8={inView:{Feature:U8},tap:{Feature:V8},focus:{Feature:D8},hover:{Feature:I8}},F8={layout:{ProjectionNode:MC,MeasureLayout:$C}},q8={...f8,...B8,...j8,...F8},me=l8(q8,c8);function Pv(t){return typeof t=="object"&&!Array.isArray(t)}function YC(t,e,n,i){return typeof t=="string"&&Pv(e)?XN(t,n,i):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function H8(t,e,n){return t*(e+1)}function xT(t,e,n,i){return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:e.startsWith("<")?Math.max(0,n+parseFloat(e.slice(1))):i.get(e)??t}function G8(t,e,n){for(let i=0;i<t.length;i++){const a=t[i];a.at>e&&a.at<n&&(dm(t,a),i--)}}function K8(t,e,n,i,a,l){G8(t,a,l);for(let c=0;c<e.length;c++)t.push({value:e[c],at:Nt(a,l,i[c]),easing:xN(n,c)})}function $8(t,e){for(let n=0;n<t.length;n++)t[n]=t[n]/(e+1)}function Y8(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const Q8="easeInOut";function W8(t,{defaultTransition:e={},...n}={},i,a){const l=e.duration||.3,c=new Map,h=new Map,p={},g=new Map;let v=0,x=0,w=0;for(let E=0;E<t.length;E++){const j=t[E];if(typeof j=="string"){g.set(j,x);continue}else if(!Array.isArray(j)){g.set(j.name,xT(x,j.at,v,g));continue}let[M,V,q={}]=j;q.at!==void 0&&(x=xT(x,q.at,v,g));let B=0;const K=(oe,H,Z,R=0,S=0)=>{const N=X8(oe),{delay:k=0,times:D=kN(N),type:O="keyframes",repeat:I,repeatType:te,repeatDelay:Re=0,...ee}=H;let{ease:X=e.ease||"easeOut",duration:ue}=H;const be=typeof k=="function"?k(R,S):k,we=N.length,L=bv(O)?O:a==null?void 0:a[O||"keyframes"];if(we<=2&&L){let De=100;if(we===2&&eU(N)){const lt=N[1]-N[0];De=Math.abs(lt)}const ke={...ee};ue!==void 0&&(ke.duration=Ri(ue));const qe=DN(ke,De,L);X=qe.ease,ue=qe.duration}ue??(ue=l);const re=x+be;D.length===1&&D[0]===0&&(D[1]=1);const ye=D.length-N.length;if(ye>0&&MN(D,ye),N.length===1&&N.unshift(null),I){ue=H8(ue,I);const De=[...N],ke=[...D];X=Array.isArray(X)?[...X]:[X];const qe=[...X];for(let lt=0;lt<I;lt++){N.push(...De);for(let nt=0;nt<De.length;nt++)D.push(ke[nt]+(lt+1)),X.push(nt===0?"linear":xN(qe,nt-1))}$8(D,I)}const _e=re+ue;K8(Z,N,X,D,re,_e),B=Math.max(be+ue,B),w=Math.max(_e,w)};if(mn(M)){const oe=bT(M,h);K(V,q,_T("default",oe))}else{const oe=YC(M,V,i,p),H=oe.length;for(let Z=0;Z<H;Z++){V=V,q=q;const R=oe[Z],S=bT(R,h);for(const N in V)K(V[N],J8(q,N),_T(N,S),Z,H)}}v=x,x+=B}return h.forEach((E,j)=>{for(const M in E){const V=E[M];V.sort(Y8);const q=[],B=[],K=[];for(let H=0;H<V.length;H++){const{at:Z,value:R,easing:S}=V[H];q.push(R),B.push(Pl(0,w,Z)),K.push(S||"easeOut")}B[0]!==0&&(B.unshift(0),q.unshift(q[0]),K.unshift(Q8)),B[B.length-1]!==1&&(B.push(1),q.push(null)),c.has(j)||c.set(j,{keyframes:{},transition:{}});const oe=c.get(j);oe.keyframes[M]=q,oe.transition[M]={...e,duration:w,ease:K,times:B,...n}}}),c}function bT(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function _T(t,e){return e[t]||(e[t]=[]),e[t]}function X8(t){return Array.isArray(t)?t:[t]}function J8(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const Z8=t=>typeof t=="number",eU=t=>t.every(Z8);function tU(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=Rv(t)&&!iC(t)?new _C(e):new gC(e);n.mount(t),Lu.set(t,n)}function nU(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new PL(e);n.mount(t),Lu.set(t,n)}function sU(t,e){return mn(t)||typeof t=="number"||typeof t=="string"&&!Pv(e)}function QC(t,e,n,i){const a=[];if(sU(t,e))a.push(jC(t,Pv(e)&&e.default||e,n&&(n.default||n)));else{const l=YC(t,e,i),c=l.length;for(let h=0;h<c;h++){const p=l[h],g=p instanceof Element?tU:nU;Lu.has(p)||g(p);const v=Lu.get(p),x={...n};"delay"in x&&typeof x.delay=="function"&&(x.delay=x.delay(h,c)),a.push(...Sv(v,{...e,transition:x},{}))}}return a}function iU(t,e,n){const i=[];return W8(t,e,n,{spring:Pu}).forEach(({keyframes:l,transition:c},h)=>{i.push(...QC(h,l,c))}),i}function rU(t){return Array.isArray(t)&&t.some(Array.isArray)}function aU(t){function e(n,i,a){let l=[],c;if(rU(n))l=iU(n,i,t);else{const{onComplete:p,...g}=a||{};typeof p=="function"&&(c=p),l=QC(n,i,g,t)}const h=new UP(l);return c&&h.finished.then(c),h}return e}const oU=aU(),lU=()=>{const[t,e]=z.useState(""),[n,i]=z.useState(""),[a,l]=z.useState(""),[c,h]=z.useState(""),[p,g]=z.useState(!1),[v,x]=z.useState(!1),w=async E=>{E.preventDefault(),g(!0),l(""),h("");try{if(v){if(!t)throw new Error("     ");await JD(Ns,t),h("        (  )  "),x(!1)}else await tV(Ns,tS),await eV(Ns,t,n)}catch(j){console.error(j),v?l("         "):j.code==="auth/wrong-password"||j.code==="auth/user-not-found"||j.code==="auth/invalid-credential"?l("    "):l(j.message||"   ")}g(!1)};return d.jsxs("form",{onSubmit:w,className:"space-y-6",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 ml-1",children:" "}),d.jsxs("div",{className:"relative group",children:[d.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none text-gray-400 group-focus-within:text-electionGreen transition-colors",children:d.jsxs("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[d.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),d.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]})}),d.jsx("input",{type:"email",value:t,onChange:E=>e(E.target.value),required:!0,className:"w-full pl-11 p-4 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-electionGreen/50 focus:border-electionGreen focus:bg-white text-gray-800 transition-all shadow-sm",placeholder:"name@example.com"})]})]}),d.jsx(Ft,{children:!v&&d.jsxs(me.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-1 overflow-hidden",children:[d.jsx("div",{className:"flex justify-between items-center ml-1",children:d.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:""})}),d.jsxs("div",{className:"relative group",children:[d.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none text-gray-400 group-focus-within:text-electionGreen transition-colors",children:d.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z",clipRule:"evenodd"})})}),d.jsx("input",{type:"password",value:n,onChange:E=>i(E.target.value),required:!v,className:"w-full pl-11 p-4 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-electionGreen/50 focus:border-electionGreen focus:bg-white text-gray-800 transition-all shadow-sm",placeholder:""})]})]})}),d.jsx("div",{className:"flex justify-end",children:v?d.jsx("button",{type:"button",onClick:()=>{x(!1),l(""),h("")},className:"text-xs font-medium text-gray-500 hover:text-gray-700 hover:underline focus:outline-none",children:"   "}):d.jsx("button",{type:"button",onClick:()=>{x(!0),l(""),h("")},className:"text-xs font-medium text-electionGreen hover:text-electionGreen-dark hover:underline focus:outline-none",children:"  ?"})}),a&&d.jsxs(me.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 text-red-600 text-sm p-3 rounded-lg flex items-center gap-2 border border-red-100",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),a]}),c&&d.jsxs(me.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 text-green-700 text-sm p-3 rounded-lg flex items-center gap-2 border border-green-100",children:[d.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),c]}),d.jsx(me.button,{whileHover:{scale:1.01},whileTap:{scale:.99},type:"submit",disabled:p,className:`w-full flex items-center justify-center gap-3 text-white font-bold text-lg py-3 rounded-xl shadow-lg transition-all duration-300 disabled:opacity-70 disabled:cursor-not-allowed ${v?"bg-gray-700 hover:bg-gray-800 hover:shadow-gray-500/30":"bg-gradient-to-r from-electionGreen to-green-700 hover:shadow-electionGreen/30 hover:to-green-800"}`,children:p?d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})," ..."]}):d.jsxs(d.Fragment,{children:[v?"  ":" ",!v&&d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),v&&d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})]})})]})},cU=["","","","","","","",""],qh=({type:t,value:e,onChange:n,placeholder:i,icon:a,label:l,required:c=!0,...h})=>d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 ml-1",children:l}),d.jsxs("div",{className:"relative group",children:[d.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none text-gray-400 group-focus-within:text-electionGreen transition-colors",children:a}),d.jsx("input",{type:t,value:e,onChange:n,required:c,placeholder:i,className:"w-full pl-11 p-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-electionGreen/50 focus:border-electionGreen focus:bg-white text-gray-800 transition-all shadow-sm",...h})]})]}),uU=()=>{const[t,e]=z.useState(1),[n,i]=z.useState(1),[a,l]=z.useState(""),[c,h]=z.useState(""),[p,g]=z.useState(""),[v,x]=z.useState(""),[w,E]=z.useState(""),[j,M]=z.useState(""),[V,q]=z.useState(""),[B,K]=z.useState(!1),[oe,H]=z.useState([]);z.useEffect(()=>{(async()=>{try{const O=await cm();H(O)}catch(O){console.error("Failed to load districts:",O)}})()},[]);const Z=async D=>{if(D.preventDefault(),a.length<4||!v||w===""||j===""){q("    ");return}K(!0),q("");try{const I=(await ZD(Ns,c,p)).user;await H6(I.uid,{username:a,email:c,age:parseInt(v),division:w,district:j,device_fingerprint:"email_verified_user"}),await hy(I)}catch(O){O.code==="auth/email-already-in-use"?q("   "):q(O.message||"     "),console.error(O),K(!1)}},R=()=>{if(q(""),t===1&&(!c.includes("@")||p.length<6)){q("   +   ");return}i(1),e(D=>D+1)},S=()=>{q(""),i(-1),e(D=>D-1)},N={hidden:D=>({opacity:0,x:D>0?50:-50}),visible:{opacity:1,x:0,transition:{duration:.4,ease:[.22,1,.36,1]}},exit:D=>({opacity:0,x:D<0?50:-50,transition:{duration:.3,ease:"easeIn"}})},k=oe.filter(D=>D.division===w);return d.jsxs("form",{onSubmit:Z,className:"overflow-hidden",children:[d.jsxs("div",{className:"mb-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[d.jsxs("div",{className:"flex flex-col items-start",children:[d.jsx("span",{className:`text-sm font-bold ${t===1?"text-electionGreen":"text-gray-400"}`,children:""}),d.jsx("span",{className:"text-xs text-gray-400",children:" "})]}),d.jsxs("div",{className:"flex flex-col items-end",children:[d.jsx("span",{className:`text-sm font-bold ${t===2?"text-electionGreen":"text-gray-400"}`,children:""}),d.jsx("span",{className:"text-xs text-gray-400",children:" "})]})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:d.jsx(me.div,{className:"bg-gradient-to-r from-green-500 to-electionGreen h-full rounded-full",initial:{width:"50%"},animate:{width:t===1?"50%":"100%"},transition:{duration:.5,ease:"easeInOut"}})})]}),d.jsx("div",{className:"min-h-[260px]",children:d.jsxs(Ft,{mode:"wait",custom:n,children:[t===1&&d.jsxs(me.div,{custom:n,variants:N,initial:"hidden",animate:"visible",exit:"exit",className:"space-y-4",children:[d.jsx(qh,{type:"email",value:c,onChange:D=>h(D.target.value),placeholder:"name@example.com",label:"",icon:d.jsxs("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[d.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),d.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]})}),d.jsx(qh,{type:"password",value:p,onChange:D=>g(D.target.value),placeholder:"",label:"",icon:d.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z",clipRule:"evenodd"})})})]},1),t===2&&d.jsxs(me.div,{custom:n,variants:N,initial:"hidden",animate:"visible",exit:"exit",className:"space-y-4",children:[d.jsx(qh,{type:"text",value:a,onChange:D=>l(D.target.value),placeholder:" ",label:"",icon:d.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsx(qh,{type:"number",value:v,onChange:D=>x(D.target.value),placeholder:"+",label:"",min:18,max:120,icon:d.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})})}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 ml-1",children:""}),d.jsxs("select",{value:w,onChange:D=>{E(D.target.value),M("")},required:!0,className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-electionGreen/50 focus:border-electionGreen focus:bg-white text-gray-800 shadow-sm appearance-none h-[50px]",children:[d.jsx("option",{value:"",children:" "}),cU.map(D=>d.jsx("option",{value:D,children:D},D))]})]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 ml-1",children:" ( )"}),d.jsxs("div",{className:"relative",children:[d.jsxs("select",{value:j,onChange:D=>M(D.target.value),required:!0,disabled:!w,className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-electionGreen/50 focus:border-electionGreen focus:bg-white text-gray-800 shadow-sm appearance-none disabled:opacity-50",children:[d.jsx("option",{value:"",children:w?"  ":"  "}),w&&k.map(D=>d.jsx("option",{value:D.name,children:D.name},D.id))]}),d.jsx("span",{className:"absolute inset-y-0 right-4 flex items-center pointer-events-none text-gray-500",children:d.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]})]},2)]})}),V&&d.jsx(me.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-red-500 text-center text-sm mt-3 bg-red-50 py-2 rounded-lg border border-red-100",children:V}),d.jsx("div",{className:"mt-6 grid grid-cols-2 gap-4",children:t===2?d.jsxs(d.Fragment,{children:[d.jsxs(me.button,{type:"button",onClick:S,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center justify-center gap-2 bg-gray-200 text-gray-700 font-bold py-3 rounded-xl hover:bg-gray-300 transition-colors",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),""]}),d.jsxs(me.button,{type:"submit",disabled:B,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center justify-center gap-2 bg-gradient-to-r from-electionGreen to-green-700 text-white font-bold py-3 rounded-xl shadow-lg hover:shadow-electionGreen/30 transition-all duration-300 disabled:opacity-70",children:[B?"...":" ",!B&&d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]})]}):d.jsxs(me.button,{type:"button",onClick:R,whileHover:{scale:1.02},whileTap:{scale:.98},className:"col-span-2 flex items-center justify-center gap-2 bg-gray-800 text-white font-bold py-3 rounded-xl hover:bg-gray-900 shadow-lg transition-all duration-300",children:[" ",d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]})},dU=()=>{const[t,e]=z.useState("login"),n={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.5,ease:[.22,1,.36,1]}},exit:{opacity:0,scale:.95,transition:{duration:.3}}};return d.jsxs("div",{className:"min-h-[80vh] flex items-center justify-center py-12 px-4 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-green-400/20 rounded-full blur-3xl -z-10"}),d.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-blue-400/20 rounded-full blur-3xl -z-10"}),d.jsxs(me.div,{initial:"hidden",animate:"visible",variants:n,className:"w-full max-w-xl bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl overflow-hidden border border-white/50",children:[d.jsxs("div",{className:"bg-gradient-to-r from-electionGreen-dark to-electionGreen p-10 text-center text-white relative overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),d.jsxs(me.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[d.jsx("h2",{className:"text-4xl font-extrabold tracking-tight mb-2",children:"  "}),d.jsx("p",{className:"text-green-100 text-lg font-medium",children:"      "})]})]}),d.jsx("div",{className:"p-8 md:p-10",children:d.jsx(Ft,{mode:"wait",children:t==="login"?d.jsxs(me.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},children:[d.jsx(lU,{}),d.jsx("div",{className:"mt-8 text-center",children:d.jsxs("p",{className:"text-neutral-500 text-sm",children:["    ?"," ",d.jsx("button",{onClick:()=>e("signup"),className:"text-electionGreen font-bold hover:text-electionGreen-dark transition-colors hover:underline",children:"   "})]})})]},"login"):d.jsxs(me.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[d.jsx(uU,{}),d.jsx("div",{className:"mt-8 text-center",children:d.jsxs("p",{className:"text-neutral-500 text-sm",children:["  ?"," ",d.jsx("button",{onClick:()=>e("login"),className:"text-electionGreen font-bold hover:text-electionGreen-dark transition-colors hover:underline",children:" "})]})})]},"signup")})})]})]})},hU=()=>{var x;const[t,e]=z.useState({type:"",msg:""}),[n,i]=z.useState(!1),[a,l]=z.useState(!1),[c,h]=z.useState(0);z.useEffect(()=>{sessionStorage.setItem("pendingVerification","true")},[]),z.useEffect(()=>{if(c>0){const w=setTimeout(()=>h(c-1),1e3);return()=>clearTimeout(w)}},[c]);const p=async()=>{if(Ns.currentUser&&c===0){i(!0),e({type:"",msg:""});try{await hy(Ns.currentUser),e({type:"success",msg:"   !      "}),h(60)}catch(w){w.code==="auth/too-many-requests"?e({type:"error",msg:"           "}):e({type:"error",msg:"       "})}i(!1)}},g=async()=>{l(!0);try{sessionStorage.removeItem("pendingVerification"),await l0(Ns)}catch(w){console.error("Logout failed:",w),e({type:"error",msg:"      "})}finally{l(!1)}},v=async()=>{try{sessionStorage.removeItem("pendingVerification"),await l0(Ns)}catch(w){console.error(w)}};return d.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4 py-12 relative overflow-hidden font-sans",children:[d.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 opacity-10 pointer-events-none",children:[d.jsx("div",{className:"absolute -top-24 -left-24 w-96 h-96 bg-electionGreen rounded-full blur-3xl"}),d.jsx("div",{className:"absolute top-1/2 right-0 w-64 h-64 bg-green-600 rounded-full blur-3xl"})]}),d.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},className:"bg-white rounded-3xl p-8 md:p-10 max-w-md w-full shadow-2xl border border-white/50 relative z-10",children:[d.jsx("div",{className:"flex justify-center mb-8",children:d.jsxs("div",{className:"relative",children:[d.jsx(me.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2},className:"absolute inset-0 bg-green-100 rounded-full blur-md"}),d.jsx("div",{className:"w-24 h-24 bg-gradient-to-tr from-electionGreen-dark to-electionGreen rounded-full flex items-center justify-center text-white shadow-lg relative z-10",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 19v-8.93a2 2 0 01.89-1.664l7-4.666a2 2 0 012.22 0l7 4.666A2 2 0 0121 10.07V19M3 19a2 2 0 002 2h14a2 2 0 002-2M3 19l6.75-4.5M21 19l-6.75-4.5M3 10l6.75 4.5M21 10l-6.75 4.5m0 0l-1.14.76a2 2 0 01-2.22 0l-1.14-.76"})})}),d.jsx("div",{className:"absolute top-0 right-0 bg-red-500 w-8 h-8 rounded-full border-4 border-white flex items-center justify-center text-white text-xs font-bold shadow-sm z-20",children:"!"})]})}),d.jsxs("div",{className:"text-center space-y-3 mb-8",children:[d.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:" "}),d.jsx("p",{className:"text-gray-500 leading-relaxed text-sm md:text-base",children:"           :"}),d.jsx("div",{className:"inline-block px-4 py-2 bg-green-50 text-electionGreen-dark font-semibold rounded-lg border border-green-100 text-sm break-all",children:(x=Ns.currentUser)==null?void 0:x.email}),d.jsx("p",{className:"text-xs text-gray-400",children:"(      )"})]}),d.jsx(Ft,{mode:"wait",children:t.msg&&d.jsxs(me.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:`mb-6 p-4 rounded-xl text-sm font-medium flex items-start gap-3 ${t.type==="success"?"bg-green-50 text-green-700 border border-green-100":"bg-red-50 text-red-700 border border-red-100"}`,children:[t.type==="success"?d.jsx("svg",{className:"h-5 w-5 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):d.jsx("svg",{className:"h-5 w-5 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.msg]},"status")}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(me.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,disabled:a,className:"w-full py-3.5 bg-gradient-to-r from-electionGreen to-electionGreen-dark text-white rounded-xl font-bold text-lg shadow-lg hover:shadow-electionGreen/30 transition-all duration-300 flex items-center justify-center gap-2 disabled:opacity-80",children:a?d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"  ..."]}):d.jsxs(d.Fragment,{children:["  ",d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})}),d.jsx("button",{onClick:p,disabled:n||c>0,className:"w-full py-3 bg-white border-2 border-gray-100 text-gray-600 rounded-xl font-bold text-sm hover:border-electionGreen hover:text-electionGreen transition-all duration-300 disabled:opacity-60 disabled:cursor-not-allowed flex justify-center items-center gap-2",children:n?d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})," ..."]}):c>0?d.jsxs("span",{children:["   ",c,"  "]}):"   "}),d.jsx("div",{className:"pt-4 border-t border-gray-100 text-center",children:d.jsxs("button",{onClick:v,className:"text-gray-400 text-sm font-medium hover:text-red-500 transition-colors flex items-center justify-center gap-1 mx-auto group",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 group-hover:-translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})}),"   "]})})]})]}),d.jsx("div",{className:"absolute bottom-6 text-center w-full text-gray-400 text-xs",children:"     |  "})]})};var Y0=new Map,Hh=new WeakMap,wT=0,fU;function mU(t){return t?(Hh.has(t)||(wT+=1,Hh.set(t,wT.toString())),Hh.get(t)):"0"}function pU(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?mU(t.root):t[e]}`).toString()}function gU(t){const e=pU(t);let n=Y0.get(e);if(!n){const i=new Map;let a;const l=new IntersectionObserver(c=>{c.forEach(h=>{var p;const g=h.isIntersecting&&a.some(v=>h.intersectionRatio>=v);t.trackVisibility&&typeof h.isVisible>"u"&&(h.isVisible=g),(p=i.get(h.target))==null||p.forEach(v=>{v(g,h)})})},t);a=l.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:l,elements:i},Y0.set(e,n)}return n}function yU(t,e,n={},i=fU){if(typeof window.IntersectionObserver>"u"&&i!==void 0){const p=t.getBoundingClientRect();return e(i,{isIntersecting:i,target:t,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:p,intersectionRect:p,rootBounds:p}),()=>{}}const{id:a,observer:l,elements:c}=gU(n),h=c.get(t)||[];return c.has(t)||c.set(t,h),h.push(e),l.observe(t),function(){h.splice(h.indexOf(e),1),h.length===0&&(c.delete(t),l.unobserve(t)),c.size===0&&(l.disconnect(),Y0.delete(a))}}function vU({threshold:t,delay:e,trackVisibility:n,rootMargin:i,root:a,triggerOnce:l,skip:c,initialInView:h,fallbackInView:p,onChange:g}={}){var v;const[x,w]=z.useState(null),E=z.useRef(g),j=z.useRef(h),[M,V]=z.useState({inView:!!h,entry:void 0});E.current=g,z.useEffect(()=>{if(j.current===void 0&&(j.current=h),c||!x)return;let oe;return oe=yU(x,(H,Z)=>{const R=j.current;j.current=H,!(R===void 0&&!H)&&(V({inView:H,entry:Z}),E.current&&E.current(H,Z),Z.isIntersecting&&l&&oe&&(oe(),oe=void 0))},{root:a,rootMargin:i,threshold:t,trackVisibility:n,delay:e},p),()=>{oe&&oe()}},[Array.isArray(t)?t.toString():t,x,a,i,l,c,n,p,e]);const q=(v=M.entry)==null?void 0:v.target,B=z.useRef(void 0);!x&&q&&!l&&!c&&B.current!==q&&(B.current=q,V({inView:!!h,entry:void 0}),j.current=h);const K=[w,M.inView,M.entry];return K.ref=K[0],K.inView=K[1],K.entry=K[2],K}const xU={users:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.124-1.282-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.124-1.282.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),turnout:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),status:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})},Qg=({title:t,value:e,description:n,isPercentage:i=!1,trend:a,icon:l})=>{const[c,h]=vU({triggerOnce:!0,threshold:.1}),[p,g]=z.useState(0);return z.useEffect(()=>{if(h&&typeof e=="number"){const v=oU(0,e,{duration:2,ease:[.22,1,.36,1],onUpdate:x=>g(x)});return()=>v.stop()}},[h,e]),d.jsxs(me.div,{ref:c,initial:{opacity:0,y:20},animate:h?{opacity:1,y:0}:{},transition:{duration:.5},whileHover:{y:-4,boxShadow:"0 20px 40px -15px rgba(4, 120, 87, 0.15)"},className:"relative overflow-hidden bg-white rounded-2xl border border-gray-100 shadow-sm p-6 group",children:[d.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-32 h-32 bg-gradient-to-br from-electionGreen-light/10 to-transparent rounded-full blur-2xl group-hover:bg-electionGreen-light/20 transition-all duration-500"}),d.jsxs("div",{className:"flex justify-between items-start relative z-10",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:t}),d.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[typeof e=="number"?d.jsx("span",{className:"text-4xl font-extrabold text-gray-900 tracking-tight",children:i?`${Math.round(p).toLocaleString("bn-BD")}%`:Math.round(p).toLocaleString("bn-BD")}):d.jsx("span",{className:"text-3xl font-bold text-gray-900",children:e}),a&&d.jsxs("span",{className:`flex items-center text-xs font-bold px-2 py-0.5 rounded-full ${a>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[a>0?"":""," ",Math.abs(a),"%"]})]}),n&&d.jsx("p",{className:"mt-2 text-sm text-gray-400 font-medium",children:n})]}),d.jsx("div",{className:"p-3 rounded-xl bg-gray-50 text-electionGreen group-hover:bg-electionGreen group-hover:text-white transition-colors duration-300 shadow-inner",children:d.jsx("div",{className:"w-6 h-6",children:xU[l]})})]}),d.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gray-100",children:d.jsx(me.div,{initial:{width:0},animate:h?{width:"100%"}:{},transition:{duration:1.5,delay:.2},className:"h-full bg-gradient-to-r from-electionGreen-light to-electionGreen"})})]})},bU=({isOpen:t,onClose:e,onVerified:n})=>{const[i,a]=z.useState(0),[l,c]=z.useState(0),[h,p]=z.useState(""),[g,v]=z.useState("idle"),x=z.useRef(null);z.useEffect(()=>{t&&(w(),p(""),v("idle"),setTimeout(()=>{var j;return(j=x.current)==null?void 0:j.focus()},100))},[t]);const w=()=>{a(Math.floor(Math.random()*10)+1),c(Math.floor(Math.random()*10)+1)},E=j=>{if(j==null||j.preventDefault(),!h)return;v("verifying");const M=i+l;setTimeout(()=>{parseInt(h)===M?(v("success"),setTimeout(()=>{n()},1e3)):(v("error"),setTimeout(()=>{var V;p(""),v("idle"),(V=x.current)==null||V.focus()},800))},500)};return d.jsx(Ft,{children:t&&d.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-gray-900/70 backdrop-blur-md",onClick:e}),d.jsxs(me.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative bg-white w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden",onClick:j=>j.stopPropagation(),children:[d.jsxs("div",{className:"bg-gray-50 p-6 text-center border-b border-gray-100",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-blue-50 text-blue-600 mb-3",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),d.jsx("h2",{className:"text-lg font-bold text-gray-800",children:" "}),d.jsx("p",{className:"text-xs text-gray-500",children:"       "})]}),d.jsx("div",{className:"p-8",children:g==="success"?d.jsxs(me.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},className:"flex flex-col items-center justify-center py-4",children:[d.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-3 text-green-600",children:d.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),d.jsx("h3",{className:"text-lg font-bold text-gray-800",children:" !"}),d.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):d.jsxs("form",{onSubmit:E,className:"flex flex-col items-center",children:[d.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8 text-3xl font-bold text-gray-700 font-mono tracking-wider bg-gray-100 px-6 py-4 rounded-xl border border-gray-200 select-none",children:[d.jsx("span",{children:i}),d.jsx("span",{className:"text-blue-500",children:"+"}),d.jsx("span",{children:l}),d.jsx("span",{className:"text-gray-400",children:"="}),d.jsx("span",{className:"text-gray-400",children:"?"})]}),d.jsxs(me.div,{className:"w-full relative mb-6",animate:g==="error"?{x:[-10,10,-10,10,0]}:{},transition:{duration:.4},children:[d.jsx("input",{ref:x,type:"number",value:h,onChange:j=>p(j.target.value),placeholder:" ",className:`w-full text-center text-xl font-bold py-3 rounded-lg border-2 focus:outline-none transition-all placeholder:text-gray-300 placeholder:font-normal placeholder:text-base
                                ${g==="error"?"border-red-400 bg-red-50 text-red-600 focus:border-red-500":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-50"}`,disabled:g==="verifying"}),g==="error"&&d.jsx("p",{className:"absolute -bottom-6 left-0 right-0 text-center text-xs text-red-500 font-medium",children:" ,   "})]}),d.jsx("button",{type:"submit",disabled:!h||g==="verifying",className:`w-full py-3 rounded-lg font-bold text-white transition-all shadow-md flex items-center justify-center gap-2
                            ${!h||g==="verifying"?"bg-gray-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 hover:shadow-lg active:scale-95"}`,children:g==="verifying"?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})," ..."]}):" "})]})}),g!=="success"&&d.jsx("div",{className:"bg-gray-50 p-4 text-center border-t border-gray-100",children:d.jsx("button",{onClick:e,className:"text-sm text-gray-500 hover:text-gray-700 font-medium",children:"  "})})]})]})})},Wg=({label:t,v1:e,v2:n,highlight:i=!1})=>d.jsxs("div",{className:`flex flex-col items-center justify-center p-2.5 sm:p-3 rounded-lg border ${i?"bg-white border-slate-200 shadow-sm":"bg-slate-50 border-slate-100"}`,children:[d.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2",children:t}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 w-full justify-center",children:[d.jsx("span",{className:`text-xs sm:text-sm font-bold truncate ${i?"text-slate-800":"text-slate-600"}`,children:e}),d.jsx("div",{className:"h-3 w-[1px] bg-slate-300"}),d.jsx("span",{className:`text-xs sm:text-sm font-bold truncate ${i?"text-slate-800":"text-slate-600"}`,children:n})]})]}),TT=({label:t,val1:e,val2:n})=>!e&&!n?null:d.jsxs("div",{className:"grid grid-cols-3 gap-2 py-3 border-b border-slate-100 items-center last:border-0 hover:bg-slate-50 transition-colors",children:[d.jsx("div",{className:"text-right px-2 text-xs font-medium text-slate-700 truncate",children:e||d.jsx("span",{className:"text-slate-300",children:"-"})}),d.jsx("div",{className:"flex justify-center",children:d.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase bg-slate-100 px-2 py-0.5 rounded border border-slate-200 whitespace-nowrap",children:t})}),d.jsx("div",{className:"text-left px-2 text-xs font-medium text-slate-700 truncate",children:n||d.jsx("span",{className:"text-slate-300",children:"-"})})]}),ET=({promises:t})=>d.jsxs("ul",{className:"space-y-2 mt-2",children:[t.slice(0,3).map((e,n)=>d.jsxs("li",{className:"text-[11px] text-slate-600 leading-relaxed flex gap-2 items-start",children:[d.jsx("span",{className:"text-slate-300 mt-1 text-[6px] flex-shrink-0",children:""}),d.jsx("span",{className:"opacity-90",children:e})]},n)),t.length>3&&d.jsxs("li",{className:"text-[10px] text-slate-400 italic pl-3",children:[" ",t.length-3,"..."]})]}),WC=({isOpen:t,onClose:e,candidates:n})=>{var V,q,B,K,oe,H,Z,R;const[i,a]=z.useState("stats");if(!t||n.length<2)return null;const[l,c]=n,h=l.vote_count||0,p=c.vote_count||0,g=h+p,v=g>0?h/g*100:0,x=g>0?p/g*100:0,w=Math.abs(h-p),E=S=>new Intl.NumberFormat("en-US").format(S),j=S=>S.toString().replace(/\d/g,N=>""[parseInt(N)]),M="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23CBD5E1'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z' /%3E%3C/svg%3E";return d.jsx(Ft,{children:t&&d.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",onClick:e,children:d.jsxs(me.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:S=>S.stopPropagation(),className:"bg-white w-full max-w-2xl max-h-[85vh] rounded-xl shadow-2xl overflow-hidden flex flex-col font-sans relative border border-slate-200",children:[d.jsxs("div",{className:"bg-white border-b border-slate-100 px-4 sm:px-6 py-3 flex justify-between items-center sticky top-0 z-30",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-base sm:text-lg font-bold text-slate-800",children:" "}),d.jsxs("p",{className:"text-[10px] text-slate-500 mt-0.5 flex items-center gap-1",children:[": ",d.jsx("span",{className:"font-semibold text-slate-700 bg-slate-100 px-1 rounded",children:l.district})]})]}),d.jsx("div",{className:"flex bg-slate-100 p-1 rounded-md border border-slate-200",children:["stats","profile"].map(S=>d.jsx("button",{onClick:()=>a(S),className:`px-3 py-1 rounded-[4px] text-[10px] font-bold transition-all ${i===S?"bg-white text-slate-800 shadow-sm ring-1 ring-slate-200":"text-slate-400 hover:text-slate-600"}`,children:S==="stats"?"":""},S))}),d.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-md bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-500 transition-colors border border-transparent hover:border-red-100",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto bg-slate-50/50",children:[d.jsx("div",{className:"pt-6 pb-4 px-4 sm:px-8 bg-white border-b border-slate-100",children:d.jsxs("div",{className:"grid grid-cols-2 gap-4 relative items-start",children:[d.jsx("div",{className:"absolute top-1/3 left-1/2 -translate-x-1/2 z-10",children:d.jsx("div",{className:"bg-slate-50 text-slate-300 font-black text-[10px] w-7 h-7 flex items-center justify-center rounded-md border border-slate-200",children:"VS"})}),d.jsxs("div",{className:"flex flex-col items-center text-center",children:[d.jsx("div",{className:"relative w-20 h-20 sm:w-24 sm:h-24 rounded-2xl bg-slate-100 mb-2 overflow-hidden border border-slate-200",children:d.jsx("img",{src:l.symbol_url,alt:l.name,onError:S=>S.currentTarget.src=M,className:"w-full h-full object-cover"})}),d.jsx("h3",{className:"text-sm font-bold text-slate-800 leading-tight px-1 line-clamp-1",children:l.name}),d.jsx("span",{className:"mt-1 text-[10px] text-slate-500 font-medium bg-slate-100 px-1.5 py-0.5 rounded border border-slate-200 truncate max-w-[100px]",children:l.party_name})]}),d.jsxs("div",{className:"flex flex-col items-center text-center",children:[d.jsx("div",{className:"relative w-20 h-20 sm:w-24 sm:h-24 rounded-2xl bg-slate-100 mb-2 overflow-hidden border border-slate-200",children:d.jsx("img",{src:c.symbol_url,alt:c.name,onError:S=>S.currentTarget.src=M,className:"w-full h-full object-cover"})}),d.jsx("h3",{className:"text-sm font-bold text-slate-800 leading-tight px-1 line-clamp-1",children:c.name}),d.jsx("span",{className:"mt-1 text-[10px] text-slate-500 font-medium bg-slate-100 px-1.5 py-0.5 rounded border border-slate-200 truncate max-w-[100px]",children:c.party_name})]})]})}),d.jsx("div",{className:"p-4 sm:p-5",children:i==="stats"?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"bg-white px-3 py-3 rounded-lg border border-slate-200 shadow-sm",children:[d.jsxs("div",{className:"flex justify-between text-[9px] font-bold text-slate-400 mb-1.5 uppercase",children:[d.jsxs("span",{children:[v.toFixed(1),"%"]}),d.jsx("span",{children:" "}),d.jsxs("span",{children:[x.toFixed(1),"%"]})]}),d.jsxs("div",{className:"h-2 bg-slate-100 rounded-sm overflow-hidden flex relative",children:[d.jsx("div",{className:"absolute left-1/2 w-[1px] h-full bg-white z-10"}),d.jsx(me.div,{initial:{width:0},animate:{width:`${v}%`},transition:{duration:1},className:"h-full bg-slate-600"}),d.jsx(me.div,{initial:{width:0},animate:{width:`${x}%`},transition:{duration:1},className:"h-full bg-slate-400"})]})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:[d.jsx(Wg,{label:" ",v1:E(h),v2:E(p),highlight:!0}),d.jsx(Wg,{label:"",v1:h>p?`+${E(w)}`:"-",v2:p>h?`+${E(w)}`:"-"}),d.jsx(Wg,{label:"",v1:l.rank===1?d.jsx("span",{className:"text-green-600",children:""}):d.jsx("span",{children:j(l.rank||0)}),v2:c.rank===1?d.jsx("span",{className:"text-green-600",children:""}):d.jsx("span",{children:j(c.rank||0)})})]})]}):d.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden shadow-sm",children:[d.jsxs("div",{className:"px-3",children:[d.jsx(TT,{label:"",val1:(V=l.profile)==null?void 0:V.education,val2:(q=c.profile)==null?void 0:q.education}),d.jsx(TT,{label:"",val1:(B=l.profile)==null?void 0:B.net_worth,val2:(K=c.profile)==null?void 0:K.net_worth})]}),d.jsxs("div",{className:"p-3 grid grid-cols-2 gap-3 border-t border-slate-100 bg-slate-50/30",children:[d.jsxs("div",{className:"bg-white rounded p-2.5 border border-slate-200",children:[d.jsxs("h4",{className:"text-[9px] font-bold text-slate-400 uppercase mb-2 border-b border-slate-50 pb-1",children:[" (",l.name.split(" ")[0],")"]}),(H=(oe=l.profile)==null?void 0:oe.promises)!=null&&H.length?d.jsx(ET,{promises:l.profile.promises}):d.jsx("span",{className:"text-[10px] text-slate-400 italic",children:" "})]}),d.jsxs("div",{className:"bg-white rounded p-2.5 border border-slate-200",children:[d.jsxs("h4",{className:"text-[9px] font-bold text-slate-400 uppercase mb-2 border-b border-slate-50 pb-1",children:[" (",c.name.split(" ")[0],")"]}),(R=(Z=c.profile)==null?void 0:Z.promises)!=null&&R.length?d.jsx(ET,{promises:c.profile.promises}):d.jsx("span",{className:"text-[10px] text-slate-400 italic",children:" "})]})]})]})})]})]})})})},_U=({userProfile:t})=>{const{refreshUserProfile:e}=To(),[n,i]=z.useState([]),[a,l]=z.useState([]),[c,h]=z.useState(!1),[p,g]=z.useState(!1),[v,x]=z.useState(!1),[w,E]=z.useState(!1),[j,M]=z.useState(null),V=t.voting_status.has_voted;z.useEffect(()=>{var R;(async()=>{E(!0);const S=await Ol(t.district);i(S),E(!1)})();const Z=((R=t.security.last_human_verify_ts)==null?void 0:R.toMillis())||0;new Date().getTime()-Z>2880*60*1e3&&h(!0)},[t]);const q=H=>{l(Z=>Z.includes(H)?Z.filter(R=>R!==H):Z.length>=2?[Z[1],H]:[...Z,H])},B=async()=>{if(M(null),!V){if(a.length!==1){M({type:"error",text:"        "});return}if(c){g(!0);return}E(!0);try{await Y6(t,a[0]),e(),M({type:"success",text:"    !"})}catch(H){M({type:"error",text:H.message||"   "})}finally{E(!1)}}},K=async()=>{await K6(t.uid),h(!1),g(!1),e(),M({type:"success",text:"  "})},oe=()=>{if(a.length!==2)return null;const H=n.find(R=>R.id===a[0]),Z=n.find(R=>R.id===a[1]);return H&&Z?[H,Z]:null};return d.jsxs("div",{className:"relative space-y-5",children:[(j||V)&&d.jsx(me.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`px-4 py-3 rounded-lg text-center text-sm font-medium flex items-center justify-center gap-2 
                ${(j==null?void 0:j.type)==="success"||V?"bg-green-50 text-green-700 border border-green-100":"bg-red-50 text-red-700 border border-red-100"}`,children:(j==null?void 0:j.type)==="success"||V?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-5 h-5 bg-green-200 rounded-full flex items-center justify-center",children:d.jsx("svg",{className:"w-3 h-3 text-green-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),V?"    !":j==null?void 0:j.text]}):d.jsxs(d.Fragment,{children:[" ",j==null?void 0:j.text]})}),d.jsxs("div",{className:"flex justify-between items-center px-1",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-gray-800",children:" "}),d.jsx("p",{className:"text-xs text-gray-500",children:"   (    )"})]}),d.jsxs("div",{className:"text-xs font-semibold bg-gray-100 px-3 py-1 rounded-md text-gray-600",children:[a.length," / 2 "]})]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:w?[1,2,3,4].map(H=>d.jsxs("div",{className:"p-3 rounded-xl border border-gray-100 bg-white flex items-center gap-3 animate-pulse",children:[d.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200"}),d.jsxs("div",{className:"space-y-2 w-full",children:[d.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),d.jsx("div",{className:"h-2 bg-gray-200 rounded w-1/3"})]})]},H)):n.map(H=>{const Z=a.includes(H.id),R=V&&t.voting_status.voted_candidate_id===H.id;return d.jsxs(me.div,{onClick:()=>q(H.id),whileHover:{scale:1.01},whileTap:{scale:.99},className:`relative p-3 rounded-xl border cursor-pointer transition-all flex items-center gap-3 group ${Z?"border-electionGreen/50 bg-green-50/40 ring-1 ring-electionGreen/20 shadow-sm":R?"border-gray-300 bg-gray-50/80 ring-2 ring-gray-100":"border-gray-100 hover:border-gray-300 bg-white hover:bg-gray-50"}`,children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:H.symbol_url,alt:H.party_name,className:"w-14 h-14 rounded-full object-cover border border-gray-100 bg-white p-0.5"}),Z&&d.jsx("div",{className:"absolute -bottom-1 -right-1 bg-electionGreen text-white rounded-full p-0.5 border-2 border-white",children:d.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 13l4 4L19 7"})})}),R&&!Z&&d.jsx("div",{className:"absolute -bottom-1 -right-1 bg-gray-600 text-white rounded-full p-0.5 border-2 border-white",children:d.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M5 13l4 4L19 7"})})})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("h4",{className:`text-base font-bold truncate ${Z?"text-electionGreen":"text-gray-800"}`,children:[H.name,R&&d.jsx("span",{className:"ml-2 text-[10px] bg-gray-200 text-gray-600 px-1.5 py-0.5 rounded",children:" "})]}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:H.party_name})]}),d.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center transition-colors ${Z?"border-electionGreen bg-electionGreen":"border-gray-200 group-hover:border-gray-300"}`,children:Z&&d.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]},H.id)})}),d.jsxs(me.div,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},className:"flex gap-3 pt-2",children:[d.jsxs("button",{onClick:()=>x(!0),disabled:a.length!==2,className:"flex-1 py-3 px-4 rounded-lg font-semibold text-sm text-gray-700 bg-white border border-gray-200 hover:bg-gray-50 hover:border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2 shadow-sm",children:[d.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),""]}),d.jsx("button",{onClick:B,disabled:a.length!==1||w||V,className:`flex-[2] py-3 px-4 rounded-lg font-bold text-sm text-white transition-all flex items-center justify-center gap-2
                    ${V?"bg-gray-400 cursor-not-allowed":"bg-electionGreen hover:bg-green-700 hover:shadow-md disabled:opacity-70 disabled:cursor-not-allowed"}`,children:w?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})," "]}):V?d.jsxs(d.Fragment,{children:["  ",d.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]}):d.jsxs(d.Fragment,{children:[" ",d.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})})]}),d.jsx(bU,{isOpen:p,onClose:()=>g(!1),onVerified:K}),oe()&&d.jsx(WC,{isOpen:v,onClose:()=>x(!1),candidates:oe()})]})},ST=({label:t,count:e,total:n,color:i})=>{const a=n>0?e/n*100:0;return d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between items-end mb-2",children:[d.jsx("span",{className:"font-medium text-gray-700 text-sm",children:t}),d.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[Math.round(a),"%"]})]}),d.jsx("div",{className:"w-full bg-gray-100 rounded-full h-3 overflow-hidden shadow-inner",children:d.jsx(me.div,{className:`h-full rounded-full ${i}`,initial:{width:0},animate:{width:`${a}%`},transition:{duration:1.5,ease:[.22,1,.36,1]}})}),d.jsxs("p",{className:"text-xs text-right text-gray-400 mt-1 font-medium",children:[e.toLocaleString("bn-BD")," "]})]})},wU=()=>{const[t,e]=z.useState([]),[n,i]=z.useState(0),[a,l]=z.useState({}),[c,h]=z.useState(!1);z.useEffect(()=>{(async()=>{const j=await JA();e(j)})();const E=localStorage.getItem("votedPolls");E&&l(JSON.parse(E))},[]);const p=async w=>{const E=t[n];if(!(!E||a[E.id]||c)){h(!0);try{e(M=>M.map((V,q)=>q===n?{...V,yes_count:w==="yes"?V.yes_count+1:V.yes_count,no_count:w==="no"?V.no_count+1:V.no_count}:V)),await Z6(E.id,w);const j={...a,[E.id]:!0};l(j),localStorage.setItem("votedPolls",JSON.stringify(j))}catch(j){console.error("Poll vote failed",j)}finally{h(!1)}}},g=t[n];if(!g)return d.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-100 h-full flex flex-col justify-center items-center text-gray-400",children:[d.jsx("div",{className:"bg-gray-50 p-4 rounded-full mb-4",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),d.jsx("p",{className:"font-medium",children:"    "})]});const v=g.yes_count+g.no_count,x=a[g.id];return d.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100 h-full relative overflow-hidden flex flex-col",children:[d.jsx("div",{className:"absolute top-0 right-0 -mt-6 -mr-6 w-32 h-32 bg-gradient-to-br from-green-50 to-emerald-100 rounded-full opacity-50 blur-2xl pointer-events-none"}),d.jsxs("div",{className:"relative z-10 mb-auto",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("span",{className:"bg-electionGreen/10 text-electionGreen p-1.5 rounded-lg",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[d.jsx("path",{d:"M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"}),d.jsx("path",{d:"M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"})]})}),d.jsx("h3",{className:"text-lg font-bold text-gray-800",children:" "})]}),d.jsx("p",{className:"text-sm text-gray-500 mb-6 ml-9",children:"    "}),d.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-8 leading-snug",children:g.question}),d.jsx(Ft,{mode:"wait",children:x?d.jsxs(me.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-gray-50/80 p-5 rounded-2xl border border-gray-100 backdrop-blur-sm",children:[d.jsx(ST,{label:", ",count:g.yes_count,total:v,color:"bg-gradient-to-r from-emerald-500 to-emerald-600"}),d.jsx(ST,{label:", ",count:g.no_count,total:v,color:"bg-gradient-to-r from-rose-500 to-rose-600"}),d.jsxs(me.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.5},className:"flex items-center justify-center gap-2 text-xs text-emerald-700 font-bold mt-4 bg-emerald-100/50 py-2 rounded-lg",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"    "]})]},"results"):d.jsxs(me.div,{exit:{opacity:0,y:-10},className:"grid grid-cols-2 gap-4",children:[d.jsxs(me.button,{whileHover:{scale:1.03,y:-2},whileTap:{scale:.97},onClick:()=>p("yes"),disabled:c,className:"flex flex-col items-center justify-center p-6 rounded-2xl border-2 border-emerald-100 bg-white hover:bg-emerald-50 hover:border-emerald-300 shadow-sm hover:shadow-md transition-all group",children:[d.jsx("span",{className:"text-3xl mb-2 group-hover:scale-110 transition-transform duration-300",children:""}),d.jsx("span",{className:"font-bold text-emerald-800",children:""})]}),d.jsxs(me.button,{whileHover:{scale:1.03,y:-2},whileTap:{scale:.97},onClick:()=>p("no"),disabled:c,className:"flex flex-col items-center justify-center p-6 rounded-2xl border-2 border-rose-100 bg-white hover:bg-rose-50 hover:border-rose-300 shadow-sm hover:shadow-md transition-all group",children:[d.jsx("span",{className:"text-3xl mb-2 group-hover:scale-110 transition-transform duration-300",children:""}),d.jsx("span",{className:"font-bold text-rose-800",children:""})]})]},"buttons")})]}),t.length>1&&d.jsx("div",{className:"flex justify-center gap-2 mt-8 pt-4 border-t border-gray-100",children:t.map((w,E)=>d.jsx("button",{onClick:()=>i(E),className:`h-1.5 rounded-full transition-all duration-300 ${E===n?"bg-electionGreen w-8":"bg-gray-200 w-2 hover:bg-gray-300"}`},E))})]})},Xg=()=>d.jsxs("div",{className:"p-4 bg-white rounded-xl border border-gray-100 animate-pulse",children:[d.jsxs("div",{className:"flex justify-between mb-2",children:[d.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),d.jsx("div",{className:"h-6 bg-gray-200 rounded-full w-16"})]}),d.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mt-2"})]}),TU=({status:t})=>{const e=t==="true";return d.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide border ${e?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-rose-50 text-rose-700 border-rose-200"}`,children:[d.jsx("span",{className:`w-2 h-2 rounded-full ${e?"bg-emerald-500":"bg-rose-500"}`}),e?"":""]})},EU=()=>{const[t,e]=z.useState([]),[n,i]=z.useState("all"),[a,l]=z.useState(!0);return z.useEffect(()=>{(async()=>{l(!0);const h=await ZA(n);e(h),l(!1)})()},[n]),d.jsxs(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-0 rounded-2xl shadow-lg overflow-hidden border border-gray-100 flex flex-col h-full",children:[d.jsxs("div",{className:"p-6 border-b border-gray-100 bg-gray-50/50 flex flex-col sm:flex-row justify-between items-center gap-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:"   "}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"    "})]}),d.jsx("div",{className:"flex bg-gray-200/60 p-1 rounded-lg",children:["all","true","fake"].map(c=>d.jsx("button",{onClick:()=>i(c),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all duration-200 ${n===c?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:c==="all"?"":c==="true"?"":""},c))})]}),d.jsx("div",{className:"p-6 overflow-y-auto max-h-[500px] bg-gray-50/30 scrollbar-thin scrollbar-thumb-gray-200",children:a?d.jsxs("div",{className:"space-y-4",children:[d.jsx(Xg,{}),d.jsx(Xg,{}),d.jsx(Xg,{})]}):d.jsx("div",{className:"space-y-4",children:d.jsx(Ft,{mode:"popLayout",children:t.length>0?t.map(c=>d.jsxs(me.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"group bg-white p-5 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-all duration-300 relative overflow-hidden",children:[d.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${c.status==="true"?"bg-emerald-500":"bg-rose-500"}`}),d.jsxs("div",{className:"flex justify-between items-start gap-4",children:[d.jsx("h4",{className:"text-base font-semibold text-gray-800 leading-snug group-hover:text-primary transition-colors",children:c.headline}),d.jsx(TU,{status:c.status})]}),d.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs text-gray-500 border-t border-gray-50 pt-3",children:[d.jsxs("span",{className:"flex items-center gap-1 bg-gray-100 px-2 py-1 rounded",children:[" : ",c.source]}),d.jsx("button",{className:"text-primary font-medium hover:underline",children:" "})]})]},c.id)):d.jsx("div",{className:"text-center py-10 text-gray-400",children:d.jsx("p",{children:"   "})})})})})]})},SU=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:d.jsx("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"})}),AU=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4 text-yellow-500",children:d.jsx("path",{fillRule:"evenodd",d:"M9 4.5a.75.75 0 01.721.544l.813 2.846a3.75 3.75 0 002.576 2.576l2.846.813a.75.75 0 010 1.442l-2.846.813a3.75 3.75 0 00-2.576 2.576l-.813 2.846a.75.75 0 01-1.442 0l-.813-2.846a3.75 3.75 0 00-2.576-2.576l-2.846-.813a.75.75 0 010-1.442l2.846-.813a3.75 3.75 0 002.576-2.576l.813-2.846A.75.75 0 019 4.5zM6.97 14.12a.75.75 0 011.06 0l10.5 10.5a.75.75 0 01-1.06 1.06l-10.5-10.5a.75.75 0 010-1.06zm9.73-9.73a.75.75 0 011.06 0l1.5 1.5a.75.75 0 01-1.06 1.06l-1.5-1.5a.75.75 0 010-1.06z",clipRule:"evenodd"})}),NU=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-6 h-6",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),CU=({onSelect:t})=>{const e=["  ","- ","  "," "];return d.jsx("div",{className:"flex gap-2 px-4 py-3 overflow-x-auto no-scrollbar mask-gradient",children:e.map((n,i)=>d.jsx("button",{onClick:()=>t(n),className:"whitespace-nowrap bg-white border border-green-100 text-green-700 text-xs font-medium px-3 py-1.5 rounded-full shadow-sm hover:bg-green-50 hover:border-green-300 transition-all hover:scale-105 active:scale-95",children:n},i))})},RU=({data:t})=>d.jsxs("div",{className:"bg-white p-3.5 rounded-2xl shadow-sm border border-gray-100 my-2 w-full overflow-hidden relative",children:[d.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-green-50 to-transparent rounded-bl-3xl -z-0"}),d.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[d.jsx("div",{className:"w-12 h-12 rounded-full bg-white border-2 border-gray-50 shadow-inner p-1 flex-shrink-0 flex items-center justify-center",children:t.symbol_url?d.jsx("img",{src:t.symbol_url,alt:"symbol",className:"w-full h-full object-contain rounded-full"}):d.jsx("span",{className:"text-xl",children:""})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsx("h4",{className:"font-bold text-gray-800 text-base truncate pr-2",children:t.name}),d.jsx("span",{className:`px-2 py-0.5 rounded-md text-[10px] font-bold shrink-0 ${t.rank===1?"bg-yellow-100 text-yellow-700 border border-yellow-200":"bg-gray-100 text-gray-500"}`,children:t.rank===1?" ":`#${t.rank}`})]}),d.jsxs("p",{className:"text-xs text-gray-500 font-medium truncate",children:[t.party_name,"  ",t.district]})]})]}),d.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-center",children:[d.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 border border-gray-100",children:[d.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider",children:" "}),d.jsx("p",{className:"text-sm font-bold text-electionGreen",children:t.vote_count.toLocaleString()})]}),d.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 border border-gray-100",children:[d.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider",children:""}),d.jsx("p",{className:"text-sm font-bold text-gray-700",children:t.rank===1?"":`${t.rank}`})]})]})]}),jU=({message:t})=>{const e=t.isUser;return d.jsx(me.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},className:`flex ${e?"justify-end":"justify-start"} mb-4`,children:d.jsxs("div",{className:`max-w-[85%] ${e?"":"w-full md:max-w-[80%]"}`,children:[d.jsxs("div",{className:`px-4 py-3 shadow-sm text-sm leading-relaxed ${e?"bg-gradient-to-br from-electionGreen to-green-700 text-white rounded-2xl rounded-br-none":t.type==="text"?"bg-white border border-gray-100 text-gray-800 rounded-2xl rounded-bl-none":"bg-transparent pl-0 pt-0"}`,children:[t.type==="text"&&d.jsx("div",{className:"whitespace-pre-line",children:t.content}),t.type==="candidate-card"&&d.jsx(RU,{data:t.content})]}),!e&&t.type!=="text"&&d.jsxs("div",{className:"text-[10px] text-gray-400 mt-1.5 ml-1 flex items-center gap-1.5 font-medium",children:[d.jsx(AU,{})," AI Analysis"]})]})})},IU=()=>d.jsx("div",{className:"flex justify-start mb-4",children:d.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl rounded-bl-none px-4 py-3 flex items-center gap-2 shadow-sm",children:[d.jsxs("div",{className:"flex gap-1 h-3 items-center",children:[d.jsx(me.span,{animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{repeat:1/0,duration:1},className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),d.jsx(me.span,{animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{repeat:1/0,duration:1,delay:.2},className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),d.jsx(me.span,{animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{repeat:1/0,duration:1,delay:.4},className:"w-1.5 h-1.5 bg-green-500 rounded-full"})]}),d.jsx("span",{className:"text-xs text-gray-400 font-medium tracking-wide",children:"   ..."})]})}),DU=({onToggle:t})=>{const[e,n]=z.useState(!1),[i,a]=z.useState(""),[l,c]=z.useState([{id:"welcome",type:"text",content:` !    
    ,      `,isUser:!1,timestamp:new Date}]),[h,p]=z.useState(!1),[g,v]=z.useState([]),[x,w]=z.useState(!1),E=z.useRef(null),j=z.useRef(null);z.useEffect(()=>{var H;(H=E.current)==null||H.scrollIntoView({behavior:"smooth"})},[l,h,e]),z.useEffect(()=>{e&&setTimeout(()=>{var H;return(H=j.current)==null?void 0:H.focus()},300)},[e]),z.useEffect(()=>{t&&t(e)},[e,t]),z.useEffect(()=>{e&&!x&&(async()=>{try{const Z=await ev();v(Z),w(!0)}catch(Z){console.error("AI Helper Error",Z)}})()},[e,x]);const M=H=>H.replace(/[-]/g,Z=>"0123456789"["".indexOf(Z)]),V=H=>M(H).toLowerCase().replace(/[,.?]/g,"").replace(/[-_]/g," ").replace(/\s+/g," ").trim(),q=(H,Z)=>{H=H.toLowerCase(),Z=Z.toLowerCase();const R=new Array;for(let S=0;S<=H.length;S++){let N=S;for(let k=0;k<=Z.length;k++)if(S===0)R[k]=k;else if(k>0){let D=R[k-1];H.charAt(S-1)!==Z.charAt(k-1)&&(D=Math.min(Math.min(D,N),R[k])+1),R[k-1]=N,N=D}S>0&&(R[Z.length]=N)}return R[Z.length]},B=(H,Z)=>{let R=H,S=Z;H.length<Z.length&&(R=Z,S=H);const N=R.length;return N===0?1:(N-q(R,S))/parseFloat(N.toString())},K=H=>{const Z=V(H),R=(X,ue="text")=>({id:Date.now().toString(),type:ue,content:X,isUser:!1,timestamp:new Date});if(g.length===0)return R("  ,    ...");const S=Array.from(new Set(g.map(X=>{const ue=V(X.district).match(/([^\d]+)/);return ue?ue[1].trim():""}))).filter(X=>X.length>0);let N="",k="";const D=Z.match(/(\d+)/);if(D){k=D[1];const X=S.find(ue=>Z.includes(ue));if(X)N=X;else{const ue=S.find(be=>B(be,Z.replace(k,"").trim())>.85);ue&&(N=ue)}}if(N&&k){const X=g.filter(ue=>{const be=V(ue.district);return be.includes(N)&&be.includes(k)});if(X.length>0){X.sort((L,re)=>re.vote_count-L.vote_count);const ue=X[0],be=X.length>1?X[1]:null;let we=` **: ${ue.district}**

`;if(we+=` **:** ${ue.name}
`,we+=` : ${ue.party_name}
`,we+=`  : **${ue.vote_count.toLocaleString()}**

`,be){const L=ue.vote_count-be.vote_count;we+=` **:** ${be.name} (${be.party_name})
`,we+=` **:** ${L.toLocaleString()} `}return R(we)}}let O=null,I=0;if(g.forEach(X=>{const ue=V(X.name),be=ue.includes(Z)||Z.includes(ue),we=B(ue,Z),L=be?H.length>3?.95:.8:we;L>I&&(I=L,O=X)}),I>.65){const X=O,ue=g.filter(we=>we.district===X.district);ue.sort((we,L)=>L.vote_count-we.vote_count);const be=ue.findIndex(we=>we.id===X.id)+1;return R({...X,rank:be},"candidate-card")}const te=Array.from(new Set(g.map(X=>X.party_name)));let Re="",ee=0;if(te.forEach(X=>{const ue=V(X),be=ue.includes(Z)||Z.includes(ue),we=B(ue,Z),L=be?.9:we;L>ee&&(ee=L,Re=X)}),ee>.75){const X=g.filter(we=>we.party_name===Re),ue=X.reduce((we,L)=>we+L.vote_count,0),be=X.filter(we=>{const L=g.filter(re=>re.district===we.district);return L.sort((re,ye)=>ye.vote_count-re.vote_count),L[0].id===we.id}).length;return R(` ** : ${Re}**

  : ${X.length} 
  : **${be}**  
   : ${ue.toLocaleString()}
`)}if(["mot","total","","","caster","voter"].some(X=>Z.includes(X))){const X=g.reduce((ue,be)=>ue+be.vote_count,0);return R(` ** :**

       :
**${X.toLocaleString()}**`)}return R(`,   
 :
   (: ' ')
   (: ' ')
  `)},oe=(H=i)=>{H.trim()&&(c(Z=>[...Z,{id:Date.now().toString(),type:"text",content:H,isUser:!0,timestamp:new Date}]),a(""),p(!0),setTimeout(()=>{let Z;x?Z=K(H):Z={id:"sys",type:"text",content:"  ...     ",isUser:!1,timestamp:new Date},c(R=>[...R,Z]),p(!1)},600))};return d.jsxs(d.Fragment,{children:[d.jsx(Ft,{children:!e&&d.jsx(me.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:-180},className:"fixed bottom-6 right-6 z-50",children:d.jsxs(me.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(!0),className:"relative group bg-gradient-to-r from-electionGreen to-green-800 text-white w-14 h-14 md:w-16 md:h-16 rounded-full shadow-2xl flex items-center justify-center border-[3px] border-white ring-4 ring-green-500/20",children:[d.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3.5 w-3.5",children:[d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),d.jsx("span",{className:"relative inline-flex rounded-full h-3.5 w-3.5 bg-red-500 border-2 border-white"})]}),d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 md:h-8 md:w-8 group-hover:animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})]})})}),d.jsx(Ft,{children:e&&d.jsx(me.div,{initial:{opacity:0,y:100,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.9},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 z-50 w-full md:w-[380px] h-[100dvh] md:h-[600px] max-h-[100dvh]",children:d.jsxs("div",{className:"h-full flex flex-col bg-white md:rounded-3xl shadow-2xl overflow-hidden border border-gray-100 font-sans",children:[d.jsxs("div",{className:"bg-gradient-to-r from-electionGreen to-green-800 p-4 flex justify-between items-center text-white shadow-md z-10",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 bg-white/10 backdrop-blur-md rounded-full flex items-center justify-center border border-white/20 shadow-inner",children:d.jsx("span",{className:"text-xl",children:""})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-lg leading-tight",children:"Election AI"}),d.jsxs("p",{className:"text-[10px] text-green-100 flex items-center gap-1 opacity-90 font-medium",children:[d.jsx("span",{className:"w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"}),"Live Assistant"]})]})]}),d.jsx("button",{onClick:()=>n(!1),className:"p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors backdrop-blur-sm",children:d.jsx(NU,{})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50/80 scroll-smooth",children:[d.jsx("div",{className:"space-y-2",children:l.map(H=>d.jsx(jU,{message:H},H.id))}),h&&d.jsx(IU,{}),d.jsx("div",{ref:E,className:"h-2"})]}),d.jsxs("div",{className:"bg-white border-t border-gray-100 pb-2",children:[d.jsx("div",{className:"py-2",children:d.jsx(CU,{onSelect:oe})}),d.jsx("div",{className:"px-3 pb-3 pt-0 flex gap-2 items-center",children:d.jsxs("div",{className:"flex-1 relative group",children:[d.jsx("input",{ref:j,type:"text",value:i,onChange:H=>a(H.target.value),onKeyDown:H=>H.key==="Enter"&&oe(),placeholder:"  ...",className:"w-full bg-gray-100 text-gray-800 text-sm rounded-full pl-5 pr-12 py-3.5 focus:outline-none focus:ring-2 focus:ring-electionGreen/20 transition-all border border-transparent focus:border-green-200 focus:bg-white placeholder-gray-400"}),d.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:d.jsx("button",{onClick:()=>oe(),disabled:!i.trim()||h,className:`p-2 rounded-full transition-all duration-300 ${i.trim()?"bg-electionGreen text-white shadow-lg hover:scale-110 active:scale-95":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:d.jsx(SU,{})})})]})})]})]})})})]})},VU=()=>d.jsxs("div",{className:"flex items-center p-3 sm:p-4 rounded-xl border border-gray-100 bg-gray-50/50",children:[d.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-gray-200 rounded-full mr-3 sm:mr-4 animate-pulse"}),d.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gray-200 rounded-xl mr-3 sm:mr-4 animate-pulse"}),d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 rounded w-3/4 animate-pulse"}),d.jsx("div",{className:"h-2 sm:h-3 bg-gray-200 rounded w-1/2 animate-pulse"})]})]}),MU=({rank:t})=>{const e="w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center rounded-full border shadow-sm text-sm sm:text-lg";return t===1?d.jsx("div",{className:`${e} bg-yellow-100 text-yellow-600 border-yellow-200`,children:""}):t===2?d.jsx("div",{className:`${e} bg-gray-100 text-gray-600 border-gray-200`,children:""}):t===3?d.jsx("div",{className:`${e} bg-orange-100 text-orange-600 border-orange-200`,children:""}):d.jsxs("span",{className:"w-6 sm:w-8 text-center text-xs sm:text-sm font-bold text-gray-400 font-mono",children:["#",t]})},kU=()=>{const[t,e]=z.useState([]),[n,i]=z.useState(!0);z.useEffect(()=>{(async()=>{i(!0);try{const[h,p]=await Promise.all([ev(),nv()]),g=new Map;h.forEach(x=>{const w=g.get(x.party_name)||0;g.set(x.party_name,w+x.vote_count)});const v=Array.from(g.entries()).map(([x,w])=>{const E=p.find(j=>j.name===x);return{party_name:x,total_votes:w,symbol_url:(E==null?void 0:E.symbol_url)||"https://via.placeholder.com/50"}});v.sort((x,w)=>w.total_votes-x.total_votes),e(v)}catch(h){console.error("Failed to load rankings",h)}finally{i(!1)}})()},[]);const a=z.useMemo(()=>t.reduce((c,h)=>c+h.total_votes,0),[t]),l=c=>c===0?"bg-gradient-to-r from-yellow-50 to-white border-yellow-200 shadow-md":c===1?"bg-gradient-to-r from-gray-50 to-white border-gray-200 shadow-sm":c===2?"bg-gradient-to-r from-orange-50 to-white border-orange-200 shadow-sm":"bg-white border-gray-100 hover:border-gray-200 hover:bg-gray-50";return d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 h-full overflow-hidden flex flex-col",children:[d.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-100 bg-white sticky top-0 z-10",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 flex items-center gap-2",children:[d.jsx("span",{className:"p-1.5 sm:p-2 bg-green-100 rounded-lg text-green-600",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"})})})," "]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 mt-1 ml-9 sm:ml-11",children:"   "})]}),d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 bg-red-50 px-2 sm:px-3 py-1 sm:py-1.5 rounded-full border border-red-100",children:[d.jsxs("span",{className:"relative flex h-2 w-2 sm:h-2.5 sm:w-2.5",children:[d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),d.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 sm:h-2.5 sm:w-2.5 bg-red-500"})]}),d.jsx("span",{className:"text-[10px] sm:text-xs font-bold text-red-600 tracking-wide uppercase",children:""})]})]})}),d.jsx("div",{className:"p-3 sm:p-4 flex-1 overflow-y-auto custom-scrollbar",children:n?d.jsx("div",{className:"space-y-3",children:[1,2,3,4].map(c=>d.jsx(VU,{},c))}):d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[t.map((c,h)=>{const p=a>0?c.total_votes/a*100:0;let g=null;return h===0?g={text:"1st",bg:"bg-yellow-400"}:h===1?g={text:"2nd",bg:"bg-gray-400"}:h===2&&(g={text:"3rd",bg:"bg-orange-400"}),d.jsxs(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:h*.05},className:`group relative flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-300 ${l(h)}`,children:[d.jsx("div",{className:"mr-2 sm:mr-4 flex-shrink-0",children:d.jsx(MU,{rank:h+1})}),d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:c.symbol_url,alt:c.party_name,className:"w-10 h-10 sm:w-14 sm:h-14 rounded-xl border border-gray-100 p-0.5 sm:p-1 object-contain bg-white mr-3 sm:mr-4 shadow-sm group-hover:scale-105 transition-transform duration-300"}),g&&d.jsx("div",{className:`absolute -top-1 -right-1 sm:-top-2 sm:-right-2 ${g.bg} text-white text-[8px] sm:text-[10px] font-bold px-1 sm:px-1.5 py-0.5 rounded-full shadow-sm`,children:g.text})]}),d.jsxs("div",{className:"flex-grow min-w-0",children:[d.jsxs("div",{className:"flex justify-between items-end mb-1 sm:mb-2",children:[d.jsxs("div",{className:"min-w-0 mr-2",children:[d.jsx("h4",{className:`text-sm sm:text-base font-bold truncate ${h===0?"text-gray-900":"text-gray-700"}`,children:c.party_name}),d.jsx("div",{className:"hidden sm:block text-xs text-gray-500 mt-0.5 font-medium",children:"  "})]}),d.jsx("div",{className:"text-right flex-shrink-0",children:d.jsx("span",{className:`block text-sm sm:text-lg font-bold ${h===0?"text-green-600":"text-gray-800"}`,children:c.total_votes.toLocaleString("bn-BD")})})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[d.jsx("div",{className:"flex-grow bg-gray-100 rounded-full h-1.5 sm:h-2 overflow-hidden",children:d.jsx(me.div,{className:`h-full rounded-full ${h===0?"bg-gradient-to-r from-yellow-400 to-yellow-600":"bg-gradient-to-r from-green-500 to-emerald-600"}`,initial:{width:0},animate:{width:`${p}%`},transition:{duration:1.2,ease:"easeOut"}})}),d.jsxs("span",{className:"text-[10px] sm:text-xs font-bold text-gray-500 w-8 sm:w-10 text-right",children:[p.toFixed(1),"%"]})]})]})]},c.party_name)}),t.length===0&&d.jsx("div",{className:"flex flex-col items-center justify-center py-8 sm:py-10 text-center",children:d.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"     "})})]})})]})},OU=()=>d.jsxs("div",{className:"flex items-center p-3 sm:p-4 rounded-xl border border-gray-100 bg-gray-50/50",children:[d.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-gray-200 rounded-full mr-3 sm:mr-4 animate-pulse"}),d.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gray-200 rounded-xl mr-3 sm:mr-4 animate-pulse"}),d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 rounded w-3/4 animate-pulse"}),d.jsx("div",{className:"h-2 sm:h-3 bg-gray-200 rounded w-1/2 animate-pulse"})]})]}),PU=({rank:t})=>{const e="w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center rounded-full border shadow-sm text-sm sm:text-lg";return t===1?d.jsx("div",{className:`${e} bg-yellow-100 text-yellow-600 border-yellow-200`,children:""}):t===2?d.jsx("div",{className:`${e} bg-gray-100 text-gray-600 border-gray-200`,children:""}):t===3?d.jsx("div",{className:`${e} bg-orange-100 text-orange-600 border-orange-200`,children:""}):d.jsxs("span",{className:"w-6 sm:w-8 text-center text-xs sm:text-sm font-bold text-gray-400 font-mono",children:["#",t]})},LU=({userDistrict:t})=>{const[e,n]=z.useState([]),[i,a]=z.useState(!0);z.useEffect(()=>{(async()=>{a(!0);try{const p=await Ol(t);n(p)}catch(p){console.error("Failed to load district candidates",p)}finally{a(!1)}})()},[t]);const l=z.useMemo(()=>e.reduce((h,p)=>h+p.vote_count,0),[e]),c=h=>h===0?"bg-gradient-to-r from-yellow-50 to-white border-yellow-200 shadow-md":h===1?"bg-gradient-to-r from-gray-50 to-white border-gray-200 shadow-sm":h===2?"bg-gradient-to-r from-orange-50 to-white border-orange-200 shadow-sm":"bg-white border-gray-100 hover:border-gray-200 hover:bg-gray-50";return d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 h-full overflow-hidden flex flex-col",children:[d.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-100 bg-white sticky top-0 z-10",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 flex items-center gap-2",children:[d.jsx("span",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-lg text-blue-600",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),": ",t]}),d.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 mt-1 ml-9 sm:ml-11",children:"   "})]}),d.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 bg-red-50 px-2 sm:px-3 py-1 sm:py-1.5 rounded-full border border-red-100",children:[d.jsxs("span",{className:"relative flex h-2 w-2 sm:h-2.5 sm:w-2.5",children:[d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),d.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 sm:h-2.5 sm:w-2.5 bg-red-500"})]}),d.jsx("span",{className:"text-[10px] sm:text-xs font-bold text-red-600 tracking-wide uppercase",children:""})]})]})}),d.jsx("div",{className:"p-3 sm:p-4 flex-1 overflow-y-auto custom-scrollbar",children:i?d.jsx("div",{className:"space-y-3",children:[1,2,3].map(h=>d.jsx(OU,{},h))}):d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.map((h,p)=>{const g=l>0?h.vote_count/l*100:0;let v=null;return p===0?v={text:"1st",bg:"bg-yellow-400"}:p===1?v={text:"2nd",bg:"bg-gray-400"}:p===2&&(v={text:"3rd",bg:"bg-orange-400"}),d.jsxs(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:p*.05},className:`group relative flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-300 ${c(p)}`,children:[d.jsx("div",{className:"mr-2 sm:mr-4 flex-shrink-0",children:d.jsx(PU,{rank:p+1})}),d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:h.symbol_url,alt:h.party_name,className:"w-10 h-10 sm:w-14 sm:h-14 rounded-xl border border-gray-100 p-0.5 sm:p-1 object-cover bg-white mr-3 sm:mr-4 shadow-sm group-hover:scale-105 transition-transform duration-300"}),v&&d.jsx("div",{className:`absolute -top-1 -right-1 sm:-top-2 sm:-right-2 ${v.bg} text-white text-[8px] sm:text-[10px] font-bold px-1 sm:px-1.5 py-0.5 rounded-full shadow-sm`,children:v.text})]}),d.jsxs("div",{className:"flex-grow min-w-0",children:[d.jsxs("div",{className:"flex justify-between items-end mb-1 sm:mb-2",children:[d.jsxs("div",{className:"min-w-0 mr-2",children:[d.jsx("h4",{className:`text-sm sm:text-base font-bold truncate ${p===0?"text-gray-900":"text-gray-700"}`,children:h.name}),d.jsx("div",{className:"text-[10px] sm:text-xs text-gray-500 font-medium truncate",children:h.party_name})]}),d.jsx("div",{className:"text-right flex-shrink-0",children:d.jsx("span",{className:`block text-sm sm:text-lg font-bold ${p===0?"text-green-600":"text-gray-800"}`,children:h.vote_count.toLocaleString("bn-BD")})})]}),d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[d.jsx("div",{className:"flex-grow bg-gray-100 rounded-full h-1.5 sm:h-2 overflow-hidden",children:d.jsx(me.div,{className:`h-full rounded-full ${p===0?"bg-gradient-to-r from-yellow-400 to-yellow-600":"bg-gradient-to-r from-green-500 to-emerald-600"}`,initial:{width:0},animate:{width:`${g}%`},transition:{duration:1.2,ease:"easeOut"}})}),d.jsxs("span",{className:"text-[10px] sm:text-xs font-bold text-gray-500 w-8 sm:w-10 text-right",children:[g.toFixed(1),"%"]})]})]})]},h.id)}),e.length===0&&d.jsx("div",{className:"flex flex-col items-center justify-center py-8 sm:py-10 text-center",children:d.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"     "})})]})})]})},UU=()=>{var B;const{user:t,userProfile:e,refreshUserProfile:n}=To(),[i,a]=z.useState(null),[l,c]=z.useState(!0),[h,p]=z.useState(!1),[g,v]=z.useState("");z.useEffect(()=>{x()},[]);const x=async()=>{try{const K=await Q6();a(K)}catch(K){console.error("Failed to load referendum:",K)}finally{c(!1)}},w=((B=e==null?void 0:e.referendum_votes)==null?void 0:B[(i==null?void 0:i.id)||""])===!0,E=async K=>{if(!(!t||!i)){if(!t.emailVerified){v("      ");return}if(!w){p(!0),v("");try{await W6(t.uid,i.id,K),a(oe=>oe?{...oe,[K==="yes"?"yes_count":"no_count"]:oe[K==="yes"?"yes_count":"no_count"]+1,total_votes:oe.total_votes+1}:null),await n()}catch(oe){v(oe.message||"       ")}finally{p(!1)}}}};if(l)return d.jsxs("div",{className:"w-full h-48 bg-white rounded-xl animate-pulse border border-gray-200 p-6",children:[d.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),d.jsx("div",{className:"h-4 bg-gray-100 rounded w-full mb-2"}),d.jsx("div",{className:"h-4 bg-gray-100 rounded w-3/4"})]});if(!i)return null;const j=i.total_votes||0,M=j===0?0:Math.round(i.yes_count/j*100),V=j===0?0:Math.round(i.no_count/j*100),q=i.question||"   ( )  ,              ?";return d.jsxs(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden my-6",children:[d.jsxs("div",{className:"bg-green-700 px-6 py-4 flex justify-between items-center border-b border-green-800",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"bg-white/10 p-1.5 rounded text-white",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 011.414.586l4 4a1 1 0 01.586 1.414V19a2 2 0 01-2 2z"})})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-bold text-base tracking-wide",children:" "}),d.jsx("p",{className:"text-green-100 text-[10px] uppercase tracking-wider",children:"   "})]})]}),w&&d.jsxs("div",{className:"bg-white/20 px-3 py-1 rounded-full text-xs font-semibold text-white flex items-center gap-1.5 backdrop-blur-sm border border-white/10 shadow-sm",children:[d.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})," "]})]}),d.jsxs("div",{className:"p-5 md:p-6",children:[d.jsx("div",{className:"mb-6 border-l-4 border-green-700 pl-4 bg-gray-50 py-3 pr-3 rounded-r-lg",children:d.jsx("h2",{className:"text-base md:text-lg font-medium text-gray-800 leading-relaxed font-serif text-justify",children:q})}),g&&d.jsxs(me.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4 p-3 bg-red-50 text-red-700 text-sm rounded border border-red-200 flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),g]}),d.jsx(Ft,{mode:"wait",children:w?d.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-5",children:[d.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start gap-4 shadow-sm",children:[d.jsx("div",{className:"bg-green-100 p-2 rounded-full flex-shrink-0",children:d.jsx("svg",{className:"w-5 h-5 text-green-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-green-800 font-bold text-sm md:text-base mb-0.5",children:"   "}),d.jsx("p",{className:"text-green-600 text-xs md:text-sm",children:"       "})]})]}),d.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg border border-gray-200",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between text-sm font-semibold mb-1.5",children:[d.jsx("span",{className:"text-gray-700",children:""}),d.jsxs("span",{className:"text-gray-900",children:[M,"%"]})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:d.jsx(me.div,{initial:{width:0},animate:{width:`${M}%`},transition:{duration:1,ease:"easeOut"},className:"bg-green-600 h-full rounded-full"})})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between text-sm font-semibold mb-1.5",children:[d.jsx("span",{className:"text-gray-700",children:""}),d.jsxs("span",{className:"text-gray-900",children:[V,"%"]})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:d.jsx(me.div,{initial:{width:0},animate:{width:`${V}%`},transition:{duration:1,ease:"easeOut"},className:"bg-red-600 h-full rounded-full"})})]})]}),d.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200 text-center",children:d.jsxs("span",{className:"text-xs text-gray-500 font-medium bg-white px-3 py-1 rounded-full border border-gray-100",children:[" : ",j.toLocaleString("bn-BD")]})})]})]},"results-display"):d.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col sm:flex-row gap-4",children:[d.jsxs("button",{onClick:()=>E("yes"),disabled:h,className:"flex-1 group relative overflow-hidden bg-white border border-gray-300 hover:border-green-600 rounded-lg p-3 md:p-4 transition-all duration-200 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:"absolute inset-0 bg-green-50 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),d.jsxs("div",{className:"relative flex items-center justify-center gap-3",children:[d.jsx("div",{className:"w-5 h-5 md:w-6 md:h-6 rounded-full border-2 border-green-600 flex items-center justify-center",children:d.jsx("div",{className:"w-2.5 h-2.5 md:w-3 md:h-3 bg-green-600 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"})}),d.jsx("span",{className:"text-base md:text-lg font-bold text-gray-700 group-hover:text-green-800",children:""})]})]}),d.jsxs("button",{onClick:()=>E("no"),disabled:h,className:"flex-1 group relative overflow-hidden bg-white border border-gray-300 hover:border-red-600 rounded-lg p-3 md:p-4 transition-all duration-200 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:"absolute inset-0 bg-red-50 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),d.jsxs("div",{className:"relative flex items-center justify-center gap-3",children:[d.jsx("div",{className:"w-5 h-5 md:w-6 md:h-6 rounded-full border-2 border-red-600 flex items-center justify-center",children:d.jsx("div",{className:"w-2.5 h-2.5 md:w-3 md:h-3 bg-red-600 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"})}),d.jsx("span",{className:"text-base md:text-lg font-bold text-gray-700 group-hover:text-red-800",children:""})]})]})]},"voting-buttons")})]})]})},zU=()=>{var l,c;const[t,e]=z.useState(null);if(z.useEffect(()=>{(async()=>{const p=await fO();p&&e(p)})()},[]),!t)return null;const n=(t==null?void 0:t.fb_link)||"#",i=((l=t==null?void 0:t.app_link)==null?void 0:l.url)||"#",a=((c=t==null?void 0:t.app_link)==null?void 0:c.update_v)||!1;return d.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6 pb-6",children:[d.jsxs(me.a,{href:n,target:"_blank",rel:"noopener noreferrer",onClick:h=>n==="#"&&h.preventDefault(),initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02,translateY:-2},whileTap:{scale:.98},className:`group relative overflow-hidden rounded-2xl bg-white border border-blue-100 shadow-sm hover:shadow-xl hover:shadow-blue-500/10 transition-all duration-300 p-1 ${n==="#"?"cursor-default opacity-50":"cursor-pointer"}`,children:[d.jsx("div",{className:"absolute top-0 right-0 -mt-8 -mr-8 w-32 h-32 bg-blue-50 rounded-full blur-3xl opacity-60 group-hover:opacity-100 transition-opacity"}),d.jsxs("div",{className:"relative flex items-center h-full p-5 sm:p-6 gap-5",children:[d.jsxs("div",{className:"relative flex-shrink-0",children:[d.jsx("div",{className:"absolute inset-0 bg-blue-600 rounded-2xl blur opacity-20 group-hover:opacity-40 transition-opacity"}),d.jsx("div",{className:"relative h-16 w-16 bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl flex items-center justify-center text-white shadow-lg",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})})})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 group-hover:text-blue-700 transition-colors truncate",children:"  "}),d.jsx("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:"        "})]}),d.jsx("div",{className:"hidden sm:flex h-10 w-10 bg-blue-50 rounded-full items-center justify-center text-blue-600 opacity-0 -translate-x-4 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})})})]})]}),d.jsxs(me.a,{href:i,target:"_blank",rel:"noopener noreferrer",onClick:h=>i==="#"&&h.preventDefault(),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},whileHover:{scale:1.02,translateY:-2},whileTap:{scale:.98},className:`group relative overflow-hidden rounded-2xl bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700 shadow-lg hover:shadow-2xl hover:shadow-green-900/20 transition-all duration-300 p-1 ${i==="#"?"cursor-default opacity-80":"cursor-pointer"}`,children:[d.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='1' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E")`}}),d.jsxs("div",{className:"relative flex items-center h-full p-5 sm:p-6 gap-5",children:[d.jsxs("div",{className:"relative flex-shrink-0",children:[d.jsx("div",{className:"absolute inset-0 bg-green-500 rounded-2xl blur opacity-20 group-hover:opacity-40 transition-opacity"}),d.jsx("div",{className:"relative h-16 w-16 bg-gradient-to-br from-green-500 to-emerald-700 rounded-2xl flex items-center justify-center text-white shadow-lg ring-1 ring-white/10",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",ry:"2"}),d.jsx("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"})]})}),a&&d.jsxs("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:[d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),d.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-red-500 border-2 border-gray-800"})]})]}),d.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 mb-1",children:[d.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white group-hover:text-green-400 transition-colors leading-tight",children:" "}),a&&d.jsx(me.span,{animate:{opacity:[1,.7,1],scale:[1,1.02,1]},transition:{repeat:1/0,duration:2},className:"flex-shrink-0 px-2 py-0.5 bg-red-500/20 text-red-400 text-[10px] font-bold uppercase tracking-wider rounded-full border border-red-500/50 backdrop-blur-sm shadow-sm whitespace-nowrap",children:" "})]}),d.jsx(me.p,{animate:a?{opacity:[.7,1,.7],textShadow:["0px 0px 0px rgba(74, 222, 128, 0)","0px 0px 8px rgba(74, 222, 128, 0.5)","0px 0px 0px rgba(74, 222, 128, 0)"]}:{},transition:{repeat:1/0,duration:1.5},className:`text-sm font-medium leading-relaxed ${a?"text-green-400":"text-gray-400"}`,children:a?"    ":"  "})]}),d.jsx("div",{className:"hidden xs:block relative bg-white/10 p-2.5 rounded-xl border border-white/5 group-hover:bg-white/20 transition-colors",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),d.jsx("polyline",{points:"7 10 12 15 17 10"}),d.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})})]})]})]})},AT=[{id:"overview",label:"",icon:""},{id:"analysis",label:"",icon:""},{id:"engagement",label:"",icon:""}],BU=()=>d.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 animate-pulse min-h-[80vh] p-1",children:[d.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-end xl:items-center gap-6",children:[d.jsxs("div",{children:[d.jsx("div",{className:"h-8 w-48 bg-gray-200 rounded-lg mb-2"}),d.jsx("div",{className:"h-4 w-64 bg-gray-100 rounded-md"})]}),d.jsx("div",{className:"h-12 w-full xl:w-[400px] bg-gray-100 rounded-full"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(t=>d.jsxs("div",{className:"h-32 bg-white rounded-2xl border border-gray-100 p-5 flex items-center shadow-sm",children:[d.jsx("div",{className:"h-12 w-12 bg-gray-100 rounded-full mr-4"}),d.jsxs("div",{className:"space-y-2 flex-1",children:[d.jsx("div",{className:"h-4 w-20 bg-gray-100 rounded"}),d.jsx("div",{className:"h-6 w-32 bg-gray-200 rounded"})]})]},t))}),d.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100 space-y-6",children:[d.jsx("div",{className:"h-6 w-48 bg-gray-200 rounded"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[1,2,3,4].map(t=>d.jsxs("div",{className:"h-20 bg-gray-50 rounded-xl border border-gray-100 flex items-center p-3 gap-3",children:[d.jsx("div",{className:"h-12 w-12 bg-gray-200 rounded-full"}),d.jsxs("div",{className:"space-y-2 flex-1",children:[d.jsx("div",{className:"h-4 w-3/4 bg-gray-200 rounded"}),d.jsx("div",{className:"h-3 w-1/2 bg-gray-100 rounded"})]})]},t))}),d.jsxs("div",{className:"flex gap-3 pt-2",children:[d.jsx("div",{className:"h-12 flex-1 bg-gray-100 rounded-lg"}),d.jsx("div",{className:"h-12 flex-[2] bg-gray-200 rounded-lg"})]})]}),d.jsx("div",{className:"h-20 bg-blue-50/50 rounded-2xl border border-blue-100"})]}),NT=({onAiToggle:t})=>{const{userProfile:e}=To(),[n,i]=z.useState(AT[0].id),[a,l]=z.useState({totalVoters:0,totalVotesCast:0}),[c,h]=z.useState(!0),[p,g]=z.useState(""),[v,x]=z.useState(!1),[w,E]=z.useState([]);if(z.useEffect(()=>{const V=new Date().getHours();V<12?g(" "):V<17?g(" "):g(" "),e?(async()=>{try{const B=await eN();if(l({totalVoters:B.totalUsers||0,totalVotesCast:B.totalVotesCast||0}),e!=null&&e.district){const K=await Ol(e.district);E(K)}}catch(B){console.error("Error fetching data:",B)}finally{h(!1)}})():h(!1)},[e]),!e||c)return d.jsx(BU,{});const j=a.totalVoters>0?a.totalVotesCast/a.totalVoters*100:0,M=e.voting_status.has_voted;return d.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 min-h-[80vh]",children:[d.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-end xl:items-center gap-6",children:[d.jsxs("div",{className:"w-full xl:w-auto",children:[d.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:[p,", ",e.username," "]}),d.jsx("p",{className:"text-gray-500 mt-1 text-sm md:text-base",children:"  "})]}),d.jsx("div",{className:"bg-white p-1.5 rounded-full shadow-sm border border-gray-200 flex w-full xl:w-auto min-w-[320px] md:min-w-[400px]",children:AT.map(V=>d.jsxs("button",{onClick:()=>i(V.id),className:`relative flex-1 px-3 md:px-6 py-2.5 rounded-full text-sm md:text-base font-bold transition-all duration-300 flex justify-center items-center gap-2 ${n===V.id?"text-white":"text-gray-500 hover:text-gray-900 hover:bg-gray-50"}`,children:[n===V.id&&d.jsx(me.div,{layoutId:"activeTab",className:"absolute inset-0 bg-electionGreen rounded-full shadow-sm",transition:{type:"spring",bounce:.2,duration:.6}}),d.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[d.jsx("span",{children:V.icon}),d.jsx("span",{className:"text-xs md:text-base",children:V.label})]})]},V.id))})]}),d.jsxs("main",{children:[d.jsx(Ft,{mode:"wait",children:d.jsxs(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[n==="overview"&&d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsx(Qg,{title:" ",value:a.totalVoters,description:" ",icon:"users"}),d.jsx(Qg,{title:"",value:j,description:"  ",isPercentage:!0,icon:"turnout"}),d.jsx(Qg,{title:" ",value:M?"  ":"  ",description:M?"!":"  ",icon:"status"})]}),d.jsx(UU,{}),d.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:[d.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"  "}),d.jsx(_U,{userProfile:e})]}),d.jsxs("div",{className:"mt-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100 flex flex-col md:flex-row items-center justify-between gap-6 shadow-sm",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"bg-white p-3 rounded-full shadow-sm text-2xl",children:""}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-gray-800",children:" "}),d.jsx("p",{className:"text-sm text-gray-600",children:"    "})]})]}),d.jsxs("button",{onClick:()=>x(!0),disabled:w.length<2,className:"px-6 py-3 bg-white hover:bg-gray-50 text-blue-600 font-bold rounded-xl shadow-sm border border-blue-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[w.length<2?"  ":" ",d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})]}),n==="analysis"&&d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsx(kU,{}),d.jsx(LU,{userDistrict:e.district})]}),n==="engagement"&&d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsx(wU,{}),d.jsx(EU,{})]})]},n)}),d.jsx(zU,{})]}),d.jsx(DU,{onToggle:t}),w.length>=2&&d.jsx(WC,{isOpen:v,onClose:()=>x(!1),candidates:[w[0],w[1]]})]})},FU=["prompt.scientist.23@gmail.com"],qU=["","","","","","","",""],HU=({onNavigate:t})=>{var I;const{user:e,userProfile:n,logout:i}=To(),[a,l]=z.useState(!1),[c,h]=z.useState(""),[p,g]=z.useState(!1),[v,x]=z.useState([]),[w,E]=z.useState(""),[j,M]=z.useState(""),[V,q]=z.useState(!1),B=async()=>{try{await i()}catch(te){console.error("Logout failed:",te)}},K=async()=>{if(e&&!e.emailVerified)try{await hy(e),l(!0),setTimeout(()=>l(!1),5e3)}catch(te){console.error("Verification email failed:",te),te.code==="auth/too-many-requests"?h("         "):h("    ")}},oe=((I=n==null?void 0:n.voting_status)==null?void 0:I.has_voted)??!1,H=(n==null?void 0:n.age)||0,Z=(e==null?void 0:e.email)&&(e==null?void 0:e.emailVerified)&&FU.includes(e.email),R=async()=>{if(!v.length){const te=await cm();x(te)}E((n==null?void 0:n.division)||""),M((n==null?void 0:n.district)||""),g(!0)},S=async()=>{if(e){q(!0);try{await tN(e.uid,{division:w,district:j}),g(!1),window.location.reload()}catch(te){console.error("Failed to update location",te),h("    ")}finally{q(!1)}}},N=v.filter(te=>te.division===w);if(!e||!n)return d.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-electionGreen"})});const k={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},D={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},O=({icon:te,title:Re,value:ee,color:X="bg-white"})=>d.jsxs(me.div,{variants:D,className:`${X} p-5 rounded-2xl shadow-sm border border-gray-100 flex items-center space-x-4`,children:[d.jsx("div",{className:"p-3 bg-gray-100 rounded-full text-gray-600",children:te}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium text-gray-500",children:Re}),d.jsx("p",{className:"text-lg font-bold text-gray-900",children:ee})]})]});return d.jsxs(me.div,{variants:k,initial:"hidden",animate:"visible",className:"max-w-4xl mx-auto space-y-6 relative",children:[d.jsx(Ft,{children:(a||c)&&d.jsx(me.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`fixed top-20 right-5 z-50 px-6 py-4 rounded-xl shadow-xl flex items-center gap-3 border ${c?"bg-red-50 text-red-700 border-red-100":"bg-green-50 text-green-700 border-green-100"}`,children:c?d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsx("span",{children:c})]}):d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsx("span",{children:"     !"})]})})}),d.jsxs(me.div,{variants:D,className:"relative bg-gradient-to-br from-electionGreen to-green-800 rounded-3xl shadow-xl overflow-hidden text-white p-8 md:p-12 flex flex-col md:flex-row items-center md:items-end justify-between gap-6",children:[d.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),d.jsx("div",{className:"absolute top-0 right-0 -mt-16 -mr-16 text-white/10",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-64 w-64",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),d.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 relative z-10",children:[d.jsx("div",{className:"h-24 w-24 md:h-32 md:w-32 bg-white p-1 rounded-full shadow-lg",children:d.jsx("div",{className:"h-full w-full bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:e.photoURL?d.jsx("img",{src:e.photoURL,alt:"User",className:"w-full h-full object-cover"}):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 md:h-20 md:w-20 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})})}),d.jsxs("div",{className:"text-center md:text-left",children:[d.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold",children:n.username}),d.jsxs("div",{className:"text-green-100 text-lg flex flex-col md:flex-row items-center justify-center md:justify-start gap-2 mt-1",children:[d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),n.district,", ",n.division]}),Z&&d.jsx("button",{onClick:R,className:"bg-white/20 hover:bg-white/30 p-1.5 rounded-full text-xs transition-colors",title:"  ",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),Z&&d.jsx("span",{className:"bg-white text-electionGreen text-xs px-2 py-0.5 rounded-full font-bold uppercase tracking-wider shadow-sm",children:"Admin"})]})]})]}),d.jsx("div",{className:"relative z-10",children:d.jsxs(me.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("dashboard"),className:"bg-white text-electionGreen font-bold px-6 py-3 rounded-full shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})})," "]})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsx(O,{icon:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),title:" ",value:oe?"   ":"   ",color:oe?"bg-green-50 border-green-200 text-green-800":"bg-yellow-50 border-yellow-200 text-yellow-800"}),d.jsx(O,{icon:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),title:"",value:`${H} `})]}),!e.emailVerified&&d.jsxs(me.div,{variants:D,className:"bg-orange-50 border border-orange-100 rounded-3xl p-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"bg-orange-100 p-3 rounded-full text-orange-600",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-gray-800",children:"   "}),d.jsx("p",{className:"text-sm text-gray-600",children:"         "})]})]}),d.jsx("button",{onClick:K,disabled:a,className:"px-5 py-2.5 bg-orange-500 hover:bg-orange-600 text-white font-bold rounded-xl shadow-sm transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:a?" ...":"  "})]}),d.jsxs(me.div,{variants:D,className:"bg-white rounded-3xl shadow-lg border border-gray-100 overflow-hidden p-8",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:""}),d.jsxs("div",{className:"space-y-4",children:[Z&&d.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between p-4 bg-gray-800 rounded-2xl border border-gray-700 text-white",children:[d.jsxs("div",{children:[d.jsxs("h4",{className:"font-bold text-white flex items-center gap-2",children:[d.jsx("span",{className:"text-yellow-400",children:""}),"  "]}),d.jsx("p",{className:"text-sm text-gray-400",children:"   "})]}),d.jsxs(me.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t("admin"),className:"w-full md:w-auto px-6 py-3 bg-electionGreen text-white font-bold rounded-xl shadow-lg border border-green-600 flex items-center justify-center gap-2 transition-colors",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})})," "]})]}),d.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between p-4 bg-gray-5 rounded-2xl border border-gray-200",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-gray-800",children:""}),d.jsx("p",{className:"text-sm text-gray-500",children:"      ?"})]}),d.jsx(me.button,{whileHover:{scale:1.02,backgroundColor:"#fee2e2"},whileTap:{scale:.98},onClick:B,className:"w-full md:w-auto px-6 py-3 bg-red-50 text-red-600 font-bold rounded-xl border border-red-100 flex items-center justify-center gap-2 transition-colors",children:" "})]})]})]}),d.jsx(Ft,{children:p&&d.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:d.jsxs(me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white w-full max-w-md rounded-3xl p-6 shadow-2xl overflow-hidden",children:[d.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[d.jsx("span",{children:""}),"   ()"]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:""}),d.jsxs("select",{value:w,onChange:te=>{E(te.target.value),M("")},className:"w-full p-3 border border-gray-300 rounded-xl outline-none focus:ring-2 focus:ring-electionGreen",children:[d.jsx("option",{value:"",children:" "}),qU.map(te=>d.jsx("option",{value:te,children:te},te))]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:""}),d.jsxs("select",{value:j,onChange:te=>M(te.target.value),disabled:!w,className:"w-full p-3 border border-gray-300 rounded-xl outline-none focus:ring-2 focus:ring-electionGreen disabled:bg-gray-100 disabled:text-gray-400",children:[d.jsx("option",{value:"",children:"  "}),N.map(te=>d.jsx("option",{value:te.name,children:te.name},te.id))]})]})]}),d.jsxs("div",{className:"flex gap-3 mt-6",children:[d.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-3 text-gray-600 font-bold bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors",children:""}),d.jsx("button",{onClick:S,disabled:!w||!j||V,className:"flex-1 py-3 text-white font-bold bg-electionGreen hover:bg-green-800 rounded-xl transition-colors disabled:opacity-50 flex justify-center items-center gap-2",children:V?d.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):" "})]})]})})})]})},eu=({title:t,value:e,icon:n,color:i})=>{const a=i.replace("bg-","text-"),l=i.replace("bg-","shadow-");return d.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-gray-200/60 shadow-sm hover:shadow-xl transition-all duration-300 group cursor-default relative overflow-hidden",children:[d.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-5 transition-opacity duration-500 bg-gradient-to-br from-transparent via-transparent to-${i.replace("bg-","")}/30`}),d.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:t}),d.jsx("p",{className:"text-4xl font-extrabold text-gray-900",children:(e||0).toLocaleString("bn-BD")})]}),d.jsx("div",{className:`p-4 rounded-full ${i} bg-opacity-10 ${a} shadow-md ${l}/20 group-hover:scale-110 transition-transform duration-300`,children:d.jsx("div",{className:"w-8 h-8",children:n})})]})]})},GU=()=>{const[t,e]=z.useState({totalUsers:0,totalParties:0,totalDistricts:0,totalCandidates:0,totalVotesCast:0}),[n,i]=z.useState(!0);return z.useEffect(()=>{(async()=>{i(!0);try{const l=await eN();e(l)}catch(l){console.error("Failed to fetch admin stats:",l)}finally{i(!1)}})()},[]),n?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5].map(a=>d.jsxs("div",{className:"h-40 bg-white rounded-3xl border border-gray-100 shadow-sm p-6 animate-pulse flex justify-between items-center",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"}),d.jsx("div",{className:"h-10 bg-gray-300 rounded w-32"})]}),d.jsx("div",{className:"h-16 w-16 bg-gray-100 rounded-full"})]},a))}):d.jsxs("div",{className:"p-2",children:[" ",d.jsxs("div",{className:"mb-10",children:[d.jsx("h2",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:" "}),d.jsx("p",{className:"text-gray-500 mt-2 text-base",children:"  -   "})]}),d.jsxs(me.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.15}}},initial:"hidden",animate:"visible",children:[d.jsx(me.div,{variants:{hidden:{opacity:0,y:30,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100}}},children:d.jsx(eu,{title:" ",value:t.totalUsers,color:"bg-blue-600",icon:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.124-1.282-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.124-1.282.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm-7 9a7 7 0 1114 0H3z"})})})}),d.jsx(me.div,{variants:{hidden:{opacity:0,y:30,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100}}},children:d.jsx(eu,{title:"  ",value:t.totalVotesCast,color:"bg-emerald-600",icon:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),d.jsx(me.div,{variants:{hidden:{opacity:0,y:30,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100}}},children:d.jsx(eu,{title:" ",value:t.totalParties,color:"bg-violet-600",icon:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 21v-8a2 2 0 012-2h14a2 2 0 012 2v8M9 10a2 2 0 012-2h2a2 2 0 012 2"})})})}),d.jsx(me.div,{variants:{hidden:{opacity:0,y:30,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100}}},children:d.jsx(eu,{title:"  ()",value:t.totalDistricts,color:"bg-orange-600",icon:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),d.jsx(me.div,{variants:{hidden:{opacity:0,y:30,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100}}},children:d.jsx(eu,{title:" ",value:t.totalCandidates,color:"bg-cyan-600",icon:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-full w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})})})]})]})};var ld=t=>t.type==="checkbox",ao=t=>t instanceof Date,$n=t=>t==null;const XC=t=>typeof t=="object";var rn=t=>!$n(t)&&!Array.isArray(t)&&XC(t)&&!ao(t),KU=t=>rn(t)&&t.target?ld(t.target)?t.target.checked:t.target.value:t,$U=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,YU=(t,e)=>t.has($U(e)),QU=t=>{const e=t.constructor&&t.constructor.prototype;return rn(e)&&e.hasOwnProperty("isPrototypeOf")},Lv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function on(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(Lv&&(t instanceof Blob||e))return t;const n=Array.isArray(t);if(!n&&!(rn(t)&&QU(t)))return t;const i=n?[]:Object.create(Object.getPrototypeOf(t));for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=on(t[a]));return i}var pm=t=>/^\w*$/.test(t),Rt=t=>t===void 0,Uv=t=>Array.isArray(t)?t.filter(Boolean):[],zv=t=>Uv(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ne=(t,e,n)=>{if(!e||!rn(t))return n;const i=(pm(e)?[e]:zv(e)).reduce((a,l)=>$n(a)?a:a[l],t);return Rt(i)||i===t?Rt(t[e])?n:t[e]:i},Ei=t=>typeof t=="boolean",Gs=t=>typeof t=="function",At=(t,e,n)=>{let i=-1;const a=pm(e)?[e]:zv(e),l=a.length,c=l-1;for(;++i<l;){const h=a[i];let p=n;if(i!==c){const g=t[h];p=rn(g)||Array.isArray(g)?g:isNaN(+a[i+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;t[h]=p,t=t[h]}};const CT={BLUR:"blur",FOCUS_OUT:"focusout"},Ks={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},er={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},WU=bn.createContext(null);WU.displayName="HookFormControlContext";var XU=(t,e,n,i=!0)=>{const a={defaultValues:e._defaultValues};for(const l in t)Object.defineProperty(a,l,{get:()=>{const c=l;return e._proxyFormState[c]!==Ks.all&&(e._proxyFormState[c]=!i||Ks.all),t[c]}});return a};const JU=typeof window<"u"?bn.useLayoutEffect:bn.useEffect;var as=t=>typeof t=="string",ZU=(t,e,n,i,a)=>as(t)?(i&&e.watch.add(t),Ne(n,t,a)):Array.isArray(t)?t.map(l=>(i&&e.watch.add(l),Ne(n,l))):(i&&(e.watchAll=!0),n),Q0=t=>$n(t)||!XC(t);function Zr(t,e,n=new WeakSet){if(Q0(t)||Q0(e))return Object.is(t,e);if(ao(t)&&ao(e))return Object.is(t.getTime(),e.getTime());const i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const l of i){const c=t[l];if(!a.includes(l))return!1;if(l!=="ref"){const h=e[l];if(ao(c)&&ao(h)||rn(c)&&rn(h)||Array.isArray(c)&&Array.isArray(h)?!Zr(c,h,n):!Object.is(c,h))return!1}}return!0}const e7=bn.createContext(null);e7.displayName="HookFormContext";var t7=(t,e,n,i,a)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[i]:a||!0}}:{},_u=t=>Array.isArray(t)?t:[t],RT=()=>{let t=[];return{get observers(){return t},next:a=>{for(const l of t)l.next&&l.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(l=>l!==a)}}),unsubscribe:()=>{t=[]}}};function JC(t,e){const n={};for(const i in t)if(t.hasOwnProperty(i)){const a=t[i],l=e[i];if(a&&rn(a)&&l){const c=JC(a,l);rn(c)&&(n[i]=c)}else t[i]&&(n[i]=l)}return n}var Mn=t=>rn(t)&&!Object.keys(t).length,Bv=t=>t.type==="file",Mf=t=>{if(!Lv)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},ZC=t=>t.type==="select-multiple",Fv=t=>t.type==="radio",n7=t=>Fv(t)||ld(t),Jg=t=>Mf(t)&&t.isConnected;function s7(t,e){const n=e.slice(0,-1).length;let i=0;for(;i<n;)t=Rt(t)?i++:t[e[i++]];return t}function i7(t){for(const e in t)if(t.hasOwnProperty(e)&&!Rt(t[e]))return!1;return!0}function Jt(t,e){const n=Array.isArray(e)?e:pm(e)?[e]:zv(e),i=n.length===1?t:s7(t,n),a=n.length-1,l=n[a];return i&&delete i[l],a!==0&&(rn(i)&&Mn(i)||Array.isArray(i)&&i7(i))&&Jt(t,n.slice(0,-1)),t}var r7=t=>{for(const e in t)if(Gs(t[e]))return!0;return!1};function eR(t){return Array.isArray(t)||rn(t)&&!r7(t)}function W0(t,e={}){for(const n in t){const i=t[n];eR(i)?(e[n]=Array.isArray(i)?[]:{},W0(i,e[n])):Rt(i)||(e[n]=!0)}return e}function ml(t,e,n){n||(n=W0(e));for(const i in t){const a=t[i];if(eR(a))Rt(e)||Q0(n[i])?n[i]=W0(a,Array.isArray(a)?[]:{}):ml(a,$n(e)?{}:e[i],n[i]);else{const l=e[i];n[i]=!Zr(a,l)}}return n}const jT={value:!1,isValid:!1},IT={value:!0,isValid:!0};var tR=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Rt(t[0].attributes.value)?Rt(t[0].value)||t[0].value===""?IT:{value:t[0].value,isValid:!0}:IT:jT}return jT},nR=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:i})=>Rt(t)?t:e?t===""?NaN:t&&+t:n&&as(t)?new Date(t):i?i(t):t;const DT={isValid:!1,value:null};var sR=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,DT):DT;function VT(t){const e=t.ref;return Bv(e)?e.files:Fv(e)?sR(t.refs).value:ZC(e)?[...e.selectedOptions].map(({value:n})=>n):ld(e)?tR(t.refs).value:nR(Rt(e.value)?t.ref.value:e.value,t)}var a7=(t,e,n,i)=>{const a={};for(const l of t){const c=Ne(e,l);c&&At(a,l,c._f)}return{criteriaMode:n,names:[...t],fields:a,shouldUseNativeValidation:i}},kf=t=>t instanceof RegExp,tu=t=>Rt(t)?t:kf(t)?t.source:rn(t)?kf(t.value)?t.value.source:t.value:t,MT=t=>({isOnSubmit:!t||t===Ks.onSubmit,isOnBlur:t===Ks.onBlur,isOnChange:t===Ks.onChange,isOnAll:t===Ks.all,isOnTouch:t===Ks.onTouched});const kT="AsyncFunction";var o7=t=>!!t&&!!t.validate&&!!(Gs(t.validate)&&t.validate.constructor.name===kT||rn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===kT)),l7=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),OT=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(i=>t.startsWith(i)&&/^\.\w+/.test(t.slice(i.length))));const wu=(t,e,n,i)=>{for(const a of n||Object.keys(t)){const l=Ne(t,a);if(l){const{_f:c,...h}=l;if(c){if(c.refs&&c.refs[0]&&e(c.refs[0],a)&&!i)return!0;if(c.ref&&e(c.ref,c.name)&&!i)return!0;if(wu(h,e))break}else if(rn(h)&&wu(h,e))break}}};function PT(t,e,n){const i=Ne(t,n);if(i||pm(n))return{error:i,name:n};const a=n.split(".");for(;a.length;){const l=a.join("."),c=Ne(e,l),h=Ne(t,l);if(c&&!Array.isArray(c)&&n!==l)return{name:n};if(h&&h.type)return{name:l,error:h};if(h&&h.root&&h.root.type)return{name:`${l}.root`,error:h.root};a.pop()}return{name:n}}var c7=(t,e,n,i)=>{n(t);const{name:a,...l}=t;return Mn(l)||Object.keys(l).length>=Object.keys(e).length||Object.keys(l).find(c=>e[c]===(!i||Ks.all))},u7=(t,e,n)=>!t||!e||t===e||_u(t).some(i=>i&&(n?i===e:i.startsWith(e)||e.startsWith(i))),d7=(t,e,n,i,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(e||t):(n?i.isOnBlur:a.isOnBlur)?!t:(n?i.isOnChange:a.isOnChange)?t:!0,h7=(t,e)=>!Uv(Ne(t,e)).length&&Jt(t,e),f7=(t,e,n)=>{const i=_u(Ne(t,n));return At(i,"root",e[n]),At(t,n,i),t};function LT(t,e,n="validate"){if(as(t)||Array.isArray(t)&&t.every(as)||Ei(t)&&!t)return{type:n,message:as(t)?t:"",ref:e}}var ul=t=>rn(t)&&!kf(t)?t:{value:t,message:""},UT=async(t,e,n,i,a,l)=>{const{ref:c,refs:h,required:p,maxLength:g,minLength:v,min:x,max:w,pattern:E,validate:j,name:M,valueAsNumber:V,mount:q}=t._f,B=Ne(n,M);if(!q||e.has(M))return{};const K=h?h[0]:c,oe=O=>{a&&K.reportValidity&&(K.setCustomValidity(Ei(O)?"":O||""),K.reportValidity())},H={},Z=Fv(c),R=ld(c),S=Z||R,N=(V||Bv(c))&&Rt(c.value)&&Rt(B)||Mf(c)&&c.value===""||B===""||Array.isArray(B)&&!B.length,k=t7.bind(null,M,i,H),D=(O,I,te,Re=er.maxLength,ee=er.minLength)=>{const X=O?I:te;H[M]={type:O?Re:ee,message:X,ref:c,...k(O?Re:ee,X)}};if(l?!Array.isArray(B)||!B.length:p&&(!S&&(N||$n(B))||Ei(B)&&!B||R&&!tR(h).isValid||Z&&!sR(h).isValid)){const{value:O,message:I}=as(p)?{value:!!p,message:p}:ul(p);if(O&&(H[M]={type:er.required,message:I,ref:K,...k(er.required,I)},!i))return oe(I),H}if(!N&&(!$n(x)||!$n(w))){let O,I;const te=ul(w),Re=ul(x);if(!$n(B)&&!isNaN(B)){const ee=c.valueAsNumber||B&&+B;$n(te.value)||(O=ee>te.value),$n(Re.value)||(I=ee<Re.value)}else{const ee=c.valueAsDate||new Date(B),X=we=>new Date(new Date().toDateString()+" "+we),ue=c.type=="time",be=c.type=="week";as(te.value)&&B&&(O=ue?X(B)>X(te.value):be?B>te.value:ee>new Date(te.value)),as(Re.value)&&B&&(I=ue?X(B)<X(Re.value):be?B<Re.value:ee<new Date(Re.value))}if((O||I)&&(D(!!O,te.message,Re.message,er.max,er.min),!i))return oe(H[M].message),H}if((g||v)&&!N&&(as(B)||l&&Array.isArray(B))){const O=ul(g),I=ul(v),te=!$n(O.value)&&B.length>+O.value,Re=!$n(I.value)&&B.length<+I.value;if((te||Re)&&(D(te,O.message,I.message),!i))return oe(H[M].message),H}if(E&&!N&&as(B)){const{value:O,message:I}=ul(E);if(kf(O)&&!B.match(O)&&(H[M]={type:er.pattern,message:I,ref:c,...k(er.pattern,I)},!i))return oe(I),H}if(j){if(Gs(j)){const O=await j(B,n),I=LT(O,K);if(I&&(H[M]={...I,...k(er.validate,I.message)},!i))return oe(I.message),H}else if(rn(j)){let O={};for(const I in j){if(!Mn(O)&&!i)break;const te=LT(await j[I](B,n),K,I);te&&(O={...te,...k(I,te.message)},oe(te.message),i&&(H[M]=O))}if(!Mn(O)&&(H[M]={ref:K,...O},!i))return H}}return oe(!0),H};const m7={mode:Ks.onSubmit,reValidateMode:Ks.onChange,shouldFocusError:!0};function p7(t={}){let e={...m7,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Gs(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},i={},a=rn(e.defaultValues)||rn(e.values)?on(e.defaultValues||e.values)||{}:{},l=e.shouldUnregister?{}:on(a),c={action:!1,mount:!1,watch:!1,keepIsValid:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},p,g=0;const v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},x={...v};let w={...x};const E={array:RT(),state:RT()},j=e.criteriaMode===Ks.all,M=U=>Q=>{clearTimeout(g),g=setTimeout(U,Q)},V=async U=>{if(!c.keepIsValid&&!e.disabled&&(x.isValid||w.isValid||U)){let Q;e.resolver?(Q=Mn((await S()).errors),q()):Q=await k(i,!0),Q!==n.isValid&&E.state.next({isValid:Q})}},q=(U,Q)=>{!e.disabled&&(x.isValidating||x.validatingFields||w.isValidating||w.validatingFields)&&((U||Array.from(h.mount)).forEach(ie=>{ie&&(Q?At(n.validatingFields,ie,Q):Jt(n.validatingFields,ie))}),E.state.next({validatingFields:n.validatingFields,isValidating:!Mn(n.validatingFields)}))},B=(U,Q=[],ie,ge,pe=!0,fe=!0)=>{if(ge&&ie&&!e.disabled){if(c.action=!0,fe&&Array.isArray(Ne(i,U))){const Ce=ie(Ne(i,U),ge.argA,ge.argB);pe&&At(i,U,Ce)}if(fe&&Array.isArray(Ne(n.errors,U))){const Ce=ie(Ne(n.errors,U),ge.argA,ge.argB);pe&&At(n.errors,U,Ce),h7(n.errors,U)}if((x.touchedFields||w.touchedFields)&&fe&&Array.isArray(Ne(n.touchedFields,U))){const Ce=ie(Ne(n.touchedFields,U),ge.argA,ge.argB);pe&&At(n.touchedFields,U,Ce)}(x.dirtyFields||w.dirtyFields)&&(n.dirtyFields=ml(a,l)),E.state.next({name:U,isDirty:O(U,Q),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else At(l,U,Q)},K=(U,Q)=>{At(n.errors,U,Q),E.state.next({errors:n.errors})},oe=U=>{n.errors=U,E.state.next({errors:n.errors,isValid:!1})},H=(U,Q,ie,ge)=>{const pe=Ne(i,U);if(pe){const fe=Ne(l,U,Rt(ie)?Ne(a,U):ie);Rt(fe)||ge&&ge.defaultChecked||Q?At(l,U,Q?fe:VT(pe._f)):Re(U,fe),c.mount&&!c.action&&V()}},Z=(U,Q,ie,ge,pe)=>{let fe=!1,Ce=!1;const Ge={name:U};if(!e.disabled){if(!ie||ge){(x.isDirty||w.isDirty)&&(Ce=n.isDirty,n.isDirty=Ge.isDirty=O(),fe=Ce!==Ge.isDirty);const st=Zr(Ne(a,U),Q);Ce=!!Ne(n.dirtyFields,U),st?Jt(n.dirtyFields,U):At(n.dirtyFields,U,!0),Ge.dirtyFields=n.dirtyFields,fe=fe||(x.dirtyFields||w.dirtyFields)&&Ce!==!st}if(ie){const st=Ne(n.touchedFields,U);st||(At(n.touchedFields,U,ie),Ge.touchedFields=n.touchedFields,fe=fe||(x.touchedFields||w.touchedFields)&&st!==ie)}fe&&pe&&E.state.next(Ge)}return fe?Ge:{}},R=(U,Q,ie,ge)=>{const pe=Ne(n.errors,U),fe=(x.isValid||w.isValid)&&Ei(Q)&&n.isValid!==Q;if(e.delayError&&ie?(p=M(()=>K(U,ie)),p(e.delayError)):(clearTimeout(g),p=null,ie?At(n.errors,U,ie):Jt(n.errors,U)),(ie?!Zr(pe,ie):pe)||!Mn(ge)||fe){const Ce={...ge,...fe&&Ei(Q)?{isValid:Q}:{},errors:n.errors,name:U};n={...n,...Ce},E.state.next(Ce)}},S=async U=>(q(U,!0),await e.resolver(l,e.context,a7(U||h.mount,i,e.criteriaMode,e.shouldUseNativeValidation))),N=async U=>{const{errors:Q}=await S(U);if(q(U),U)for(const ie of U){const ge=Ne(Q,ie);ge?At(n.errors,ie,ge):Jt(n.errors,ie)}else n.errors=Q;return Q},k=async(U,Q,ie={valid:!0})=>{for(const ge in U){const pe=U[ge];if(pe){const{_f:fe,...Ce}=pe;if(fe){const Ge=h.array.has(fe.name),st=pe._f&&o7(pe._f);st&&x.validatingFields&&q([fe.name],!0);const qt=await UT(pe,h.disabled,l,j,e.shouldUseNativeValidation&&!Q,Ge);if(st&&x.validatingFields&&q([fe.name]),qt[fe.name]&&(ie.valid=!1,Q||t.shouldUseNativeValidation))break;!Q&&(Ne(qt,fe.name)?Ge?f7(n.errors,qt,fe.name):At(n.errors,fe.name,qt[fe.name]):Jt(n.errors,fe.name))}!Mn(Ce)&&await k(Ce,Q,ie)}}return ie.valid},D=()=>{for(const U of h.unMount){const Q=Ne(i,U);Q&&(Q._f.refs?Q._f.refs.every(ie=>!Jg(ie)):!Jg(Q._f.ref))&&lt(U)}h.unMount=new Set},O=(U,Q)=>!e.disabled&&(U&&Q&&At(l,U,Q),!Zr(L(),a)),I=(U,Q,ie)=>ZU(U,h,{...c.mount?l:Rt(Q)?a:as(U)?{[U]:Q}:Q},ie,Q),te=U=>Uv(Ne(c.mount?l:a,U,e.shouldUnregister?Ne(a,U,[]):[])),Re=(U,Q,ie={})=>{const ge=Ne(i,U);let pe=Q;if(ge){const fe=ge._f;fe&&(!fe.disabled&&At(l,U,nR(Q,fe)),pe=Mf(fe.ref)&&$n(Q)?"":Q,ZC(fe.ref)?[...fe.ref.options].forEach(Ce=>Ce.selected=pe.includes(Ce.value)):fe.refs?ld(fe.ref)?fe.refs.forEach(Ce=>{(!Ce.defaultChecked||!Ce.disabled)&&(Array.isArray(pe)?Ce.checked=!!pe.find(Ge=>Ge===Ce.value):Ce.checked=pe===Ce.value||!!pe)}):fe.refs.forEach(Ce=>Ce.checked=Ce.value===pe):Bv(fe.ref)?fe.ref.value="":(fe.ref.value=pe,fe.ref.type||E.state.next({name:U,values:on(l)})))}(ie.shouldDirty||ie.shouldTouch)&&Z(U,pe,ie.shouldTouch,ie.shouldDirty,!0),ie.shouldValidate&&we(U)},ee=(U,Q,ie)=>{for(const ge in Q){if(!Q.hasOwnProperty(ge))return;const pe=Q[ge],fe=U+"."+ge,Ce=Ne(i,fe);(h.array.has(U)||rn(pe)||Ce&&!Ce._f)&&!ao(pe)?ee(fe,pe,ie):Re(fe,pe,ie)}},X=(U,Q,ie={})=>{const ge=Ne(i,U),pe=h.array.has(U),fe=on(Q);At(l,U,fe),pe?(E.array.next({name:U,values:on(l)}),(x.isDirty||x.dirtyFields||w.isDirty||w.dirtyFields)&&ie.shouldDirty&&E.state.next({name:U,dirtyFields:ml(a,l),isDirty:O(U,fe)})):ge&&!ge._f&&!$n(fe)?ee(U,fe,ie):Re(U,fe,ie),OT(U,h)?E.state.next({...n,name:U,values:on(l)}):E.state.next({name:c.mount?U:void 0,values:on(l)})},ue=async U=>{c.mount=!0;const Q=U.target;let ie=Q.name,ge=!0;const pe=Ne(i,ie),fe=st=>{ge=Number.isNaN(st)||ao(st)&&isNaN(st.getTime())||Zr(st,Ne(l,ie,st))},Ce=MT(e.mode),Ge=MT(e.reValidateMode);if(pe){let st,qt;const hs=Q.type?VT(pe._f):KU(U),Yn=U.type===CT.BLUR||U.type===CT.FOCUS_OUT,Qn=!l7(pe._f)&&!e.resolver&&!Ne(n.errors,ie)&&!pe._f.deps||d7(Yn,Ne(n.touchedFields,ie),n.isSubmitted,Ge,Ce),Pt=OT(ie,h,Yn);At(l,ie,hs),Yn?(!Q||!Q.readOnly)&&(pe._f.onBlur&&pe._f.onBlur(U),p&&p(0)):pe._f.onChange&&pe._f.onChange(U);const An=Z(ie,hs,Yn),Ct=!Mn(An)||Pt;if(!Yn&&E.state.next({name:ie,type:U.type,values:on(l)}),Qn)return(x.isValid||w.isValid)&&(e.mode==="onBlur"?Yn&&V():Yn||V()),Ct&&E.state.next({name:ie,...Pt?{}:An});if(!Yn&&Pt&&E.state.next({...n}),e.resolver){const{errors:Ta}=await S([ie]);if(q([ie]),fe(hs),ge){const mr=PT(n.errors,i,ie),Ea=PT(Ta,i,mr.name||ie);st=Ea.error,ie=Ea.name,qt=Mn(Ta)}}else q([ie],!0),st=(await UT(pe,h.disabled,l,j,e.shouldUseNativeValidation))[ie],q([ie]),fe(hs),ge&&(st?qt=!1:(x.isValid||w.isValid)&&(qt=await k(i,!0)));ge&&(pe._f.deps&&(!Array.isArray(pe._f.deps)||pe._f.deps.length>0)&&we(pe._f.deps),R(ie,qt,st,An))}},be=(U,Q)=>{if(Ne(n.errors,Q)&&U.focus)return U.focus(),1},we=async(U,Q={})=>{let ie,ge;const pe=_u(U);if(e.resolver){const fe=await N(Rt(U)?U:pe);ie=Mn(fe),ge=U?!pe.some(Ce=>Ne(fe,Ce)):ie}else U?(ge=(await Promise.all(pe.map(async fe=>{const Ce=Ne(i,fe);return await k(Ce&&Ce._f?{[fe]:Ce}:Ce)}))).every(Boolean),!(!ge&&!n.isValid)&&V()):ge=ie=await k(i);return E.state.next({...!as(U)||(x.isValid||w.isValid)&&ie!==n.isValid?{}:{name:U},...e.resolver||!U?{isValid:ie}:{},errors:n.errors}),Q.shouldFocus&&!ge&&wu(i,be,U?pe:h.mount),ge},L=(U,Q)=>{let ie={...c.mount?l:a};return Q&&(ie=JC(Q.dirtyFields?n.dirtyFields:n.touchedFields,ie)),Rt(U)?ie:as(U)?Ne(ie,U):U.map(ge=>Ne(ie,ge))},re=(U,Q)=>({invalid:!!Ne((Q||n).errors,U),isDirty:!!Ne((Q||n).dirtyFields,U),error:Ne((Q||n).errors,U),isValidating:!!Ne(n.validatingFields,U),isTouched:!!Ne((Q||n).touchedFields,U)}),ye=U=>{U&&_u(U).forEach(Q=>Jt(n.errors,Q)),E.state.next({errors:U?n.errors:{}})},_e=(U,Q,ie)=>{const ge=(Ne(i,U,{_f:{}})._f||{}).ref,pe=Ne(n.errors,U)||{},{ref:fe,message:Ce,type:Ge,...st}=pe;At(n.errors,U,{...st,...Q,ref:ge}),E.state.next({name:U,errors:n.errors,isValid:!1}),ie&&ie.shouldFocus&&ge&&ge.focus&&ge.focus()},De=(U,Q)=>Gs(U)?E.state.subscribe({next:ie=>"values"in ie&&U(I(void 0,Q),ie)}):I(U,Q,!0),ke=U=>E.state.subscribe({next:Q=>{u7(U.name,Q.name,U.exact)&&c7(Q,U.formState||x,wa,U.reRenderRoot)&&U.callback({values:{...l},...n,...Q,defaultValues:a})}}).unsubscribe,qe=U=>(c.mount=!0,w={...w,...U.formState},ke({...U,formState:{...v,...U.formState}})),lt=(U,Q={})=>{for(const ie of U?_u(U):h.mount)h.mount.delete(ie),h.array.delete(ie),Q.keepValue||(Jt(i,ie),Jt(l,ie)),!Q.keepError&&Jt(n.errors,ie),!Q.keepDirty&&Jt(n.dirtyFields,ie),!Q.keepTouched&&Jt(n.touchedFields,ie),!Q.keepIsValidating&&Jt(n.validatingFields,ie),!e.shouldUnregister&&!Q.keepDefaultValue&&Jt(a,ie);E.state.next({values:on(l)}),E.state.next({...n,...Q.keepDirty?{isDirty:O()}:{}}),!Q.keepIsValid&&V()},nt=({disabled:U,name:Q})=>{if(Ei(U)&&c.mount||U||h.disabled.has(Q)){const pe=h.disabled.has(Q)!==!!U;U?h.disabled.add(Q):h.disabled.delete(Q),pe&&c.mount&&!c.action&&V()}},Is=(U,Q={})=>{let ie=Ne(i,U);const ge=Ei(Q.disabled)||Ei(e.disabled);return At(i,U,{...ie||{},_f:{...ie&&ie._f?ie._f:{ref:{name:U}},name:U,mount:!0,...Q}}),h.mount.add(U),ie?nt({disabled:Ei(Q.disabled)?Q.disabled:e.disabled,name:U}):H(U,!0,Q.value),{...ge?{disabled:Q.disabled||e.disabled}:{},...e.progressive?{required:!!Q.required,min:tu(Q.min),max:tu(Q.max),minLength:tu(Q.minLength),maxLength:tu(Q.maxLength),pattern:tu(Q.pattern)}:{},name:U,onChange:ue,onBlur:ue,ref:pe=>{if(pe){Is(U,Q),ie=Ne(i,U);const fe=Rt(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,Ce=n7(fe),Ge=ie._f.refs||[];if(Ce?Ge.find(st=>st===fe):fe===ie._f.ref)return;At(i,U,{_f:{...ie._f,...Ce?{refs:[...Ge.filter(Jg),fe,...Array.isArray(Ne(a,U))?[{}]:[]],ref:{type:fe.type,name:U}}:{ref:fe}}}),H(U,!1,void 0,fe)}else ie=Ne(i,U,{}),ie._f&&(ie._f.mount=!1),(e.shouldUnregister||Q.shouldUnregister)&&!(YU(h.array,U)&&c.action)&&h.unMount.add(U)}}},ei=()=>e.shouldFocusError&&wu(i,be,h.mount),hr=U=>{Ei(U)&&(E.state.next({disabled:U}),wu(i,(Q,ie)=>{const ge=Ne(i,ie);ge&&(Q.disabled=ge._f.disabled||U,Array.isArray(ge._f.refs)&&ge._f.refs.forEach(pe=>{pe.disabled=ge._f.disabled||U}))},0,!1))},Mi=(U,Q)=>async ie=>{let ge;ie&&(ie.preventDefault&&ie.preventDefault(),ie.persist&&ie.persist());let pe=on(l);if(E.state.next({isSubmitting:!0}),e.resolver){const{errors:fe,values:Ce}=await S();q(),n.errors=fe,pe=on(Ce)}else await k(i);if(h.disabled.size)for(const fe of h.disabled)Jt(pe,fe);if(Jt(n.errors,"root"),Mn(n.errors)){E.state.next({errors:{}});try{await U(pe,ie)}catch(fe){ge=fe}}else Q&&await Q({...n.errors},ie),ei(),setTimeout(ei);if(E.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Mn(n.errors)&&!ge,submitCount:n.submitCount+1,errors:n.errors}),ge)throw ge},ds=(U,Q={})=>{Ne(i,U)&&(Rt(Q.defaultValue)?X(U,on(Ne(a,U))):(X(U,Q.defaultValue),At(a,U,on(Q.defaultValue))),Q.keepTouched||Jt(n.touchedFields,U),Q.keepDirty||(Jt(n.dirtyFields,U),n.isDirty=Q.defaultValue?O(U,on(Ne(a,U))):O()),Q.keepError||(Jt(n.errors,U),x.isValid&&V()),E.state.next({...n}))},fr=(U,Q={})=>{const ie=U?on(U):a,ge=on(ie),pe=Mn(U),fe=pe?a:ge;if(Q.keepDefaultValues||(a=ie),!Q.keepValues){if(Q.keepDirtyValues){const Ce=new Set([...h.mount,...Object.keys(ml(a,l))]);for(const Ge of Array.from(Ce)){const st=Ne(n.dirtyFields,Ge),qt=Ne(l,Ge),hs=Ne(fe,Ge);st&&!Rt(qt)?At(fe,Ge,qt):!st&&!Rt(hs)&&X(Ge,hs)}}else{if(Lv&&Rt(U))for(const Ce of h.mount){const Ge=Ne(i,Ce);if(Ge&&Ge._f){const st=Array.isArray(Ge._f.refs)?Ge._f.refs[0]:Ge._f.ref;if(Mf(st)){const qt=st.closest("form");if(qt){qt.reset();break}}}}if(Q.keepFieldsRef)for(const Ce of h.mount)X(Ce,Ne(fe,Ce));else i={}}l=e.shouldUnregister?Q.keepDefaultValues?on(a):{}:on(fe),E.array.next({values:{...fe}}),E.state.next({values:{...fe}})}h={mount:Q.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!x.isValid||!!Q.keepIsValid||!!Q.keepDirtyValues||!e.shouldUnregister&&!Mn(fe),c.watch=!!e.shouldUnregister,c.keepIsValid=!!Q.keepIsValid,c.action=!1,Q.keepErrors||(n.errors={}),E.state.next({submitCount:Q.keepSubmitCount?n.submitCount:0,isDirty:pe?!1:Q.keepDirty?n.isDirty:!!(Q.keepDefaultValues&&!Zr(U,a)),isSubmitted:Q.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:pe?{}:Q.keepDirtyValues?Q.keepDefaultValues&&l?ml(a,l):n.dirtyFields:Q.keepDefaultValues&&U?ml(a,U):Q.keepDirty?n.dirtyFields:{},touchedFields:Q.keepTouched?n.touchedFields:{},errors:Q.keepErrors?n.errors:{},isSubmitSuccessful:Q.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},ti=(U,Q)=>fr(Gs(U)?U(l):U,{...e.resetOptions,...Q}),_a=(U,Q={})=>{const ie=Ne(i,U),ge=ie&&ie._f;if(ge){const pe=ge.refs?ge.refs[0]:ge.ref;pe.focus&&setTimeout(()=>{pe.focus(),Q.shouldSelect&&Gs(pe.select)&&pe.select()})}},wa=U=>{n={...n,...U}},It={control:{register:Is,unregister:lt,getFieldState:re,handleSubmit:Mi,setError:_e,_subscribe:ke,_runSchema:S,_updateIsValidating:q,_focusError:ei,_getWatch:I,_getDirty:O,_setValid:V,_setFieldArray:B,_setDisabledField:nt,_setErrors:oe,_getFieldArray:te,_reset:fr,_resetDefaultValues:()=>Gs(e.defaultValues)&&e.defaultValues().then(U=>{ti(U,e.resetOptions),E.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:hr,_subjects:E,_proxyFormState:x,get _fields(){return i},get _formValues(){return l},get _state(){return c},set _state(U){c=U},get _defaultValues(){return a},get _names(){return h},set _names(U){h=U},get _formState(){return n},get _options(){return e},set _options(U){e={...e,...U}}},subscribe:qe,trigger:we,register:Is,handleSubmit:Mi,watch:De,setValue:X,getValues:L,reset:ti,resetField:ds,clearErrors:ye,unregister:lt,setError:_e,setFocus:_a,getFieldState:re};return{...It,formControl:It}}function cd(t={}){const e=bn.useRef(void 0),n=bn.useRef(void 0),[i,a]=bn.useState({isDirty:!1,isValidating:!1,isLoading:Gs(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Gs(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:i},t.defaultValues&&!Gs(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:c,...h}=p7(t);e.current={...h,formState:i}}const l=e.current.control;return l._options=t,JU(()=>{const c=l._subscribe({formState:l._proxyFormState,callback:()=>a({...l._formState}),reRenderRoot:!0});return a(h=>({...h,isReady:!0})),l._formState.isReady=!0,c},[l]),bn.useEffect(()=>l._disableForm(t.disabled),[l,t.disabled]),bn.useEffect(()=>{t.mode&&(l._options.mode=t.mode),t.reValidateMode&&(l._options.reValidateMode=t.reValidateMode)},[l,t.mode,t.reValidateMode]),bn.useEffect(()=>{t.errors&&(l._setErrors(t.errors),l._focusError())},[l,t.errors]),bn.useEffect(()=>{t.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,t.shouldUnregister]),bn.useEffect(()=>{if(l._proxyFormState.isDirty){const c=l._getDirty();c!==i.isDirty&&l._subjects.state.next({isDirty:c})}},[l,i.isDirty]),bn.useEffect(()=>{var c;t.values&&!Zr(t.values,n.current)?(l._reset(t.values,{keepFieldsRef:!0,...l._options.resetOptions}),!((c=l._options.resetOptions)===null||c===void 0)&&c.keepIsValid||l._setValid(),n.current=t.values,a(h=>({...h}))):l._resetDefaultValues()},[l,t.values]),bn.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),e.current.formState=bn.useMemo(()=>XU(i,l),[l,i]),e.current}const g7=()=>{const[t,e]=z.useState([]),[n,i]=z.useState(!1),[a,l]=z.useState(!1),[c,h]=z.useState(null),[p,g]=z.useState(""),{register:v,handleSubmit:x,reset:w,setValue:E}=cd(),j=async()=>{i(!0);const B=await nv();e(B),i(!1)};z.useEffect(()=>{j()},[]);const M=async B=>{l(!0),g(" ...");try{if(c){if(c.name!==B.name||c.symbol_url!==B.symbol_url){g("   ...");const oe=(await ev()).filter(Z=>Z.party_name===c.name),H=oe.map(Z=>{const R={party_name:B.name};return Z.symbol_url===c.symbol_url&&(R.symbol_url=B.symbol_url),tv(Z.id,R)});await Promise.all(H),console.log(`Updated info for ${oe.length} candidates.`)}g("  ..."),await oO(c.id,B)}else await aO(B);w(),h(null),j()}catch(K){console.error("Failed to save party:",K),alert(":   ")}finally{l(!1),g("")}},V=B=>{h(B),E("name",B.name),E("symbol_url",B.symbol_url),window.scrollTo({top:0,behavior:"smooth"})},q=async B=>{window.confirm(":            ?")&&(await lO(B),j())};return d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl border border-gray-200 relative",children:[a&&d.jsxs("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex flex-col items-center justify-center rounded-2xl",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-electionGreen mb-2"}),d.jsx("p",{className:"text-sm font-bold text-gray-600",children:p})]}),d.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:c?d.jsx("span",{className:"text-blue-600",children:"  "}):d.jsx("span",{className:"text-green-600",children:"   "})}),d.jsxs("form",{onSubmit:x(M),className:"flex flex-col md:flex-row gap-4",children:[d.jsxs("div",{className:"flex-grow space-y-1",children:[d.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide ml-1",children:" "}),d.jsx("input",{...v("name",{required:!0}),placeholder:":   ",className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-electionGreen focus:border-electionGreen outline-none transition-all"})]}),d.jsxs("div",{className:"flex-grow space-y-1",children:[d.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide ml-1",children:" URL"}),d.jsx("input",{...v("symbol_url",{required:!0}),placeholder:"https://...",className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-electionGreen focus:border-electionGreen outline-none transition-all"})]}),d.jsxs("div",{className:"flex items-end gap-2",children:[d.jsx("button",{type:"submit",disabled:a,className:"px-6 py-3 bg-electionGreen text-white font-bold rounded-xl hover:bg-green-800 transition-colors shadow-sm disabled:opacity-50",children:c?"":""}),c&&d.jsx("button",{type:"button",disabled:a,onClick:()=>{h(null),w()},className:"px-6 py-3 bg-white text-gray-600 font-bold rounded-xl border border-gray-300 hover:bg-gray-100 transition-colors disabled:opacity-50",children:""})]})]})]}),d.jsxs("div",{children:[d.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:["   (",t.length,")"]}),n?d.jsx("div",{className:"space-y-2",children:[1,2,3].map(B=>d.jsx("div",{className:"h-16 bg-gray-100 rounded-xl animate-pulse"},B))}):d.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl overflow-hidden shadow-sm",children:[d.jsxs("table",{className:"min-w-full text-left",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 text-sm uppercase",children:""}),d.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 text-sm uppercase",children:" "}),d.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 text-sm uppercase text-right",children:""})]})}),d.jsx("tbody",{className:"divide-y divide-gray-100",children:d.jsx(Ft,{children:t.map(B=>d.jsxs(me.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hover:bg-gray-50/80 transition-colors group",children:[d.jsx("td",{className:"px-6 py-4",children:d.jsx("div",{className:"w-12 h-12 rounded-full border border-gray-200 p-1 bg-white flex items-center justify-center overflow-hidden",children:d.jsx("img",{src:B.symbol_url,alt:B.name,className:"w-full h-full object-cover"})})}),d.jsx("td",{className:"px-6 py-4",children:d.jsx("span",{className:"font-bold text-gray-800 text-lg",children:B.name})}),d.jsx("td",{className:"px-6 py-4 text-right",children:d.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx("button",{onClick:()=>V(B),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),d.jsx("button",{onClick:()=>q(B.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:" ",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})})]},B.id))})})]}),t.length===0&&d.jsx("div",{className:"text-center py-10 text-gray-400",children:"   "})]})]})]})},zT=["","","","","","","",""],y7=()=>{const[t,e]=z.useState([]),[n,i]=z.useState({}),[a,l]=z.useState(!1),[c,h]=z.useState(!1),[p,g]=z.useState(null),[v,x]=z.useState(""),[w,E]=z.useState(""),[j,M]=z.useState(""),{register:V,handleSubmit:q,reset:B,setValue:K}=cd(),oe=async()=>{l(!0);const N=await cm();e(N);const k={};await Promise.all(N.map(async D=>{const O=await Ol(D.name);k[D.name]=O.length})),i(k),l(!1)};z.useEffect(()=>{oe()},[]);const H=z.useMemo(()=>t.filter(N=>{const k=N.name.toLowerCase().includes(v.toLowerCase()),D=w?N.division===w:!0;return k&&D}),[t,v,w]),Z=async N=>{h(!0),M(" ...");try{if(p){if(p.name!==N.name){M("   ...");const D=(await Ol(p.name)).map(te=>tv(te.id,{district:N.name}));await Promise.all(D),M("   ...");const I=(await hO(p.name)).map(te=>tN(te.uid,{district:N.name}));await Promise.all(I)}M("  ..."),await uO(p.id,N)}else M("   ..."),await cO(N);B(),g(null),oe()}catch(k){console.error("Failed to save district:",k),alert(":      ")}finally{h(!1),M("")}},R=N=>{g(N),K("name",N.name),K("division",N.division),window.scrollTo({top:0,behavior:"smooth"})},S=async N=>{window.confirm(":               ?")&&(await dO(N),oe())};return d.jsxs("div",{className:"space-y-8 max-w-7xl mx-auto",children:[d.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:" "}),d.jsx("p",{className:"text-gray-500 text-sm",children:"        "})]})}),d.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-200 shadow-sm relative overflow-hidden",children:[c&&d.jsxs("div",{className:"absolute inset-0 bg-white/90 z-20 flex flex-col items-center justify-center rounded-2xl",children:[d.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-electionGreen mb-3"}),d.jsx("p",{className:"text-sm font-bold text-gray-600 animate-pulse",children:j||"..."})]}),d.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-6 flex items-center gap-2",children:p?"  ":"   "}),d.jsxs("form",{onSubmit:q(Z),className:"grid grid-cols-1 md:grid-cols-12 gap-5 items-end",children:[d.jsxs("div",{className:"md:col-span-5 space-y-1.5",children:[d.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide ml-1",children:" "}),d.jsx("input",{...V("name",{required:!0}),placeholder:": -",className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-electionGreen focus:bg-white transition-all outline-none"})]}),d.jsxs("div",{className:"md:col-span-4 space-y-1.5",children:[d.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide ml-1",children:""}),d.jsxs("select",{...V("division",{required:!0}),className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-electionGreen focus:bg-white transition-all outline-none",children:[d.jsx("option",{value:"",children:"  ..."}),zT.map(N=>d.jsx("option",{value:N,children:N},N))]})]}),d.jsxs("div",{className:"md:col-span-3 flex gap-2",children:[d.jsx("button",{type:"submit",disabled:c,className:"flex-1 px-6 py-3 bg-electionGreen text-white font-bold rounded-xl hover:bg-green-800 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:shadow-none",children:p?"":" "}),p&&d.jsx("button",{type:"button",onClick:()=>{g(null),B()},disabled:c,className:"px-4 py-3 bg-white border border-gray-200 text-gray-500 font-bold rounded-xl hover:bg-gray-50 disabled:opacity-50",children:""})]})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-gray-50 p-4 rounded-2xl border border-gray-200",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"bg-white p-2 rounded-lg shadow-sm",children:""}),d.jsxs("h3",{className:"font-bold text-gray-700",children:[" : ",d.jsx("span",{className:"text-electionGreen text-lg",children:H.length})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[d.jsxs("select",{value:w,onChange:N=>E(N.target.value),className:"px-4 py-2.5 bg-white border border-gray-200 rounded-xl text-sm font-semibold text-gray-600 outline-none focus:border-electionGreen focus:ring-1 focus:ring-electionGreen",children:[d.jsx("option",{value:"",children:" "}),zT.map(N=>d.jsx("option",{value:N,children:N},N))]}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",placeholder:" ...",value:v,onChange:N=>x(N.target.value),className:"w-full sm:w-64 pl-10 pr-4 py-2.5 bg-white border border-gray-200 rounded-xl outline-none focus:border-electionGreen focus:ring-1 focus:ring-electionGreen text-sm font-medium transition-all"}),d.jsx("svg",{className:"w-4 h-4 text-gray-400 absolute left-3 top-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]}),a?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(N=>d.jsx("div",{className:"h-32 bg-gray-100 rounded-2xl animate-pulse"},N))}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:d.jsx(Ft,{children:H.length>0?H.map(N=>d.jsxs(me.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},layout:!0,className:"bg-white p-5 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md hover:border-green-200 transition-all group relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 bg-gray-100 px-3 py-1 rounded-bl-xl text-[10px] font-bold text-gray-500 uppercase tracking-wider",children:N.division}),d.jsx("div",{className:"flex justify-between items-start mt-2 mb-4",children:d.jsxs("div",{children:[d.jsx("h4",{className:"text-xl font-bold text-gray-800",children:N.name}),d.jsxs("p",{className:"text-xs text-gray-400 font-medium mt-1",children:["ID: ",N.id]})]})}),d.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[d.jsxs("div",{className:"flex-1 bg-green-50 p-2 rounded-xl text-center border border-green-100",children:[d.jsx("p",{className:"text-xs text-green-600 font-bold mb-0.5",children:" "}),d.jsx("p",{className:"text-lg font-extrabold text-green-700",children:n[N.name]!==void 0?n[N.name]:"..."})]}),d.jsxs("div",{className:"flex-1 bg-gray-50 p-2 rounded-xl text-center border border-gray-100",children:[d.jsx("p",{className:"text-xs text-gray-500 font-bold mb-0.5",children:""}),d.jsx("p",{className:"text-lg font-extrabold text-gray-600",children:N.total_voters||0})]})]}),d.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity absolute bottom-4 right-4 bg-white/90 p-1 rounded-lg backdrop-blur-sm",children:[d.jsx("button",{onClick:()=>R(N),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors shadow-sm border border-gray-100",title:"",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),d.jsx("button",{onClick:()=>S(N.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors shadow-sm border border-gray-100",title:" ",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]},N.id)):d.jsxs("div",{className:"col-span-full py-16 text-center text-gray-400 bg-gray-50 rounded-3xl border-2 border-dashed border-gray-200",children:[d.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3 text-2xl",children:""}),d.jsx("p",{className:"font-medium",children:"    "}),d.jsx("p",{className:"text-sm mt-1",children:"     "})]})})})]})]})},BT=["","","","","","","",""],v7=()=>{const[t,e]=z.useState([]),[n,i]=z.useState([]),[a,l]=z.useState([]),[c,h]=z.useState(""),[p,g]=z.useState(""),[v,x]=z.useState(""),[w,E]=z.useState(!1),[j,M]=z.useState(!1),[V,q]=z.useState(null),{register:B,handleSubmit:K,reset:oe,setValue:H,watch:Z}=cd(),R=async()=>{E(!0);const[te,Re]=await Promise.all([nv(),cm()]);i(te),l(Re),E(!1)},S=async te=>{if(!te){e([]);return}E(!0);const Re=await Ol(te);e(Re),E(!1)};z.useEffect(()=>{R()},[]),z.useEffect(()=>{p&&S(p)},[p]);const N=async te=>{M(!0);try{const Re=n.find(be=>be.name===te.party_name),ee=te.profile.promises.split(`
`).filter(be=>be.trim()!==""),X=te.symbol_url&&te.symbol_url.trim()!==""?te.symbol_url:(Re==null?void 0:Re.symbol_url)||"",ue={...te,symbol_url:X,profile:{...te.profile,promises:ee}};if(V)await tv(V.id,ue);else{const be={...ue,vote_count:0,age_demographics:{"18-25":0,"26-35":0,"36-45":0,"46-60":0,"60+":0}};await X6(be)}oe(),q(null),x(""),p===te.district?S(p):(h(v),g(te.district))}catch(Re){console.error("Failed to save candidate:",Re),alert("   ")}finally{M(!1)}},k=te=>{q(te);const Re=a.find(ee=>ee.name===te.district);Re&&x(Re.division),H("name",te.name),H("party_name",te.party_name),H("symbol_url",te.symbol_url),H("district",te.district),H("profile.education",te.profile.education||""),H("profile.net_worth",te.profile.net_worth||""),H("profile.promises",(te.profile.promises||[]).join(`
`)),window.scrollTo({top:0,behavior:"smooth"})},D=async te=>{window.confirm(":         ?")&&(await J6(te),S(p))},O=z.useMemo(()=>a.filter(te=>te.division===v),[a,v]),I=z.useMemo(()=>a.filter(te=>te.division===c),[a,c]);return d.jsxs("div",{className:"space-y-8 max-w-7xl mx-auto",children:[d.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:" "}),d.jsx("p",{className:"text-gray-500 text-sm",children:"       "})]})}),d.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-gray-100 shadow-xl shadow-gray-200/50 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-green-50 to-transparent rounded-full -mr-20 -mt-20 opacity-60 pointer-events-none"}),d.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-8 flex items-center gap-3 relative z-10 border-b border-gray-100 pb-4",children:[d.jsx("span",{className:"bg-green-100 text-electionGreen p-2 rounded-lg",children:V?"":""}),V?"  ":"  "]}),d.jsxs("form",{onSubmit:K(N),className:"grid grid-cols-1 md:grid-cols-2 gap-8 relative z-10",children:[d.jsx("div",{className:"space-y-5",children:d.jsxs("div",{className:"bg-gray-50 p-5 rounded-2xl space-y-4 border border-gray-100",children:[d.jsx("h4",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-2",children:" "}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),d.jsx("input",{...B("name",{required:!0}),placeholder:"  ",className:"w-full p-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-electionGreen outline-none transition-all"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),d.jsxs("select",{...B("party_name",{required:!0}),className:"w-full p-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-electionGreen outline-none transition-all",children:[d.jsx("option",{value:"",children:"  "}),n.map(te=>d.jsx("option",{value:te.name,children:te.name},te.id))]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" ()"}),d.jsxs("select",{value:v,onChange:te=>{x(te.target.value),H("district","")},className:"w-full p-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-electionGreen outline-none transition-all",children:[d.jsx("option",{value:"",children:" "}),BT.map(te=>d.jsx("option",{value:te,children:te},te))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),d.jsxs("select",{...B("district",{required:!0}),disabled:!v,className:"w-full p-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-electionGreen outline-none transition-all disabled:bg-gray-100 disabled:text-gray-400",children:[d.jsx("option",{value:"",children:"  "}),O.map(te=>d.jsx("option",{value:te.name,children:te.name},te.id))]})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["  () ",d.jsx("span",{className:"text-gray-400 font-normal text-xs ml-1",children:"()"})]}),d.jsx("input",{...B("symbol_url"),placeholder:"  ",className:"w-full p-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-electionGreen outline-none transition-all"})]})]})}),d.jsx("div",{className:"space-y-5",children:d.jsxs("div",{className:"bg-gray-50 p-5 rounded-2xl space-y-4 border border-gray-100 h-full",children:[d.jsx("h4",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-2",children:"  "}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" "}),d.jsx("input",{...B("profile.education"),placeholder:": ..",className:"w-full p-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-electionGreen outline-none transition-all"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" ()"}),d.jsx("input",{...B("profile.net_worth"),placeholder:":  ",className:"w-full p-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-electionGreen outline-none transition-all"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" /"}),d.jsx("textarea",{...B("profile.promises"),placeholder:"      ...",className:"w-full p-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-electionGreen outline-none h-40 resize-none transition-all"}),d.jsx("p",{className:"text-xs text-gray-400 mt-1 text-right",children:":   "})]})]})}),d.jsxs("div",{className:"md:col-span-2 flex justify-end gap-3 pt-4 border-t border-gray-100",children:[V&&d.jsx("button",{type:"button",onClick:()=>{q(null),oe(),x("")},className:"px-6 py-3 bg-white border border-gray-200 text-gray-600 font-bold rounded-xl hover:bg-gray-50 hover:text-red-500 transition-colors",children:""}),d.jsx("button",{type:"submit",disabled:j,className:"px-8 py-3 bg-electionGreen text-white font-bold rounded-xl hover:bg-green-800 transition-all shadow-lg hover:shadow-xl shadow-green-200 flex items-center gap-2 disabled:opacity-70",children:j?"...":V?" ":"  "})]})]})]}),d.jsxs("div",{className:"space-y-6 pt-6",children:[d.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-gray-200 shadow-sm flex flex-col md:flex-row justify-between items-center gap-4 sticky top-4 z-20",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"bg-electionGreen/10 text-electionGreen p-2 rounded-lg text-xl",children:""}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-bold text-gray-800",children:" "}),p&&d.jsxs("p",{className:"text-xs text-gray-500 font-medium",children:[": ",p]})]}),d.jsx("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm font-bold ml-2",children:t.length})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[d.jsxs("select",{value:c,onChange:te=>{h(te.target.value),g(""),e([])},className:"px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl text-sm font-semibold text-gray-700 outline-none focus:border-electionGreen focus:ring-1 focus:ring-electionGreen",children:[d.jsx("option",{value:"",children:" ..."}),BT.map(te=>d.jsx("option",{value:te,children:te},te))]}),d.jsxs("select",{value:p,onChange:te=>g(te.target.value),disabled:!c,className:"px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl text-sm font-semibold text-gray-700 outline-none focus:border-electionGreen focus:ring-1 focus:ring-electionGreen disabled:opacity-50",children:[d.jsx("option",{value:"",children:"  ..."}),I.map(te=>d.jsx("option",{value:te.name,children:te.name},te.id))]})]})]}),d.jsx("div",{className:"min-h-[300px]",children:p?w?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(te=>d.jsx("div",{className:"h-48 bg-gray-100 rounded-2xl animate-pulse"},te))}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.jsx(Ft,{children:t.length>0?t.map(te=>d.jsxs(me.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},layout:!0,className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-lg hover:border-green-200 transition-all group relative overflow-hidden",children:[d.jsx("div",{className:"flex items-start justify-between mb-4",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-white shadow-md overflow-hidden bg-gray-50",children:d.jsx("img",{src:te.symbol_url||"https://via.placeholder.com/100",alt:te.name,className:"w-full h-full object-cover"})}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-gray-900 text-lg leading-tight",children:te.name}),d.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 bg-green-50 text-green-700 text-xs font-bold rounded-md",children:te.party_name})]})]})}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[d.jsxs("div",{className:"bg-gray-50 p-2 rounded-xl text-center",children:[d.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:" "}),d.jsx("p",{className:"font-bold text-gray-800",children:te.vote_count.toLocaleString("bn-BD")})]}),d.jsxs("div",{className:"bg-gray-50 p-2 rounded-xl text-center",children:[d.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase",children:""}),d.jsx("p",{className:"font-bold text-gray-800 text-sm truncate",children:te.profile.net_worth||"N/A"})]})]}),d.jsxs("div",{className:"flex gap-2 pt-2",children:[d.jsx("button",{onClick:()=>k(te),className:"flex-1 py-2 text-sm bg-blue-50 text-blue-600 rounded-xl hover:bg-blue-600 hover:text-white font-bold transition-all",children:""}),d.jsx("button",{onClick:()=>D(te.id),className:"flex-1 py-2 text-sm bg-red-50 text-red-600 rounded-xl hover:bg-red-600 hover:text-white font-bold transition-all",children:" "})]})]},te.id)):d.jsxs("div",{className:"col-span-full py-12 text-center bg-white rounded-2xl border border-gray-100 shadow-sm",children:[d.jsx("div",{className:"text-4xl mb-2",children:""}),d.jsx("p",{className:"text-gray-500 font-medium",children:"     "}),d.jsx("p",{className:"text-xs text-gray-400",children:"       "})]})})}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-gray-50 rounded-3xl border-2 border-dashed border-gray-200 text-gray-400",children:[d.jsx("span",{className:"text-4xl mb-3",children:""}),d.jsx("p",{className:"font-medium",children:"      "}),d.jsx("p",{className:"text-sm",children:"   "})]})})]})]})},x7=()=>{const[t,e]=z.useState([]),[n,i]=z.useState(!1),[a,l]=z.useState(null),{register:c,handleSubmit:h,reset:p,setValue:g}=cd(),v=async()=>{i(!0);const M=await JA();e(M),i(!1)};z.useEffect(()=>{v()},[]);const x=async M=>{try{a?await tO(a.id,M):await eO(M),p(),l(null),v()}catch(V){console.error("Failed to save poll:",V)}},w=M=>{l(M),g("question",M.question)},E=async M=>{window.confirm(":            ?")&&(await nO(M),v())},j=(M,V)=>V>0?M/V*100:0;return d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl border border-gray-200",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:a?"  ":"   "}),d.jsxs("form",{onSubmit:h(x),className:"flex flex-col md:flex-row gap-4 items-start",children:[d.jsxs("div",{className:"flex-grow w-full space-y-1",children:[d.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide ml-1",children:""}),d.jsx("input",{...c("question",{required:!0}),placeholder:":      ?",className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-electionGreen focus:border-electionGreen outline-none"})]}),d.jsxs("div",{className:"flex gap-2 w-full md:w-auto mt-6 md:mt-0 pt-1",children:[d.jsx("button",{type:"submit",className:"flex-1 md:flex-none px-6 py-3 bg-electionGreen text-white font-bold rounded-xl hover:bg-green-800 transition-colors shadow-lg shadow-green-100",children:a?"":" "}),a&&d.jsx("button",{type:"button",onClick:()=>{l(null),p()},className:"px-6 py-3 bg-white border border-gray-300 text-gray-600 font-bold rounded-xl hover:bg-gray-100 transition-colors",children:""})]})]})]}),d.jsxs("div",{children:[d.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:["  (",t.length,")"]}),n?d.jsx("div",{className:"space-y-3",children:[1,2,3].map(M=>d.jsx("div",{className:"h-24 bg-gray-100 rounded-xl animate-pulse"},M))}):d.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl overflow-hidden shadow-sm",children:d.jsxs("div",{className:"overflow-x-auto",children:[d.jsxs("table",{className:"min-w-full text-left",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 text-sm uppercase w-1/2",children:""}),d.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 text-sm uppercase text-center",children:""}),d.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 text-sm uppercase text-right",children:""})]})}),d.jsx("tbody",{className:"divide-y divide-gray-100",children:d.jsx(Ft,{children:t.map(M=>{const V=M.yes_count+M.no_count,q=j(M.yes_count,V);return d.jsxs(me.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hover:bg-gray-50/50 transition-colors",children:[d.jsxs("td",{className:"px-6 py-4",children:[d.jsx("p",{className:"font-medium text-gray-800 text-lg mb-1",children:M.question}),d.jsxs("p",{className:"text-xs text-gray-400",children:[" : ",V.toLocaleString("bn-BD")]})]}),d.jsxs("td",{className:"px-6 py-4",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1 text-xs font-bold text-gray-500",children:[d.jsxs("span",{className:"text-electionGreen",children:[" (",Math.round(q),"%)"]}),d.jsxs("span",{className:"ml-auto text-red-500",children:[" (",Math.round(100-q),"%)"]})]}),d.jsxs("div",{className:"w-full h-2 bg-gray-100 rounded-full overflow-hidden flex",children:[d.jsx("div",{style:{width:`${q}%`},className:"h-full bg-electionGreen"}),d.jsx("div",{style:{width:`${100-q}%`},className:"h-full bg-red-500"})]})]}),d.jsx("td",{className:"px-6 py-4 text-right",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>w(M),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),d.jsx("button",{onClick:()=>E(M.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:" ",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})})]},M.id)})})})]}),t.length===0&&d.jsx("div",{className:"text-center py-10 text-gray-400",children:"   "})]})})]})]})},b7=()=>{const[t,e]=z.useState([]),[n,i]=z.useState(!1),[a,l]=z.useState(null),{register:c,handleSubmit:h,reset:p,setValue:g,watch:v}=cd({defaultValues:{status:"fake"}}),x=v("status"),w=async()=>{i(!0);const V=await ZA();e(V),i(!1)};z.useEffect(()=>{w()},[]);const E=async V=>{try{a?await iO(a.id,V):await sO(V),p(),l(null),w()}catch(q){console.error("Failed to save fact check:",q)}},j=V=>{l(V),g("headline",V.headline),g("source",V.source),g("status",V.status)},M=async V=>{window.confirm("     -   ?")&&(await rO(V),w())};return d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:`p-6 rounded-2xl border transition-colors duration-300 ${x==="true"?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[d.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:a?" - ":"  / "}),d.jsxs("form",{onSubmit:h(E),className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide ml-1",children:""}),d.jsx("input",{...c("headline",{required:!0}),placeholder:"   ...",className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-400 outline-none bg-white"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide ml-1",children:"/"}),d.jsx("input",{...c("source",{required:!0}),placeholder:",    ...",className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-400 outline-none bg-white"})]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide ml-1",children:" "}),d.jsxs("select",{...c("status",{required:!0}),className:`w-full p-3 border rounded-xl outline-none font-bold appearance-none cursor-pointer ${x==="true"?"bg-white text-green-700 border-green-300 focus:ring-green-500":"bg-white text-red-700 border-red-300 focus:ring-red-500"}`,children:[d.jsx("option",{value:"fake",children:"  / "}),d.jsx("option",{value:"true",children:"  / "})]})]}),d.jsxs("div",{className:"flex gap-2 pt-2 justify-end",children:[a&&d.jsx("button",{type:"button",onClick:()=>{l(null),p()},className:"px-6 py-2.5 bg-white border border-gray-300 text-gray-600 font-bold rounded-xl hover:bg-gray-100 transition-colors",children:""}),d.jsx("button",{type:"submit",className:`px-8 py-2.5 text-white font-bold rounded-xl transition-colors shadow-lg ${x==="true"?"bg-green-600 hover:bg-green-700 shadow-green-200":"bg-red-600 hover:bg-red-700 shadow-red-200"}`,children:a?" ":"  "})]})]})]}),d.jsxs("div",{children:[d.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:["   (",t.length,")"]}),n?d.jsx("div",{className:"space-y-3",children:[1,2,3].map(V=>d.jsx("div",{className:"h-16 bg-gray-100 rounded-xl animate-pulse"},V))}):d.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl overflow-hidden shadow-sm",children:[d.jsxs("table",{className:"min-w-full text-left",children:[d.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 text-sm uppercase",children:""}),d.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 text-sm uppercase",children:""}),d.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 text-sm uppercase text-center",children:""}),d.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 text-sm uppercase text-right",children:""})]})}),d.jsx("tbody",{className:"divide-y divide-gray-100",children:d.jsx(Ft,{children:t.map(V=>d.jsxs(me.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hover:bg-gray-50/50 transition-colors group",children:[d.jsx("td",{className:"px-6 py-4 max-w-xs md:max-w-md font-medium text-gray-800",children:V.headline}),d.jsx("td",{className:"px-6 py-4 text-gray-500 text-sm",children:V.source}),d.jsx("td",{className:"px-6 py-4 text-center",children:d.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide border ${V.status==="true"?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-rose-50 text-rose-700 border-rose-200"}`,children:[d.jsx("span",{className:`w-2 h-2 rounded-full ${V.status==="true"?"bg-emerald-500":"bg-rose-500"}`}),V.status==="true"?"":""]})}),d.jsx("td",{className:"px-6 py-4 text-right",children:d.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx("button",{onClick:()=>j(V),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),d.jsx("button",{onClick:()=>M(V.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:" ",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})})]},V.id))})})]}),t.length===0&&d.jsx("div",{className:"text-center py-10 text-gray-400",children:"   "})]})]})]})},FT=["prompt.scientist.23@gmail.com"],Zg=[{id:"dashboard",label:"",icon:d.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),component:GU},{id:"parties",label:" ",icon:d.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),component:g7},{id:"districts",label:" ",icon:d.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),component:y7},{id:"candidates",label:" ",icon:d.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),component:v7},{id:"polls",label:"",icon:d.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),component:x7},{id:"factchecks",label:" ",icon:d.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),component:b7}],_7=({onNavigate:t})=>{var c;const{user:e,loading:n}=To(),[i,a]=z.useState(Zg[0].id);if(z.useEffect(()=>{n||(!e||!e.email||!FT.includes(e.email))&&t("dashboard")},[e,n,t]),n||!e||!e.email||!FT.includes(e.email))return d.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-electionGreen mx-auto mb-4"}),d.jsx("p",{className:"text-gray-500 font-medium",children:"  ..."})]})});const l=(c=Zg.find(h=>h.id===i))==null?void 0:c.component;return d.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},className:"max-w-7xl mx-auto space-y-6",children:[d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[d.jsx("span",{className:"bg-electionGreen/10 p-2 rounded-lg text-electionGreen",children:""})," "]}),d.jsxs("p",{className:"text-sm text-gray-500 mt-1 ml-12",children:[", ",d.jsx("span",{className:"font-semibold text-gray-700",children:e.displayName||"Admin"})]})]}),d.jsxs("button",{onClick:()=>t("dashboard"),className:"flex items-center gap-2 px-5 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-all text-sm",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})})," "]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[d.jsx("div",{className:"lg:col-span-3",children:d.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-2 lg:sticky lg:top-24",children:d.jsx("nav",{className:"flex flex-row lg:flex-col overflow-x-auto lg:overflow-visible gap-1 p-1",children:Zg.map(h=>d.jsxs("button",{onClick:()=>a(h.id),className:`flex items-center gap-3 px-4 py-3 rounded-xl font-medium text-sm transition-all whitespace-nowrap ${i===h.id?"bg-electionGreen text-white shadow-md shadow-green-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[h.icon,h.label]},h.id))})})}),d.jsx("div",{className:"lg:col-span-9",children:d.jsx(Ft,{mode:"wait",children:d.jsx(me.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 min-h-[500px]",children:l&&d.jsx(l,{})},i)})})]})]})},w7=()=>d.jsxs("div",{className:"fixed inset-0 flex items-center justify-center bg-white z-50",children:[d.jsxs("div",{className:"relative flex items-center justify-center",children:[d.jsx(me.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,ease:"backOut"},className:"relative z-10 bg-electionGreen p-4 rounded-full shadow-lg shadow-electionGreen/30",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),[0,1,2].map(t=>d.jsx(me.div,{className:"absolute border-4 border-electionGreen/30 rounded-full",initial:{width:"50px",height:"50px",opacity:1},animate:{width:["50px","150px"],height:["50px","150px"],opacity:[1,0]},transition:{duration:2,repeat:1/0,delay:t*.4,ease:"easeOut"}},t))]}),d.jsx(me.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"absolute bottom-12 text-xl font-bold text-electionGreen tracking-wider uppercase",children:"National Election"})]}),T7=({children:t,onNavigate:e,hideHeader:n=!1})=>{const{user:i,userProfile:a}=To(),[l,c]=z.useState(!1);return bn.useEffect(()=>{const h=()=>c(window.scrollY>20);return window.addEventListener("scroll",h),()=>window.removeEventListener("scroll",h)},[]),d.jsxs("div",{className:"bg-gray-50 min-h-screen text-gray-800 flex flex-col font-sans",children:[d.jsx("header",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 border-b ${n?"hidden":"block"} ${l?"bg-white/90 backdrop-blur-md shadow-md border-gray-200 py-3":"bg-gradient-to-r from-electionGreen-dark via-electionGreen to-green-600 text-white border-transparent py-4"}`,children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("button",{onClick:()=>e("dashboard"),className:"flex items-center gap-3 group focus:outline-none",children:[d.jsx("div",{className:`p-2 rounded-lg transition-colors ${l?"bg-electionGreen text-white":"bg-white/20 text-white"}`,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),d.jsxs("div",{className:"text-left",children:[d.jsx("h1",{className:`text-xl font-bold tracking-tight ${l?"text-gray-900":"text-white"}`,children:"  "}),d.jsx("p",{className:`text-xs font-medium tracking-wide ${l?"text-electionGreen":"text-green-100 opacity-90"}`,children:"  "})]})]}),d.jsxs("div",{className:"flex items-center gap-6",children:[d.jsxs("nav",{className:`hidden md:flex gap-6 text-sm font-medium ${l?"text-gray-600":"text-green-50"}`,children:[d.jsx("button",{onClick:()=>e("dashboard"),className:"hover:text-amber-400 transition-colors",children:""}),d.jsx("button",{className:"hover:text-amber-400 transition-colors",children:""}),d.jsx("button",{className:"hover:text-amber-400 transition-colors",children:""})]}),i&&a&&d.jsxs("div",{className:"flex items-center gap-3 pl-6 border-l border-white/20",children:[d.jsxs("div",{className:`hidden sm:block text-right ${l?"text-gray-800":"text-white"}`,children:[d.jsx("p",{className:"text-sm font-bold",children:a.username}),d.jsx("p",{className:`text-xs ${l?"text-gray-500":"text-green-200"}`,children:a.district})]}),d.jsxs("button",{onClick:()=>e("profile"),className:"relative group focus:outline-none",children:[d.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg shadow-sm transition-transform group-hover:scale-105 ring-2 ring-offset-2 ${l?"bg-electionGreen text-white ring-gray-200":"bg-white text-electionGreen ring-white/30 ring-offset-electionGreen"}`,children:a.username.charAt(0).toUpperCase()}),d.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 border-2 border-white rounded-full"})]})]})]})]})})}),d.jsxs("main",{className:`flex-grow ${n?"pt-4":"pt-24"} pb-12 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto w-full min-h-[80vh]`,children:[d.jsx("div",{className:"fixed inset-0 pointer-events-none opacity-[0.03] z-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),d.jsx(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},className:"relative z-10 w-full",children:t})]}),d.jsxs("footer",{className:"bg-gray-900 text-gray-400 py-12 border-t border-gray-800 mt-auto w-full z-10 relative",children:[d.jsxs("div",{className:"max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[d.jsxs("div",{className:"col-span-1 md:col-span-2",children:[d.jsx("h2",{className:"text-white text-lg font-bold mb-4",children:"  "}),d.jsx("p",{className:"text-sm leading-relaxed max-w-sm",children:",               "})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-semibold mb-3",children:" "}),d.jsxs("ul",{className:"space-y-2 text-sm",children:[d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:" "})}),d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:" "})}),d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:" "})})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-semibold mb-3",children:""}),d.jsxs("ul",{className:"space-y-2 text-sm",children:[d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:" "})}),d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:" "})}),d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:" "})})]})]})]}),d.jsx("div",{className:"border-t border-gray-800 pt-8 text-center text-xs",children:d.jsx("p",{children:"     |      "})})]})]})};function E7(){const{user:t,loading:e}=To(),[n,i]=z.useState("dashboard"),[a,l]=z.useState(!1);if(z.useEffect(()=>{const h=sessionStorage.getItem("pendingVerification")==="true";t!=null&&t.emailVerified&&h&&(sessionStorage.removeItem("pendingVerification"),Ns.signOut())},[t]),z.useEffect(()=>{t||i("dashboard"),n!=="dashboard"&&l(!1)},[t,n]),e)return d.jsx(w7,{});if(!t)return d.jsx(dU,{});if(!t.emailVerified)return d.jsx(hU,{});const c=()=>{switch(n){case"dashboard":return d.jsx(NT,{onAiToggle:l});case"profile":return d.jsx(HU,{onNavigate:i});case"admin":return d.jsx(_7,{});default:return d.jsx(NT,{onAiToggle:l})}};return d.jsx(T7,{onNavigate:i,hideHeader:a,children:d.jsx(Ft,{mode:"wait",children:d.jsx(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:c()},n)})})}const iR=document.getElementById("root");if(!iR)throw new Error("Could not find root element to mount to");const S7=Gj.createRoot(iR);S7.render(d.jsx(bn.StrictMode,{children:d.jsx(mO,{children:d.jsx(E7,{})})}));
